/**
 * picasso.js v0.5.0
 * Copyright (c) 2018 QlikTech International AB
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.picasso=e()}(this,function(){"use strict";function t(t){t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height)}function e(e,n){return function(e,n){var i={x:0,y:0,width:0,height:0},r={x:0,y:0,width:0,height:0};if("function"==typeof e.getBoundingClientRect){var a=e.getBoundingClientRect();i.width=a.width,i.height=a.height}else i.width=e.width||0,i.height=e.height||0;return void 0!==n.size&&(i.width=isNaN(n.size.width)?i.width:n.size.width,i.height=isNaN(n.size.height)?i.height:n.size.height),void 0!==n.logicalSize?(r.width=isNaN(n.logicalSize.width)?i.width:n.logicalSize.width,r.height=isNaN(n.logicalSize.height)?i.height:n.logicalSize.height,r.align=isNaN(n.logicalSize.align)?.5:Math.min(Math.max(n.logicalSize.align,0),1),r.preserveAspectRatio=n.logicalSize.preserveAspectRatio):(r.width=i.width,r.height=i.height,r.preserveAspectRatio=!1),t(r),t(i),[r,i]}(e,n)}function n(t){var e={logicalSize:{preserveAspectRatio:!1},center:{minWidthRatio:.5,minHeightRatio:.5,minWidth:0,minHeight:0}};return ko(!0,e,t),e.center.minWidthRatio=Math.min(Math.max(e.center.minWidthRatio,0),1),e.center.minHeightRatio=Math.min(Math.max(e.center.minHeightRatio,0),1),e.center.minWidth=Math.max(e.center.minWidth,0),e.center.minHeight=Math.max(e.center.minHeight,0),e}function i(t){return"number"==typeof t&&!isNaN(t)}function r(t){return"number"!=typeof t||isNaN(t)}function a(t){for(var e=t.length,n=NaN,i=NaN,r=NaN,a=NaN,o=0;o<e;o++)n=isNaN(n)?t[o].x:Math.min(n,t[o].x),i=isNaN(i)?t[o].x:Math.max(i,t[o].x),r=isNaN(r)?t[o].y:Math.min(r,t[o].y),a=isNaN(a)?t[o].y:Math.max(a,t[o].y);return[n,r,i,a]}function o(t){return[{x:t.x1||0,y:t.y1||0},{x:t.x2||0,y:t.y2||0}]}function s(t){return[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}]}function u(t){var e=a(t),n=To(e,4),i=n[0],r=n[1];return{x:i,y:r,width:n[2]-i,height:n[3]-r}}function c(t){return{x1:t[0].x,y1:t[0].y,x2:t[1].x,y2:t[1].y}}function l(t){var e=t||{},n=e.x,r=e.y,a=e.width,o=e.height,s=e.x1,u=e.x2,c=e.y1,l=e.y2,h=e.cy,f=e.r,d=e.vertices;return i(e.cx)&&i(h)&&i(f)?"circle":i(s)&&i(u)&&i(c)&&i(l)?"line":i(n)&&i(r)&&i(a)&&i(o)?"rect":i(n)&&i(r)?"point":Array.isArray(d)?"polygon":null}function h(t,e,n){if(void 0===t.cachedSize){var i=t.config.requiredSize()(e,n);"object"===(void 0===i?"undefined":So(i))?(t.cachedSize=Math.ceil(i.size),t.edgeBleed=i.edgeBleed):t.cachedSize=Math.ceil(i)}return t.cachedSize}function f(t,e){switch(e.config.dock()){case"top":t.y+=e.cachedSize,t.height-=e.cachedSize;break;case"bottom":t.height-=e.cachedSize;break;case"left":t.x+=e.cachedSize,t.width-=e.cachedSize;break;case"right":t.width-=e.cachedSize}}function d(t,e){var n=e.edgeBleed;n&&(t.left=Math.max(t.left,n.left||0),t.right=Math.max(t.right,n.right||0),t.top=Math.max(t.top,n.top||0),t.bottom=Math.max(t.bottom,n.bottom||0))}function g(t,e,n){e.x<n.left&&(e.width-=n.left-e.x,e.x=n.left);var i=t.width-(e.x+e.width);i<n.right&&(e.width-=n.right-i),e.y<n.top&&(e.height-=n.top-e.y,e.y=n.top);var r=t.height-(e.y+e.height);r<n.bottom&&(e.height-=n.bottom-r)}function p(t,e,n,i,r){var a=ko({},e),o=ko({},n);f(a,i),d(o,i),g(t,a,o);return!!function(t,e,n){var i=Math.min(n.center.minWidth,t.width)||Math.max(t.width*n.center.minWidthRatio,1),r=Math.min(n.center.minHeight,t.height)||Math.max(t.height*n.center.minHeightRatio,1);return e.width>=i&&e.height>=r}(t,a,r)&&(f(e,i),d(n,i),!0)}function v(t){var e;return u((e=[]).concat.apply(e,Eo(t.map(s))))}function y(t,e,n,i){var r={x:n.x,y:n.y,width:n.width,height:n.height},a={x:n.x,y:n.y,width:n.width,height:n.height},o={};t.sort(function(t,e){return/^@/.test(e.config.dock())?-1:/^@/.test(t.config.dock())?1:t.config.displayOrder()-e.config.displayOrder()}).forEach(function(t){var s={},u={},c=t.config.dock();switch(c){case"top":s.height=u.height=t.cachedSize,s.width=e.width,u.width=r.width,s.x=e.x,u.x=r.x,s.y=u.y=r.y-t.cachedSize,r.y-=t.cachedSize,r.height+=t.cachedSize;break;case"bottom":s.x=e.x,u.x=r.x,s.y=u.y=r.y+r.height,s.width=e.width,u.width=r.width,s.height=u.height=t.cachedSize,r.height+=t.cachedSize;break;case"left":s.x=u.x=a.x-t.cachedSize,s.y=e.y,u.y=a.y,s.width=u.width=t.cachedSize,s.height=e.height,u.height=a.height,a.x-=t.cachedSize,a.width+=t.cachedSize;break;case"right":s.x=u.x=a.x+a.width,s.y=e.y,u.y=a.y,s.width=u.width=t.cachedSize,s.height=e.height,u.height=a.height,a.width+=t.cachedSize;break;default:s.x=u.x=n.x,s.y=u.y=n.y,s.width=u.width=n.width,s.height=u.height=n.height}if(/^@/.test(c)){var l=c.split(",").map(function(t){return o[t.replace("@","")]}).filter(function(t){return!!t});l.length>0&&(s=v(l.map(function(t){return t.outerRect})),u=v(l.map(function(t){return t.rect})))}else t.key&&(o[t.key]={rect:u,outerRect:s});!function(t,e,n,i){var r={x:i.width/n.width,y:i.height/n.height},a={left:0,top:0};if(n.preserveAspectRatio){var o=r.x<r.y,s=Math.min(r.x,r.y);r.x=s,r.y=s;var u=o?"height":"width",c=(i[u]-n[u]*r.x)*n.align;a.left=o?0:c,a.top=o?c:0}t.scaleRatio=r,t.margin=a,e.scaleRatio=r,e.margin=a,n.scaleRatio=r,n.margin=a}(u,s,e,i),t.instance.resize(u,s,e),t.cachedSize=void 0})}function m(t){var i=[],r=[],a=n(t),o=function(){};return o.addComponent=function(t,e){!function(t){["resize"].forEach(function(e){if("function"!=typeof t[e])throw new Error('Component is missing required function "'+e+'"')})}(t),o.removeComponent(t),i.push({instance:t,key:e,config:"function"==typeof t.dockConfig?t.dockConfig:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.dock,n=void 0===e?"":e,i=t.displayOrder,r=void 0===i?0:i,a=t.prioOrder,o=void 0===a?0:a,s=t.requiredSize,u=void 0===s?function(){return 0}:s,c=t.minimumLayoutMode,l=t.show,h=void 0===l||l,f=function(){};return f.requiredSize=function(t){return"function"==typeof t?(u=t,this):u},f.dock=function(t){return void 0===t?n:(n=t,this)},f.displayOrder=function(t){return void 0===t?r:(r=t,this)},f.prioOrder=function(t){return void 0===t?o:(o=t,this)},f.minimumLayoutMode=function(t){return void 0===t?c:(c=t,this)},f.show=function(t){return void 0===t?h:(h=!!t,this)},f}(t.dockConfig)})},o.removeComponent=function(t){var e=i.map(function(t){return t.instance}).indexOf(t);e>-1&&i.splice(e,1)},o.layout=function(t){var n=e(t,a),o=To(n,2),s=o[0],u=o[1];!function(t,e,n,i){for(var r=n.layoutModes||{},a=0;a<t.length;++a){var o=t[a],s=o.config.minimumLayoutMode(),u=o.config.show();u&&"object"===(void 0===s?"undefined":So(s))?u=r[s.width]&&r[s.height]&&i.width>=r[s.width].width&&i.height>=r[s.height].height:u&&void 0!==s&&(u=r[s]&&i.width>=r[s].width&&i.height>=r[s].height),u||(t.splice(a,1),e.push(o.instance),--a)}}(i,r,a,s);var c=function(t,e,n,i){var r={x:t.x,y:t.y,width:t.width,height:t.height},a={left:0,right:0,top:0,bottom:0},o=e.slice();o.sort(function(t,e){return t.config.prioOrder()-e.config.prioOrder()});for(var s=0;s<o.length;++s){var u=o[s];h(u,r,t),p(t,r,a,u,i)||(o.splice(s,1),n.push(u.instance),--s)}var c=e.filter(function(t){return-1!==o.indexOf(t)});return e.length=0,e.push.apply(e,Eo(c)),g(t,r,a),r}(s,i,r,a);return y(i,s,c,u),{visible:i.map(function(t){return t.instance}),hidden:r}},o.settings=function(t){a=n(t)},o}function x(t){return!!t.changedTouches}function b(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function w(){return new b}function k(t){return t>=1?Yo:t<=-1?-Yo:Math.asin(t)}function _(t){return t.innerRadius}function M(t){return t.outerRadius}function S(t){return t.startAngle}function R(t){return t.endAngle}function z(t){return t&&t.padAngle}function N(t,e,n,i,r,a,o){var s=t-n,u=e-i,c=(o?a:-a)/Ho(s*s+u*u),l=c*u,h=-c*s,f=t+l,d=e+h,g=n+l,p=i+h,v=(f+g)/2,y=(d+p)/2,m=g-f,x=p-d,b=m*m+x*x,w=r-a,k=f*p-g*d,_=(x<0?-1:1)*Ho($o(0,w*w*b-k*k)),M=(k*x-m*_)/b,S=(-k*m-x*_)/b,R=(k*x+m*_)/b,z=(-k*m+x*_)/b,N=M-v,C=S-y,O=R-v,A=z-y;return N*N+C*C>O*O+A*A&&(M=R,S=z),{cx:M,cy:S,x01:-l,y01:-h,x11:M*(r/w-1),y11:S*(r/w-1)}}function C(t){this._context=t}function O(t){return t[0]}function A(t){return t[1]}function T(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function E(t){this._context=t}function j(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function P(t,e){this._context=t,this._k=(1-e)/6}function F(t,e){this._context=t,this._alpha=e}function L(t){return t<0?-1:1}function D(t,e,n){var i=t._x1-t._x0,r=e-t._x1,a=(t._y1-t._y0)/(i||r<0&&-0),o=(n-t._y1)/(r||i<0&&-0),s=(a*r+o*i)/(i+r);return(L(a)+L(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function B(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function W(t,e,n){var i=t._x0,r=t._y0,a=t._x1,o=t._y1,s=(a-i)/3;t._context.bezierCurveTo(i+s,r+s*e,a-s,o-s*n,a,o)}function $(t){this._context=t}function I(t){this._context=new V(t)}function V(t){this._context=t}function H(t){this._context=t}function U(t){var e,n,i=t.length-1,r=new Array(i),a=new Array(i),o=new Array(i);for(r[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,a[i-1]=7,o[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(r[i-1]=o[i-1]/a[i-1],e=i-2;e>=0;--e)r[e]=(o[e]-r[e+1])/a[e];for(a[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)a[e]=2*t[e+1]-r[e+1];return[r,a]}function q(t,e){this._context=t,this._t=e}function Y(t,e){return t[e]}function X(t){for(var e,n=0,i=-1,r=t.length;++i<r;)(e=+t[i][1])&&(n+=e);return n}function Z(t){function e(t,e){if(!t||"string"!=typeof t)throw new TypeError("Invalid argument: key must be a non-empty string");return!(t in a)&&(a[t]=e,!0)}function n(t){return a[t]||o.get(t)}function i(t,i){return void 0!==i?e(t,i):n(t||r)}var r=void 0,a={},o=t||{get:function(){},has:function(){return!1},default:function(){}};return r=o.default(),i.add=e,i.get=n,i.has=function(t){return!!a[t]||o.has(t)},i.remove=function(t){var e=a[t];return delete a[t],e},i.getKeys=function(){return Object.keys(a)},i.getValues=function(){return Object.keys(a).map(function(t){return a[t]})},i.default=function(t){return void 0!==t&&(r=t),r},i.register=e,i}function G(t){return new J(t)}function J(t){if(!(e=fs.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",i=e[2]||">",r=e[3]||"-",a=e[4]||"",o=!!e[5],s=e[6]&&+e[6],u=!!e[7],c=e[8]&&+e[8].slice(1),l=e[9]||"";"n"===l?(u=!0,l="g"):hs[l]||(l=""),(o||"0"===n&&"="===i)&&(o=!0,n="0",i="="),this.fill=n,this.align=i,this.sign=r,this.symbol=a,this.zero=o,this.width=s,this.comma=u,this.precision=c,this.type=l}function Q(t,e,n,i){function r(e){return t(e=new Date(+e)),e}return r.floor=r,r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,i,a){var o,s=[];if(n=r.ceil(n),a=null==a?1:Math.floor(a),!(n<i&&a>0))return s;do{s.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<i);return s},r.filter=function(n){return Q(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););})},n&&(r.count=function(e,i){return xs.setTime(+e),bs.setTime(+i),t(xs),t(bs),Math.floor(n(xs,bs))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}function K(t){return Q(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ks)/_s})}function tt(t){return Q(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/_s})}function et(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function nt(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function it(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function rt(t){function e(t,e){return function(n){var i,r,a,o=[],s=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(o.push(t.slice(u,s)),null!=(r=Ls[i=t.charAt(++s)])?i=t.charAt(++s):r="e"===i?" ":"0",(a=e[i])&&(i=a(n,r)),o.push(i),u=s+1);return o.push(t.slice(u,s)),o.join("")}}function n(t,e){return function(n){var r,a,o=it(1900);if(i(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=(a=(r=nt(it(o.y))).getUTCDay())>4||0===a?As.ceil(r):As(r),r=Cs.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(r=(a=(r=e(it(o.y))).getDay())>4||0===a?Rs.ceil(r):Rs(r),r=Ms.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?nt(it(o.y)).getUTCDay():e(it(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,nt(o)):e(o)}}function i(t,e,n,i){for(var r,a,o=0,s=e.length,u=n.length;o<s;){if(i>=u)return-1;if(37===(r=e.charCodeAt(o++))){if(r=e.charAt(o++),!(a=M[r in Ls?e.charAt(o++):r])||(i=a(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}var r=t.dateTime,a=t.date,o=t.time,s=t.periods,u=t.days,c=t.shortDays,l=t.months,h=t.shortMonths,f=st(s),d=ut(s),g=st(u),p=ut(u),v=st(c),y=ut(c),m=st(l),x=ut(l),b=st(h),w=ut(h),k={a:function(t){return c[t.getDay()]},A:function(t){return u[t.getDay()]},b:function(t){return h[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:null,d:Nt,e:Nt,f:Et,H:Ct,I:Ot,j:At,L:Tt,m:jt,M:Pt,p:function(t){return s[+(t.getHours()>=12)]},Q:ce,s:le,S:Ft,u:Lt,U:Dt,V:Bt,w:Wt,W:$t,x:null,X:null,y:It,Y:Vt,Z:Ht,"%":ue},_={a:function(t){return c[t.getUTCDay()]},A:function(t){return u[t.getUTCDay()]},b:function(t){return h[t.getUTCMonth()]},B:function(t){return l[t.getUTCMonth()]},c:null,d:Ut,e:Ut,f:Gt,H:qt,I:Yt,j:Xt,L:Zt,m:Jt,M:Qt,p:function(t){return s[+(t.getUTCHours()>=12)]},Q:ce,s:le,S:Kt,u:te,U:ee,V:ne,w:ie,W:re,x:null,X:null,y:ae,Y:oe,Z:se,"%":ue},M={a:function(t,e,n){var i=v.exec(e.slice(n));return i?(t.w=y[i[0].toLowerCase()],n+i[0].length):-1},A:function(t,e,n){var i=g.exec(e.slice(n));return i?(t.w=p[i[0].toLowerCase()],n+i[0].length):-1},b:function(t,e,n){var i=b.exec(e.slice(n));return i?(t.m=w[i[0].toLowerCase()],n+i[0].length):-1},B:function(t,e,n){var i=m.exec(e.slice(n));return i?(t.m=x[i[0].toLowerCase()],n+i[0].length):-1},c:function(t,e,n){return i(t,r,e,n)},d:mt,e:mt,f:Mt,H:bt,I:bt,j:xt,L:_t,m:yt,M:wt,p:function(t,e,n){var i=f.exec(e.slice(n));return i?(t.p=d[i[0].toLowerCase()],n+i[0].length):-1},Q:Rt,s:zt,S:kt,u:lt,U:ht,V:ft,w:ct,W:dt,x:function(t,e,n){return i(t,a,e,n)},X:function(t,e,n){return i(t,o,e,n)},y:pt,Y:gt,Z:vt,"%":St};return k.x=e(a,k),k.X=e(o,k),k.c=e(r,k),_.x=e(a,_),_.X=e(o,_),_.c=e(r,_),{format:function(t){var n=e(t+="",k);return n.toString=function(){return t},n},parse:function(t){var e=n(t+="",et);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+="",_);return n.toString=function(){return t},n},utcParse:function(t){var e=n(t,nt);return e.toString=function(){return t},e}}}function at(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(e)+r:r)}function ot(t){return t.replace(Ws,"\\$&")}function st(t){return new RegExp("^(?:"+t.map(ot).join("|")+")","i")}function ut(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function ct(t,e,n){var i=Ds.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function lt(t,e,n){var i=Ds.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function ht(t,e,n){var i=Ds.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function ft(t,e,n){var i=Ds.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function dt(t,e,n){var i=Ds.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function gt(t,e,n){var i=Ds.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function pt(t,e,n){var i=Ds.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function vt(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function yt(t,e,n){var i=Ds.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function mt(t,e,n){var i=Ds.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function xt(t,e,n){var i=Ds.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function bt(t,e,n){var i=Ds.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function wt(t,e,n){var i=Ds.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function kt(t,e,n){var i=Ds.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function _t(t,e,n){var i=Ds.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Mt(t,e,n){var i=Ds.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function St(t,e,n){var i=Bs.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function Rt(t,e,n){var i=Ds.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function zt(t,e,n){var i=Ds.exec(e.slice(n));return i?(t.Q=1e3*+i[0],n+i[0].length):-1}function Nt(t,e){return at(t.getDate(),e,2)}function Ct(t,e){return at(t.getHours(),e,2)}function Ot(t,e){return at(t.getHours()%12||12,e,2)}function At(t,e){return at(1+Ms.count(Ns(t),t),e,3)}function Tt(t,e){return at(t.getMilliseconds(),e,3)}function Et(t,e){return Tt(t,e)+"000"}function jt(t,e){return at(t.getMonth()+1,e,2)}function Pt(t,e){return at(t.getMinutes(),e,2)}function Ft(t,e){return at(t.getSeconds(),e,2)}function Lt(t){var e=t.getDay();return 0===e?7:e}function Dt(t,e){return at(Ss.count(Ns(t),t),e,2)}function Bt(t,e){var n=t.getDay();return t=n>=4||0===n?zs(t):zs.ceil(t),at(zs.count(Ns(t),t)+(4===Ns(t).getDay()),e,2)}function Wt(t){return t.getDay()}function $t(t,e){return at(Rs.count(Ns(t),t),e,2)}function It(t,e){return at(t.getFullYear()%100,e,2)}function Vt(t,e){return at(t.getFullYear()%1e4,e,4)}function Ht(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+at(e/60|0,"0",2)+at(e%60,"0",2)}function Ut(t,e){return at(t.getUTCDate(),e,2)}function qt(t,e){return at(t.getUTCHours(),e,2)}function Yt(t,e){return at(t.getUTCHours()%12||12,e,2)}function Xt(t,e){return at(1+Cs.count(Es(t),t),e,3)}function Zt(t,e){return at(t.getUTCMilliseconds(),e,3)}function Gt(t,e){return Zt(t,e)+"000"}function Jt(t,e){return at(t.getUTCMonth()+1,e,2)}function Qt(t,e){return at(t.getUTCMinutes(),e,2)}function Kt(t,e){return at(t.getUTCSeconds(),e,2)}function te(t){var e=t.getUTCDay();return 0===e?7:e}function ee(t,e){return at(Os.count(Es(t),t),e,2)}function ne(t,e){var n=t.getUTCDay();return t=n>=4||0===n?Ts(t):Ts.ceil(t),at(Ts.count(Es(t),t)+(4===Es(t).getUTCDay()),e,2)}function ie(t){return t.getUTCDay()}function re(t,e){return at(As.count(Es(t),t),e,2)}function ae(t,e){return at(t.getUTCFullYear()%100,e,2)}function oe(t,e){return at(t.getUTCFullYear()%1e4,e,4)}function se(){return"+0000"}function ue(){return"%"}function ce(t){return+t}function le(t){return Math.floor(+t/1e3)}function he(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.id,i=void 0===n?Vs.id:n,r=e.key,a=void 0===r?Vs.key:r,o=e.min,s=void 0===o?Vs.min:o,u=e.max,c=void 0===u?Vs.max:u,l=e.type,h=void 0===l?Vs.type:l,f=e.tags,d=void 0===f?Vs.tags:f,g=e.title,p=void 0===g?Vs.title:g,v=e.values,y=void 0===v?Vs.values:v,m=e.value,x=void 0===m?Vs.value:m,b=e.label,w=void 0===b?Vs.label:b,k=e.formatter,_=void 0===k?Vs.formatter:k;return{id:function(){return i(t)},key:function(){return a(t)},raw:function(){return t},tags:function(){return d(t)},type:function(){return h(t)},min:function(){return s(t)},max:function(){return c(t)},title:function(){return p(t)},items:function(){return y(t)},formatter:function(){return _(t)},value:x,label:w}}function fe(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).logger;if(Array.isArray(t))n.items=t.map(function(t){return{value:t,label:String(t)}});else if(t){if("collection"in t)return e.collection(t.collection);var r=e.dataset?e.dataset(t.source):null,a=t.value||function(t){return t},o=t.label||function(t){return t};if(t.groupBy||t.mapTo)i.warn('Deprecated "data" configuration',t),n.items=[];else if(t.hierarchy)n.root=r.hierarchy?r.hierarchy(t.hierarchy):null;else if(t.items)n.items=t.items.map(function(t){return{value:a(t),label:String(o(t))}});else if(t.extract){var s=Array.isArray(t.extract)?t.extract:[t.extract];n.items=[];var u=[];if(s.forEach(function(t){var i,a=t.source?e.dataset(t.source):r;a&&((i=n.items).push.apply(i,Eo(a.extract(t))),t.field&&u.push(a.field(t.field)))}),u.length&&(n.fields=u),t.amend&&Array.isArray(t.amend)){var c;(c=n.items).push.apply(c,Eo(t.amend))}}else if(void 0!==t.field&&r){var l=r.field(t.field);l&&(n.fields||(n.fields=[]),n.fields.push(l),"value"in t||(a=l.value||function(t){return t},o=l.label||function(t){return t},n.value=a),n.items=l.items().map(function(e){return{value:a(e),label:String(o(e)),source:{field:t.field}}}))}else t.fields&&t.fields.forEach(function(t){var i="object"===(void 0===t?"undefined":So(t))&&t.source?e.dataset(t.source):r;if(i){var a=void 0;(a="object"===(void 0===t?"undefined":So(t))&&void 0!==t.field?i.field(t.field):i.field(t))&&(n.fields||(n.fields=[]),n.fields.push(a))}});n.items&&t.map&&(n.items=n.items.map(t.map))}return t&&t.stack&&function(t,e,n){for(var i={},r=e.stackKey,a=e.value,o=e.startProp||"start",s=e.endProp||"end",u=e.offset||"none",c=e.order||"none",l=e.valueRef||"",h=0,f={},d=0;d<t.items.length;d++){var g=t.items[d],p=l?g[l]:null;if(p&&p.source){var v=(p.source.key||"")+"/"+p.source.field;f[v]||(f[v]=p.source)}var y=r(g);i[y]=i[y]||{items:[]},i[y].items.push(g),h=Math.max(h,i[y].items.length)}for(var m=Array.apply(null,{length:h}).map(Number.call,Number),x=Object.keys(i).map(function(t){return i[t].items}),b=ss().keys(m).value(function(t,e){return t[e]?a(t[e]):0}).order(Us[c]).offset(Hs[u])(x),w=[],k=0;k<b.length;k++)for(var _=b[k],M=0;M<_.length;M++){var S=_[M],R=_[M].data[_.key];R&&(R[o]={value:S[0]},R[s]={value:S[1]},w.push(S[0],S[1]))}var z=Object.keys(f).map(function(t){var e=n(f[t].key);return e?e.field(f[t].field):null}).filter(function(t){return!!t}),N=he({title:z.map(function(t){return t.title()}).join(", "),min:Math.min.apply(Math,w),max:Math.max.apply(Math,w),type:"measure",formatter:z[0]?z[0].formatter:void 0});t.fields.push(N)}(n,t.stack,e.dataset),n}function de(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fe;if(t.data){var r=i(t.data,e,n);if(r&&r.fields&&r.fields[0])return r.fields[0].formatter()}var a=void 0;if(a=t.formatter?t.formatter+"-"+(t.type||"number"):t.type||"d3-number",n.formatter.has(a)){return n.formatter.get(a)(t.format||"")}throw new Error("Formatter of type '"+a+"' was not found")}function ge(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,r);return r>=0?(a>=Zs?10:a>=Gs?5:a>=Js?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(a>=Zs?10:a>=Gs?5:a>=Js?2:1)}function pe(){}function ve(t,e){var n=new pe;if(t instanceof pe)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,r=-1,a=t.length;if(null==e)for(;++r<a;)n.set(r,t[r]);else for(;++r<a;)n.set(e(i=t[r],r,t),i)}else if(t)for(var o in t)n.set(o,t[o]);return n}function ye(){}function me(t){function e(e){var a=e+"",o=n.get(a);if(!o){if(r!==iu)return r;n.set(a,o=i.push(e))}return t[(o-1)%t.length]}var n=ve(),i=[],r=iu;return t=null==t?[]:nu.call(t),e.domain=function(t){if(!arguments.length)return i.slice();i=[],n=ve();for(var r,a,o=-1,s=t.length;++o<s;)n.has(a=(r=t[o])+"")||n.set(a,i.push(r));return e},e.range=function(n){return arguments.length?(t=nu.call(n),e):t.slice()},e.unknown=function(t){return arguments.length?(r=t,e):r},e.copy=function(){return me().domain(i).range(t).unknown(r)},e}function xe(){function t(){var t=r().length,i=o[1]<o[0],h=o[i-0],f=o[1-i];e=(f-h)/Math.max(1,t-u+2*c),s&&(e=Math.floor(e)),h+=(f-h-e*(t-u))*l,n=e*(1-u),s&&(h=Math.round(h),n=Math.round(n));var d=Xs(t).map(function(t){return h+e*t});return a(i?d.reverse():d)}var e,n,i=me().unknown(void 0),r=i.domain,a=i.range,o=[0,1],s=!1,u=0,c=0,l=.5;return delete i.unknown,i.domain=function(e){return arguments.length?(r(e),t()):r()},i.range=function(e){return arguments.length?(o=[+e[0],+e[1]],t()):o.slice()},i.rangeRound=function(e){return o=[+e[0],+e[1]],s=!0,t()},i.bandwidth=function(){return n},i.step=function(){return e},i.round=function(e){return arguments.length?(s=!!e,t()):s},i.padding=function(e){return arguments.length?(u=c=Math.max(0,Math.min(1,e)),t()):u},i.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),t()):u},i.paddingOuter=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),t()):c},i.align=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),t()):l},i.copy=function(){return xe().domain(r()).range(o).round(s).paddingInner(u).paddingOuter(c).align(l)},t()}function be(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function we(){}function ke(t){var e;return t=(t+"").trim().toLowerCase(),(e=uu.exec(t))?(e=parseInt(e[1],16),new ze(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=cu.exec(t))?_e(parseInt(e[1],16)):(e=lu.exec(t))?new ze(e[1],e[2],e[3],1):(e=hu.exec(t))?new ze(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=fu.exec(t))?Me(e[1],e[2],e[3],e[4]):(e=du.exec(t))?Me(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=gu.exec(t))?Ne(e[1],e[2]/100,e[3]/100,1):(e=pu.exec(t))?Ne(e[1],e[2]/100,e[3]/100,e[4]):vu.hasOwnProperty(t)?_e(vu[t]):"transparent"===t?new ze(NaN,NaN,NaN,0):null}function _e(t){return new ze(t>>16&255,t>>8&255,255&t,1)}function Me(t,e,n,i){return i<=0&&(t=e=n=NaN),new ze(t,e,n,i)}function Se(t){return t instanceof we||(t=ke(t)),t?(t=t.rgb(),new ze(t.r,t.g,t.b,t.opacity)):new ze}function Re(t,e,n,i){return 1===arguments.length?Se(t):new ze(t,e,n,null==i?1:i)}function ze(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Ne(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ce(t,e,n,i)}function Ce(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Oe(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Ae(t){if(t instanceof Te)return new Te(t.l,t.a,t.b,t.opacity);if(t instanceof Le){var e=t.h*yu;return new Te(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof ze||(t=Se(t));var n=Fe(t.r),i=Fe(t.g),r=Fe(t.b),a=Ee((.4124564*n+.3575761*i+.1804375*r)/xu),o=Ee((.2126729*n+.7151522*i+.072175*r)/bu);return new Te(116*o-16,500*(a-o),200*(o-Ee((.0193339*n+.119192*i+.9503041*r)/wu)),t.opacity)}function Te(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function Ee(t){return t>Su?Math.pow(t,1/3):t/Mu+ku}function je(t){return t>_u?t*t*t:Mu*(t-ku)}function Pe(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Fe(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Le(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function De(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Be)return new Be(t.h,t.s,t.l,t.opacity);t instanceof ze||(t=Se(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(Au*i+Cu*e-Ou*n)/(Au+Cu-Ou),a=i-r,o=(Nu*(n-r)-Ru*a)/zu,s=Math.sqrt(o*o+a*a)/(Nu*r*(1-r)),u=s?Math.atan2(o,a)*mu-120:NaN;return new Be(u<0?u+360:u,s,r,t.opacity)}(t):new Be(t,e,n,null==i?1:i)}function Be(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function We(t,e){return function(n){return t+n*e}}function $e(t){return 1==(t=+t)?Ie:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):Tu(isNaN(e)?n:e)}}function Ie(t,e){var n=e-t;return n?We(t,n):Tu(isNaN(t)?e:t)}function Ve(t){return function e(n){function i(e,i){var r=t((e=De(e)).h,(i=De(i)).h),a=Ie(e.s,i.s),o=Ie(e.l,i.l),s=Ie(e.opacity,i.opacity);return function(t){return e.h=r(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,i.gamma=e,i}(1)}function He(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:$u(e)}function Ue(t,e,n,i){var r=t[0],a=t[1],o=e[0],s=e[1];return a<r?(r=n(a,r),o=i(s,o)):(r=n(r,a),o=i(o,s)),function(t){return o(r(t))}}function qe(t,e,n,i){var r=Math.min(t.length,e.length)-1,a=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)a[s]=n(t[s],t[s+1]),o[s]=i(e[s],e[s+1]);return function(e){var n=Ys(t,e,1,r)-1;return o[n](a[n](e))}}function Ye(){var t=function(t,e){function n(){return r=Math.min(s.length,u.length)>2?qe:Ue,a=o=null,i}function i(e){return(a||(a=r(s,u,l?function(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:i(t)}}}(t):t,c)))(+e)}var r,a,o,s=Vu,u=Vu,c=Du,l=!1;return i.invert=function(t){return(o||(o=r(u,s,He,l?function(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:i(t)}}}(e):e)))(+t)},i.domain=function(t){return arguments.length?(s=eu.call(t,Iu),n()):s.slice()},i.range=function(t){return arguments.length?(u=nu.call(t),n()):u.slice()},i.rangeRound=function(t){return u=nu.call(t),c=Bu,n()},i.clamp=function(t){return arguments.length?(l=!!t,n()):l},i.interpolate=function(t){return arguments.length?(c=t,n()):c},n()}(He,ju);return t.copy=function(){return function(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}(t,Ye())},function(t){var e=t.domain;return t.ticks=function(t){var n=e();return Qs(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return Hu(e(),t,n)},t.nice=function(n){null==n&&(n=10);var i,r=e(),a=0,o=r.length-1,s=r[a],u=r[o];return u<s&&(i=s,s=u,u=i,i=a,a=o,o=i),(i=ge(s,u,n))>0?i=ge(s=Math.floor(s/i)*i,u=Math.ceil(u/i)*i,n):i<0&&(i=ge(s=Math.ceil(s*i)/i,u=Math.floor(u*i)/i,n)),i>0?(r[a]=Math.floor(s/i)*i,r[o]=Math.ceil(u/i)*i,e(r)):i<0&&(r[a]=Math.ceil(s*i)/i,r[o]=Math.floor(u*i)/i,e(r)),t},t}(t)}function Xe(){function t(t){if(t<=t)return n[Ys(e,t,0,i)]}var e=[.5],n=[0,1],i=1;return t.domain=function(r){return arguments.length?(e=nu.call(r),i=Math.min(e.length,n.length-1),t):e.slice()},t.range=function(r){return arguments.length?(n=nu.call(r),i=Math.min(e.length,n.length-1),t):n.slice()},t.invertExtent=function(t){var i=n.indexOf(t);return[e[i-1],e[i]]},t.copy=function(){return Xe().domain(e).range(n)},t}function Ze(t){return void 0===t?function(t){return t}:function(e){return t(e)}}function Ge(t){return Math.max(0,Math.min(1,t))}function Je(t){return"object"===(void 0===t?"undefined":So(t))}function Qe(t,e,n){for(var i=Math.abs(e-n)/(t+1),r=[],a=1;a<=t;a++){var o=a*i;r.push(e<n?e+o:e-o)}return r}function Ke(t,e,n){if(1===t.length)return t;for(var i=t.concat([]),r=0;r<t.length;r++){var a=t[r],o=t[r+1];0===r&&a!==n.start()?(i.push.apply(i,Eo(Qe(e,a,o))),a-=o-a,o=t[r],i.push.apply(i,Eo(Qe(e,a,o)))):r===t.length-1&&o!==n.end()?(o=a+(a-t[r-1]),i.push.apply(i,Eo(Qe(e,a,o)))):i.push.apply(i,Eo(Qe(e,a,o)))}return i.filter(function(t){return t>=n.min()&&t<=n.max()})}function tn(t){var e=t.distance,n=t.scale,i=t.minorCount,a=void 0===i?0:i,o=t.unitDivider,s=void 0===o?100:o,u=t.formatter,c=void 0===u?void 0:u,l=r(s)||r(e)?2:Math.max(e/s,2),h=Math.min(1e3,Math.round(l)),f=n.ticks(h);f.length<=1&&(f=n.ticks(h+1));var d=a>0?Ke(f,a,n):f;d.sort(function(t,e){return t-e});var g=d.map(Ze(c));return d.map(function(t,e){var i=n(t);return{position:i,start:i,end:i,label:g[e],value:t,isMinor:-1===f.indexOf(t)}})}function en(t){var e=t.distance,n=t.scale,i=t.minorCount,a=void 0===i?0:i,o=t.unitDivider,s=void 0===o?100:o,u=t.formatter,c=void 0===u?void 0:u,l=r(s)||r(e)?2:Math.max(e/s,2),h=Math.min(1e3,Math.round(l)),f=h>10?10:h;n.nice(f);var d=n.ticks(h),g=a>0?Ke(d,a,n):d;g.sort(function(t,e){return t-e});var p=g.map(Ze(c));return g.map(function(t,e){var i=n(t);return{position:i,start:i,end:i,label:p[e],value:t,isMinor:-1===d.indexOf(t)}})}function nn(t){var e=t.settings,n=t.scale,i=t.distance,a=t.formatter,o=void 0,s=e.minorTicks&&!r(e.minorTicks.count)?Math.min(100,e.minorTicks.count):0;if(Array.isArray(e.ticks.values)){o=function(t){var e=t.values,n=t.scale,i=t.formatter,r=void 0===i?function(t){return t}:i;return e.sort(function(t,e){return(Je(t)?t.value:t)-(Je(e)?e.value:e)}).filter(function(t,e,i){var r=Je(t)?t.value:t;return r<=n.max()&&r>=n.min()&&i.indexOf(t)===e}).map(function(t){var e=Je(t)?t.value:t,i=n(e);return{position:i,value:e,label:Je(t)&&void 0!==t.label?t.label:r(e),isMinor:!1,start:Je(t)&&!isNaN(t.start)?Ge(n(t.start)):i,end:Je(t)&&!isNaN(t.end)?Ge(n(t.end)):i}})}({values:e.ticks.values.filter(function(t){return"object"===(void 0===t?"undefined":So(t))?!r(t.value):!r(t)}),scale:n.copy(),formatter:a})}else if(r(e.ticks.count)){o=(e.ticks.tight?en:tn)({distance:i,minorCount:s,unitDivider:e.ticks.distance,scale:n,formatter:a}),e.ticks.forceBounds&&function(t,e,n){var i=t.map(function(t){return t.position}),r=e.range();-1===i.indexOf(r[0])?t.splice(0,0,{position:r[0],start:r[0],end:r[0],label:n(e.start()),isMinor:!1,value:e.start()}):t[0]&&t[0].isMinor&&(t[0].isMinor=!1);var a=t[t.length-1];-1===i.indexOf(r[1])?t.push({position:r[1],start:r[1],end:r[1],label:n(e.end()),isMinor:!1,value:e.end()}):a&&a.isMinor&&(a.isMinor=!1)}(o,n,a)}else{o=function(t){var e=t.count,n=t.minorCount,i=t.scale,r=t.formatter;return i.ticks((e-1)*n+e).map(function(t,e){var a=i(t);return{position:a,start:a,end:a,label:r(t),isMinor:e%(n+1)!=0,value:t}})}({count:Math.min(1e3,e.ticks.count),minorCount:s,scale:n.copy(),formatter:a})}return o}function rn(t,e){t.instance||(t.instance=e.copy(),t.instance.domain([e.start(),e.end()]),t.instance.clamp(!0),t.instance.range(t.invert?[1,0]:[0,1]))}function an(t,e){function n(t){return r(t)?NaN:i(t)}var i=Ye(),a={instance:null,invert:!1},o=void 0;if(n.data=function(){return e},n.invert=function(t){return i.invert(t)},n.rangeRound=function(t){return i.rangeRound(t),n},n.clamp=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return i.clamp(t),n},n.cachedTicks=function(){return o},n.clearTicksCache=function(){return o=void 0,this},n.ticks=function(e){return null!==e&&"object"===(void 0===e?"undefined":So(e))?(e.settings=e.settings||{},e.settings=ko(!0,{ticks:{tight:!1,forceBounds:!1,distance:100},minorTicks:{count:3}},t,e.settings),e.scale=n,o=nn(e)):o=i.ticks(e)},n.nice=function(t){return i.nice(t),n},n.tickFormat=function(t,e){return i.tickFormat(t,e)},n.interpolate=function(t){return i.interpolate(t),n},n.domain=function(t){return arguments.length?(i.domain(t),a.instance&&a.instance.domain([n.start(),n.end()]),n):i.domain()},n.range=function(t){return arguments.length?(i.range(t),n):i.range()},n.start=function(){return n.domain()[0]},n.end=function(){return n.domain()[this.domain().length-1]},n.min=function(){return Math.min(this.start(),this.end())},n.max=function(){return Math.max(this.start(),this.end())},n.classify=function(t){for(var e=(n.start()-n.end())/t,i=[n.end()],r=[],a=e/2,o=0;o<t;o++){var s=i[i.length-1]||0,u=s+e,c=n(s+a);i.push.apply(i,[u,u]),r.push.apply(r,[c,c])}return i.pop(),n.domain(i),n.range(r),n},n.copy=function(){var r=an(t,e);return r.domain(n.domain()),r.range(n.range()),r.clamp(i.clamp()),r},n.norm=function(t){return rn(a,n),a.instance(t)},n.normInvert=function(t){return rn(a,n),a.instance.invert(t)},t){var s=function(t,e){var n={};return qu.forEach(function(i){n[i]=function(t,e,n){return"function"==typeof t[n]?t[n](e):t[n]}(t,e,i)}),n}(t,e?e.fields:[]),u=function(t,e){var n=+t.min,i=+t.max,r=0,a=1;if(e&&e[0]){var o=e.map(function(t){return t.min()}).filter(function(t){return!isNaN(t)}),s=e.map(function(t){return t.max()}).filter(function(t){return!isNaN(t)});if(r=o.length?Math.min.apply(Math,Eo(o)):Number.NaN,a=s.length?Math.max.apply(Math,Eo(s)):Number.NaN,isNaN(r)||isNaN(a))r=-1,a=1;else if(r===a&&0===r)r=-1,a=1;else if(r===a&&r)r-=Math.abs(.1*r),a+=Math.abs(.1*a);else if(!isNaN(t.expand)){var u=a-r;r-=u*t.expand,a+=u*t.expand}if(Array.isArray(t.include)){var c=t.include.filter(function(t){return!isNaN(t)});r=Math.min.apply(Math,Eo(c).concat([r])),a=Math.max.apply(Math,Eo(c).concat([a]))}}return{mini:isNaN(n)?r:n,maxi:isNaN(i)?a:i}}(s,e?e.fields:[]),c=u.mini,l=u.maxi;n.domain([c,l]),n.range(s.invert?[1,0]:[0,1]),a.invert=s.invert}return n}function on(){function t(t,e){t.data=function(){return n},t.datum=function(t){return o[s[t]]},t.start=function(){return t.domain()[0]},t.end=function(){return t.domain()[t.domain().length-1]},t.labels=function(){return c},t.ticks=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.scale=t,function(t){var e=t.scale,n=e.domain(),i=e.data().items,r=e.labels?e.labels():n,a=e.bandwidth();return n.map(function(t,n){var o=e(t);return{position:o+a/2,label:""+r[n],data:i?i[n]:void 0,start:o,end:o+a}})}(n,e.trackBy)}}for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=xe(),r="function"==typeof e.value?e.value:function(t){return t.value},a="function"==typeof e.label?e.label:function(t){return t.label},o=n.items||[],s={},u=[],c=[],l=0;l<o.length;l++){var h=r(o[l]);-1===u.indexOf(h)&&(u.push(h),c.push(a(o[l])))}t(i,e);var f=function(t,e){var n={};return Yu.forEach(function(i){n[i]=function(t,e,n){return"function"==typeof t[n]?t[n](e):t[n]}(t,e,i)}),n}(e||{},n.fields);return i.pxScale=function(n){var r=f.maxPxStep;if(isNaN(r))return i;var a=i.domain().length,o=Math.max(1,a-i.paddingInner()+2*i.paddingOuter());if(o*r>=n)return i;var s=i.copy();s.type=i.type,t(s,e);var u=o*r/n,c=(1-u)*i.align();return s.range(f.invert?[u+c,c]:[c,u+c]),s},i.domain(u),i.range(f.invert?[1,0]:[0,1]),i.padding(isNaN(f.padding)?0:f.padding),isNaN(f.paddingInner)||i.paddingInner(f.paddingInner),isNaN(f.paddingOuter)||i.paddingOuter(f.paddingOuter),i.align(isNaN(f.align)?.5:f.align),i}function sn(t,e){return t.ancestors().map(function(t){return e(t.data)}).reverse().slice(1).toString()}function un(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=on(t),i=function(t,e){var n="object"===So(e.ticks)?e.ticks.depth:null,i="function"==typeof e.value?e.value:function(t){return t.value},r="function"==typeof e.label?e.label:i,a=[],o=[],s={},u=[],c=0;if(!t)return{values:a,labels:o,items:s,ticks:u};t.eachAfter(function(t){if(t.depth>0){var e=sn(t,i),l=t.leaves()||[t],h=i(t.data),f=r(t.data),d=Array.isArray(t.children),g={key:e,count:l.length,value:h,label:f,leftEdge:sn(l[0],i),rightEdge:sn(l[Math.max(l.length-1,0)],i),node:t};d?(a.push("SPACER_"+c+"_SPACER"),c++):(a.push(e),o.push(f)),(null===n&&!d||t.depth===n)&&u.push(g),s[e]=g}});var l=t.height-1;return l>0&&a.splice(-l),{values:a,labels:o,items:s,ticks:u}}(e.root,t),r=i.values,a=i.labels,o=i.items,s=i.ticks,u=function(e){var i=String(e),r=o[i];return n(r?t.invert?r.rightEdge:r.leftEdge:i)};ko(!0,u,n),u.bandwidth=function(t){var e=o[String(t)],i=n.bandwidth();if(e&&!e.isLeaf){var r=u(e.leftEdge),a=u(e.rightEdge);return Math.abs(r-a)+i}return i},u.step=function(t){var e=o[String(t)],i=e?e.count:1,r=n.step();return r*=i},u.data=function(){return e},u.datum=function(t){var e=o[String(t)];return e?e.node.data:null},u.copy=function(){return un(t,e)},u.labels=function(){return a},u.ticks=function(){return s.map(function(t){var e=u(t.key),n=u.bandwidth(t.key);return{position:e+n/2,label:t.label,data:t.node.data,start:e,end:e+n}})};var c=n.pxScale;return u.pxScale=function(t){return n=c(t),u},u.domain(r),u}function cn(t,e){var n=t&&void 0!==t.min,r=t&&void 0!==t.max,a=n?+t.min:0,o=r?+t.max:1;if(e&&e.length){if(!n){var s=e.map(Xu).filter(i);a=s.length?Math.min.apply(Math,Eo(s)):a}if(!r){var u=e.map(Zu).filter(i);o=u.length?Math.max.apply(Math,Eo(u)):o}}return[a,o]}function ln(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).theme,i=an(t,e).clamp(!0).interpolate(Eu),r=i;ko(!0,r,i);var a=cn(t,e?e.fields:[]),o=To(a,2),s=o[0],u=o[1],c=t.domain?t.domain.length:-1,l=n?n.palette("sequential",c>0?c:2):[],h="function"==typeof t.range?t.range(e,{theme:n}):t.range||l;return r.range(t.invert?h.slice().reverse():h.slice()),r.domain(t.domain||function(t,e,n){var i=t.length;if(2===i)return[e,n];var r=[],a=(n-e)/(i-1);r.push(e);for(var o=1;o<i-1;o++)r.push(e+a*o);return r.push(n),r}(r.range(),s,u)),r}function hn(t,e,n){var i=t.data;t.source&&(n.logger.warn("Deprecated: Scale data source configuration"),i={extract:[]},(Array.isArray(t.source)?t.source:[t.source]).forEach(function(t){i.extract.push({field:t})}));var r=fe(i,e,n),a=t.type||function(t){return t.root?"h-band":t.fields&&t.fields[0]?function(t){return-1!==t.map(function(t){return"dimension"===t.type()?"band":"linear"}).indexOf("linear")?"linear":"band"}(t.fields):"linear"}(r),o=void 0;return"color"===a&&(a=r.fields&&r.fields[0]&&"dimension"===r.fields[0].type()?"categorical-color":"sequential-color"),n.scale.has(a)&&((o=(o=n.scale.get(a))(t,r,n)).type=a),o}function fn(){fn.init.call(this)}function dn(){var t=0,e=0,n=0,i=0;n=n||t;var r={move:function(t){this.moveTo(n+t)},moveTo:function(a){var o=Math.max(t,Math.min(e-i,a));n!==o&&(n=o,r.emit("update"))},update:function(a){var o=!1,s=a.min;t=void 0===s?t:s;var u=a.max;e=void 0===u?e:u,void 0!==a.viewSize&&a.viewSize!==i&&(i=a.viewSize,o=!0);var c=Math.max(t,Math.min(e-i,n));n!==c&&(n=c,o=!0),o&&r.emit("update")},getState:function(){return{min:t,max:e,start:n,viewSize:i}}};return Ku.mixin(r),r}function gn(t,e){var n=t.min||0,i=t.max||0,r=t.viewSize||0,a=e||dn();return a.update({min:n,max:i,viewSize:r}),a}function pn(t,e,n){for(var i=0;i<t.length&&e>t[i];)++i;return t[i]===e&&n&&++i,i}function vn(){function t(){}var e=[];return t.add=function(t){var n,i=t.min,r=t.max,a=pn(e,i),o=pn(e,r,!0),s=[a,o-a];a%2==0&&s.push(i),o%2==0&&s.push(r);var u=e.join(",");(n=e).splice.apply(n,s);return u!==e.join(",")},t.remove=function(t){var n,i=t.min,r=t.max,a=pn(e,i),o=pn(e,r,!0),s=[a,o-a];a%2==1&&s.push(i),o%2==1&&s.push(r);var u=e.join(",");(n=e).splice.apply(n,s);return u!==e.join(",")},t.set=function(n){var i=e.join(",");e=[],Array.isArray(n)?n.forEach(t.add):t.add(n);return i!==e.join(",")},t.clear=function(){var t=e.length>0;return e=[],t},t.containsValue=function(t){return function(t,e){for(var n=t.length,i=1;i<n;i+=2)if(t[i-1]<=e&&e<=t[i])return!0;return!1}(e,t)},t.containsRange=function(t){var n=t.min,i=t.max,r=pn(e,n,!0),a=pn(e,i);return r===a&&a%2==1},t.toggle=function(e){return t.containsRange(e)?t.remove(e):t.add(e)},t.ranges=function(){for(var t=[],n=1;n<e.length;n+=2)t.push({min:e[n-1],max:e[n]});return t},t}function yn(){function t(){}var e=[];return t.add=function(t){return-1===e.indexOf(t)&&(e.push(t),!0)},t.remove=function(t){var n=e.indexOf(t);return-1!==n&&(e.splice(n,1),!0)},t.contains=function(t){return-1!==e.indexOf(t)},t.values=function(){return e.slice()},t.clear=function(){return e=[]},t}function mn(t){for(var e=t.items,n=t.values,i=t.vc,r={},a=[],o=void 0,s=void 0,u=0,c=e.length;u<c;u++)o=e[u].key,s=e[u].value,n[o]||(n[o]=i()),n[o].add(s)&&(r[o]=r[o]||[],r[o].push(s));for(var l=Object.keys(r),h=0,f=l.length;h<f;h++)o=l[h],a.push({id:o,values:r[o]});return a}function xn(t){for(var e=t.items,n=t.values,i={},r=[],a=void 0,o=void 0,s=0,u=e.length;s<u;s++)a=e[s].key,o=e[s].value,n[a]&&n[a].remove(o)&&(i[a]=i[a]||[],i[a].push(o));for(var c=Object.keys(i),l=0,h=c.length;l<h;l++)a=c[l],r.push({id:a,values:i[a]});return r}function bn(t){for(var e={},n=void 0,i=void 0,r=0,a=t.length;r<a;r++){n=t[r].key,i=t[r].value,e[n]||(e[n]=[]);-1===e[n].indexOf(i)&&e[n].push(i)}return e}function wn(t){var e=t.key,n=t.collection,i=t.obj,r=t.fn,a=t.value;n[e]||(n[e]=r()),i[e]=i[e]||[],i[e].push(a),n[e].add(a)}function kn(t,e){for(var n=[],i=Object.keys(t),r=void 0,a=void 0,o=function(t){return-1===e[r].indexOf(t)},s=0,u=i.length;s<u;s++)r=i[s],e[r]?(a=t[r].filter(o)).length&&n.push({id:r,values:a}):n.push({id:r,values:t[r]});return n}function _n(t,e,n){var i=function(t,e){if(!Object.keys(e).length)return t;for(var n=t.length,i=Array(n),r=0;r<n;r++)i[r]=t[r].key in e?ko({},t[r],{key:e[t[r].key]}):t[r];return i}(e,n);return t&&t.length?t.reduce(function(t,e){return e(t)},i):i}function Mn(t){return t.replace(/(-[a-z])/g,function(t){return t.toUpperCase().replace("-","")})}function Sn(t,e,n){var i=n.ranges,r=n.interceptors,a=n.rc,o=n.aliases,s=!1;return _n(r[e+"Ranges"],t,o).forEach(function(t){var n=t.key;i[n]||(i[n]=a()),s=i[n][e](t.range)||s}),s}function Rn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.vc,n=void 0===e?yn:e,i=t.rc,r=void 0===i?vn:i,a=!1,o={},s={},u={},c={addValues:[],removeValues:[],toggleValues:[],setValues:[],addRanges:[],setRanges:[],removeRanges:[],toggleRanges:[]},l={};return l.start=function(){a||(a=!0,l.emit("start"))},l.end=function(){a&&(a=!1,o={},s={},l.emit("end"))},l.isActive=function(){return a},l.clear=function(){var t=l.brushes().filter(function(t){return"value"===t.type&&t.brush.values().length}).map(function(t){return{id:t.id,values:t.brush.values()}}),e=Object.keys(o).length>0||t.length;o={},s={},e&&l.emit("update",[],t)},l.brushes=function(){var t=[];return t=t.concat(Object.keys(o).map(function(t){return{type:"range",id:t,brush:o[t]}})),t=t.concat(Object.keys(s).map(function(t){return{type:"value",id:t,brush:s[t]}}))},l.addValue=function(t,e){l.addValues([{key:t,value:e}])},l.addValues=function(t){var e=_n(c.addValues,t,u),i=mn({vc:n,values:s,items:e});l.emit("add-values",e),i.length&&(a||(a=!0,l.emit("start")),l.emit("update",i,[]))},l.setValues=function(t){var e=_n(c.setValues,t,u),i=function(t){for(var e=t.items,n=t.vCollection,i=t.vc,r={},a=bn(e),o=[],s=[],u=void 0,c={},l=Object.keys(n),h=0,f=l.length;h<f;h++)c[u=l[h]]=n[u].values().slice(),delete n[u];for(var d=function(t){n[u]&&n[u].contains(t)||wn({key:u,value:t,collection:n,obj:r,fn:i})},g=Object.keys(a),p=0,v=g.length;p<v;p++)a[u=g[p]].forEach(d);return s=kn(c,r),o=kn(r,c),[o,s]}({items:e,vCollection:s,vc:n});l.emit("set-values",e),(i[0].length>0||i[1].length>0)&&(a||(a=!0,l.emit("start")),l.emit("update",i[0],i[1]))},l.removeValue=function(t,e){l.removeValues([{key:t,value:e}])},l.removeValues=function(t){var e=_n(c.removeValues,t,u),n=xn({values:s,items:e});l.emit("remove-values",e),n.length&&l.emit("update",[],n)},l.addAndRemoveValues=function(t,e){var i=_n(c.addValues,t,u),r=_n(c.removeValues,e,u),o=mn({vc:n,values:s,items:i}),h=xn({values:s,items:r});l.emit("add-values",i),l.emit("remove-values",r),(o.length||h.length)&&(a||(a=!0,l.emit("start")),l.emit("update",o,h))},l.toggleValue=function(t,e){l.toggleValues([{key:t,value:e}])},l.toggleValues=function(t){var e=_n(c.toggleValues,t,u),i=function(t){for(var e=t.items,n=t.values,i=t.vc,r={},a={},o=[],s=[],u=bn(e),c=void 0,l=void 0,h=void 0,f=Object.keys(u),d=0,g=f.length;d<g;d++)for(var p=0,v=(h=u[c=f[d]]).length;p<v;p++)l=h[p],n[c]&&n[c].contains(l)?n[c]&&n[c].contains(l)&&(a[c]=a[c]||[],a[c].push(l),n[c].remove(l)):wn({key:c,value:l,collection:n,obj:r,fn:i});for(var y=Object.keys(r),m=0,x=y.length;m<x;m++)c=y[m],o.push({id:c,values:r[c]});for(var b=Object.keys(a),w=0,k=b.length;w<k;w++)c=b[w],s.push({id:c,values:a[c]});return[o,s]}({items:e,values:s,vc:n});l.emit("toggle-values",e),(i[0].length>0||i[1].length>0)&&(a||(a=!0,l.emit("start")),l.emit("update",i[0],i[1]))},l.containsValue=function(t,e){var n=u[t]||t;return!!s[n]&&s[n].contains(e)},l.addRange=function(t,e){l.addRanges([{key:t,range:e}])},l.addRanges=function(t){Sn(t,"add",{ranges:o,rc:r,interceptors:c,aliases:u})&&(a||(a=!0,l.emit("start")),l.emit("update",[],[]))},l.removeRange=function(t,e){l.removeRanges([{key:t,range:e}])},l.removeRanges=function(t){Sn(t,"remove",{ranges:o,rc:r,interceptors:c,aliases:u})&&(a||(a=!0,l.emit("start")),l.emit("update",[],[]))},l.setRange=function(t,e){l.setRanges([{key:t,range:e}])},l.setRanges=function(t){Sn(t,"set",{ranges:o,rc:r,interceptors:c,aliases:u})&&(a||(a=!0,l.emit("start")),l.emit("update",[],[]))},l.toggleRange=function(t,e){l.toggleRanges([{key:t,range:e}])},l.toggleRanges=function(t){Sn(t,"toggle",{ranges:o,rc:r,interceptors:c,aliases:u})&&(a||(a=!0,l.emit("start")),l.emit("update",[],[]))},l.containsRangeValue=function(t,e){var n=u[t]||t;return!!o[n]&&o[n].containsValue(e)},l.containsRange=function(t,e){var n=u[t]||t;return!!o[n]&&o[n].containsRange(e)},l.containsMappedData=function(t,e,n){for(var i=[],r=Object.keys(t),a=void 0,c=void 0,l=void 0,h=void 0,f=0,d=r.length;f<d;f++){if("value"===(a=r[f]))c=t,i[f]={key:"",i:f,bool:!1};else{if("source"===a)continue;c=t[a],i[f]={key:a,i:f,bool:!1}}void 0!==(l=c.source&&c.source.field)&&(void 0!==c.source.key&&(l=c.source.key+"/"+l),l in u&&(l=u[l]),h=c.value,o[l]?i[f].bool=Array.isArray(h)?o[l].containsRange({min:h[0],max:h[1]}):o[l].containsValue(h):s[l]&&s[l].contains(h)&&(i[f].bool=!0))}return e?(i=i.filter(function(t){return-1!==e.indexOf(t.key)}),"and"===n?!!i.length&&!i.some(function(t){return!1===t.bool}):"xor"===n?!!i.length&&i.some(function(t){return t.bool})&&i.some(function(t){return!1===t.bool}):i.some(function(t){return t.bool})):i.some(function(t){return t.bool})},l.intercept=function(t,e){var n=Mn(t);c[n]&&c[n].push(e)},l.removeInterceptor=function(t,e){var n=Mn(t);if(c[n]){var i=c[n].indexOf(e);-1!==i&&c[n].splice(i,1)}},l.removeAllInterceptors=function(t){var e=[];if(t){var n=Mn(t);c[n]&&c[n].length&&e.push({name:t,handlers:c[n]})}else Object.keys(c).forEach(function(t){c[t].length&&e.push({name:function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}(t),handlers:c[t]})});e.forEach(function(t){t.handlers.slice().forEach(function(e){return l.removeInterceptor(t.name,e)})})},l.addKeyAlias=function(t,e){u[t]=e},l.removeKeyAlias=function(t){delete u[t]},Ku.mixin(l),l}function zn(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function Nn(t){var e=void 0===t?"undefined":So(t);return"object"!==e&&"function"!==e&&"undefined"!==e}function Cn(t,e,n){var i=t[e];i&&i.scale&&i.scale.pxScale?i.scale=i.scale.pxScale(n):i&&i.pxScale&&(t[e]=i.pxScale(n))}function On(t,e){return t.pxScale?t.pxScale(e):t}function An(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(t,e){return Array.isArray(e.children)?t.concat(An(e.children)):(t.push(e),t)},[])}function Tn(t){for(var e=t.nodes,n=t.action,i=t.chart,r=t.trigger,a=[],o=0;o<e.length;o++){var s=e[o].data;null!==s&&a.push(s)}!function(t){var e=t.dataPoints,n=t.action,i=t.chart,r=t.trigger;if(r){var a=r.data||[""],o={items:[],actionFn:"toggleRanges"},s={items:[],actionFn:"toggleValues"};-1!==["add","remove","set","toggle"].indexOf(n)&&(o.actionFn=n+"Ranges",s.actionFn=n+"Values");for(var u=function(t){var n=e[t];if(!n)return"continue";a.forEach(function(t){var e=n&&!t?n:n[t];if(e){var i={key:e.source.field};void 0!==e.source.key&&(i.key=e.source.key+"/"+e.source.field),Array.isArray(e.value)?(i.range={min:e.value[0],max:e.value[1]},o.items.push(i)):(i.value=e.value,s.items.push(i))}})},c=0;c<e.length;c++)u(c);r.contexts.forEach(function(t){o.items.length?i.brush(t)[o.actionFn](o.items):i.brush(t)[s.actionFn](s.items)})}}({dataPoints:a,action:n,chart:i,trigger:r})}function En(t){var e=t.collisions,n=t.t,i=t.config,r=t.action,a=[],o=!1;e.length>0&&(a=e,o=!0,"stop"===n.propagation&&(a=[e[e.length-1]]));return Tn({nodes:a.map(function(t){return t.node}),action:r,chart:i.chart,data:i.data,trigger:n}),o}function jn(t,e,n){var i=n.element().getBoundingClientRect(),r=x(t)?function(t,e){return 1!==t.changedTouches.length?null:{x:t.changedTouches[0].clientX-e.left,y:t.changedTouches[0].clientY-e.top}}(t,i):function(t,e){return{x:t.clientX-e.left,y:t.clientY-e.top}}(t,i);return null===r||r.x<0||r.y<0||r.x>i.width||r.y>i.height?[]:(e.touchRadius>0&&x(t)&&(r={cx:r.x,cy:r.y,r:e.touchRadius}),n.itemsAt(r))}function Pn(t,e,n){return t?"function"==typeof t?t(e):t:n}function Fn(t,e,n){var i=e.require,r=void 0===i?[]:i,a=e.mediator||{},o=n.settings,s=n.formatter,u=n.scale,c=n.data,l=n.renderer,h=n.chart,f=n.dockConfig,d=n.mediator,g=n.instance,p=n.style,v=n.registries,y=n.resolver,m=n.update;Object.defineProperty(t,"settings",{get:o}),Object.defineProperty(t,"data",{get:c}),Object.defineProperty(t,"formatter",{get:s}),Object.defineProperty(t,"scale",{get:u}),Object.defineProperty(t,"mediator",{get:d}),Object.defineProperty(t,"style",{get:p}),Object.defineProperty(t,"registries",{get:v}),Object.keys(e).forEach(function(n){uc(n)||("function"==typeof e[n]?t[n]=e[n].bind(t):t[n]=e[n])}),r.forEach(function(e){"renderer"===e?Object.defineProperty(t,"renderer",{get:l}):"chart"===e?Object.defineProperty(t,"chart",{get:h}):"dockConfig"===e?Object.defineProperty(t,"dockConfig",{get:f}):"instance"===e?Object.defineProperty(t,"instance",{get:g}):"update"===e&&m?Object.defineProperty(t,"update",{get:m}):"resolver"===e&&Object.defineProperty(t,"resolver",{get:y})}),Object.keys(a).forEach(function(e){t.mediator.on(e,a[e].bind(t))})}function Ln(t,e){return t.displayOrder=e.displayOrder,t.dock=e.dock,t.prioOrder=e.prioOrder,t.minimumLayoutMode=e.minimumLayoutMode,t.show=e.show,t}function Dn(t,e,n){Object.keys(n.on||{}).forEach(function(i){t.eventListeners=t.eventListeners||[];var r=n.on[i].bind(t);t.eventListeners.push({event:i,listener:r}),e.on(i,r)}),t.emit=function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return e.emit.apply(e,[t].concat(i))}}function Bn(t){function e(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(){for(var i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];var o="function"==typeof t[e],s="function"==typeof h[e],u=void 0;if(o){var c;u=(c=t[e]).call.apply(c,[S].concat(r))}if("function"==typeof h[e]){var l;u=(l=h[e]).call.apply(l,[R].concat(r))}return o||s||(u=n.call.apply(n,[S].concat(r))),M.forEach(function(t){if(t[e]){var n;(n=t[e]).call.apply(n,[R].concat(r))}}),u}}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.defaultSettings,r=void 0===i?{}:i,a=n.chart,o=n.container,s=n.mediator,u=n.registries,c=n.theme,l=n.renderer,h=n.settings||{},f=Ku.mixin({}),d=ko(!0,{},r,h),g=[],p=void 0,v=void 0,y=void 0,m=void 0,x=void 0,b=sc({chart:a}),w={nodes:[],chart:a,config:d.brush||{},renderer:null},k={tap:[],over:[]},_=[],M=function(t){return ec.concat(tc.get(t)||[])}(d.type),S={},R=ko({},h,M.filter(function(t){return!uc(t)})),z=e("preferredSize",function(){return 0}),N=e("resize",function(t){return t.inner}),C=e("created"),O=e("beforeMount"),A=e("mounted"),T=e("beforeUpdate"),E=e("updated"),j=e("beforeRender"),P=e("beforeDestroy"),F=e("destroyed"),L=t.render,D=function(){d.brush&&(d.brush.consume||[]).forEach(function(t){t.context&&t.style&&_.push(function(t,e){var n=e.context,i=e.data,r=e.style,a=t.chart.brush(n),o=i,s=r.active||{},u=r.inactive||{},c=[];Object.keys(s).forEach(function(t){c.push(t)}),Object.keys(u).forEach(function(t){-1===c.indexOf(t)&&c.push(t)});var l=[],h=!1,f=function(){for(var e=An(t.nodes),n=e.length,i=void 0,r=!1,f=function(t){if(!(i=e[t].data))return"continue";e[t].__style||(e[t].__style={},c.forEach(function(n){e[t].__style[n]=e[t][n]}));var n=a.containsMappedData(i,o),f=l.indexOf(e[t]),d=!1;n&&-1===f?(l.push(e[t]),d=!0):n||-1===f||(l.splice(f,1),d=!0),(d||h)&&(c.forEach(function(i){n&&i in s?e[t][i]=s[i]:!n&&i in u?e[t][i]=u[i]:(e[t].__style||(e[t].__style=e[t].__style||{},c.forEach(function(n){e[t].__style[n]=e[t][n]})),e[t][i]=e[t].__style[i])}),r=!0)},d=0;d<n;d++)f(d);return h=!1,r},d=function(){for(var e=An(t.nodes),n=e.length,i=function(t){e[t].__style=e[t].__style||{},c.forEach(function(n){e[t].__style[n]=e[t][n]})},r=0;r<n;r++)i(r);h=!0,l.length=0,t.renderer.render(t.nodes)},g=function(){for(var e=An(t.nodes),n=e.length,i=function(t){e[t].__style&&(Object.keys(e[t].__style).forEach(function(n){e[t][n]=e[t].__style[n]}),e[t].__style=void 0)},r=0;r<n;r++)i(r);l.length=0,t.renderer.render(t.nodes)},p=function(){f()&&t.renderer.render(t.nodes)};return a.on("start",d),a.on("end",g),a.on("update",p),{isActive:function(){return a.isActive()},update:function(){l.length=0,h=!0,f()},cleanUp:function(){a.removeListener("start",d),a.removeListener("end",g),a.removeListener("update",p)}}}(w,t))})},B=function(){d.brush&&(d.brush.trigger||[]).forEach(function(t){"over"===t.on?k.over.push(t):k.tap.push(t)})};Object.defineProperty(w,"data",{get:function(){return g}});var W=d.renderer||t.renderer,$=W?l||u.renderer(W)():l||u.renderer()();w.renderer=$;var I={requiredSize:function(t,e){return z({inner:t,outer:e,dock:I.dock})}};Ln(I,d);var V=function(){};V.dockConfig=I,V.set=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.settings&&(d=ko(!0,{},r,t.settings),Ln(I,d)),d.scale&&(p=a.scale(d.scale)),g=d.data?fe(d.data,{dataset:a.dataset,collection:a.dataCollection},{logger:a.logger()},a.dataCollection):p?p.data():[],"string"==typeof d.formatter?v=a.formatter(d.formatter):"object"===So(d.formatter)?v=a.formatter(d.formatter):p&&p.data().fields&&(v=p.data().fields[0].formatter()),x=c.style(d.style||{})},V.resize=function(t,e){var n=N({inner:t,outer:e});n?($.size(n),m=n):($.size(t),m=t),R.rect=t},V.getRect=function(){return R.rect};var H=function(){var t=$.renderArgs?$.renderArgs.slice(0):[];return t.push({data:g}),t};V.beforeMount=O,V.beforeRender=function(){j({size:m})};var U=void 0;V.render=function(){var t=w.nodes=L.call.apply(L,[S].concat(Eo(H())));$.render(t),U=t},V.hide=function(){V.unmount(),$.size({x:0,y:0,width:0,height:0}),$.clear()},V.beforeUpdate=function(){T({settings:d,data:g})};var q=void 0;V.update=function(){q&&q.stop();var t=w.nodes=L.call.apply(L,[S].concat(Eo(H())));_.forEach(function(t){return t.cleanUp()}),_.length=0,k.tap=[],k.over=[],d.brush&&(D(),B()),_.forEach(function(t){t.isActive()&&t.update()}),U&&d.animations&&d.animations.enabled?(q=function(t,e,n){var i=t.old,r=t.current,a=e.renderer,o=void 0,s=[],u={nodes:[],ips:[]},c={nodes:[],ips:[]},l={nodes:[],ips:[]},h=[],f=n.trackBy||function(t,e){return t.data?t.data.value:"text"===t.type?t.text:e},d={start:function(){var t={};i.forEach(function(e,n){var i=f(e,n);t[i]=e}),r.forEach(function(e,n){var i=f(e,n);t[i]?(l.ips.push(Pu(t[i],e)),l.nodes.push(e),s.push(t[i]),t[i]=!1):(u.nodes.push(e),u.ips.push(Pu({r:.001,opacity:0},e)))}),Object.keys(t).forEach(function(e){t[e]&&(c.nodes.push(t[e]),c.ips.push(Pu(t[e],ko({},t[e],{r:1e-4,opacity:0}))))}),c.ips.length&&h.push({easing:zn,duration:200,tweens:c.ips,nodes:[].concat(s)}),l.ips.length&&h.push({easing:zn,duration:400,tweens:l.ips,nodes:[]}),u.ips.length&&h.push({easing:ic,duration:1200,tweens:u.ips,nodes:[].concat(Eo(l.nodes))}),h.length&&(h[0].started=Date.now(),"undefined"!=typeof window&&(o=window.requestAnimationFrame(d.tick)))},tick:function(){var t=h[0];t||d.stop(),t.started||(t.started=Date.now());var e=(Date.now()-t.started)/t.duration,n=[],i=t.tweens.map(function(n){return n(t.easing(Math.min(1,e)))});n.push.apply(n,Eo(i)),n.push.apply(n,Eo(t.nodes)),a.render(n),e>=1&&(h.shift(),h.length||d.stop()),o&&(o=window.requestAnimationFrame(d.tick))},stop:function(){o&&(window.cancelAnimationFrame(o),o=!1)}};return d}({old:U,current:t},{renderer:$},d.animations)).start():$.render(t),U=t},V.updated=E,V.destroy=function(){V.unmount(),P(y),$.destroy(),F(),y=null};var Y=function(t){w.nodes=t,_.forEach(function(t){t.isActive()&&t.update()}),$.render(t)};return Fn(S,t,{settings:function(){return d},data:function(){return g},scale:function(){return p},formatter:function(){return v},renderer:function(){return $},chart:function(){return a},dockConfig:function(){return I},mediator:function(){return s},instance:function(){return R},style:function(){return x},update:function(){return Y},registries:function(){return u},resolver:function(){return b}}),Fn(R,h,{settings:function(){return d},data:function(){return g},scale:function(){return p},formatter:function(){return v},renderer:function(){return $},chart:function(){return a},dockConfig:function(){return I},mediator:function(){return s},style:function(){return x}}),V.getBrushedShapes=function(t,e,n){var i=[];if(d.brush&&d.brush.trigger){var r=a.brush(t),o=$.findShapes("*");d.brush.trigger.forEach(function(t){o.forEach(function(a){var o=a.data;o&&r.containsMappedData(o,n||t.data,e)&&i.push(a)})})}return i},V.findShapes=function(t){for(var e=$.findShapes(t),n=0,i=e.length;n<i;n++)e[n].key=d.key;return e},V.shapesAt=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=$.itemsAt(t),i=void 0,r=0,a=(i=e&&"stop"===e.propagation&&n.length>0?[n.pop().node]:n.map(function(t){return t.node})).length;r<a;r++)i[r].key=d.key;return i},V.brushFromShapes=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.contexts=Array.isArray(e.contexts)?e.contexts:[];Tn({nodes:t,action:e.action||"toggle",trigger:e,chart:a,data:w.data})},V.mount=function(){y=$.element&&$.element()?y:$.appendTo(o),d.brush&&(D(),B()),Dn(R,f,h),Dn(S,f,t)},V.mounted=function(){return A(y)},V.unmount=function(){[R,S].forEach(function(t){(t.eventListeners||[]).forEach(function(t){var e=t.event,n=t.listener;f.removeListener(e,n)})}),k.tap=[],k.over=[],_.forEach(function(t){t.cleanUp()}),_.length=0},V.onBrushTap=function(t){k.tap.forEach(function(e){(function(t){var e=t.e,n=t.t,i=t.config;return En({collisions:jn(e,n,i.renderer),t:n,config:i,action:Pn(n.action,e,"toggle")})})({e:t,t:e,config:w})&&"stop"===e.globalPropagation&&a.toggleBrushing(!0)})},V.onBrushOver=function(t){k.over.forEach(function(e){(function(t){var e=t.e,n=t.t,i=t.config;return En({collisions:jn(e,n,i.renderer),t:n,config:i,action:Pn(n.action,e,"set")})})({e:t,t:e,config:w})&&"stop"===e.globalPropagation&&a.toggleBrushing(!0)})},V.def=S,V.ctx=R,V.renderer=function(){return $},V.set({settings:h}),C(),V}function Wn(t,e){return{x:t.x+e.x,y:t.y+e.y}}function $n(t,e){return{x:t.x-e.x,y:t.y-e.y}}function In(t,e){return{x:t.x*e,y:t.y*e}}function Vn(t,e){return t.x-e.x}function Hn(t,e){return t.y-e.y}function Un(t,e){return Math.pow(Vn(t,e),2)+Math.pow(Hn(t,e),2)}function qn(t,e){return Math.sqrt(Un(t,e))}function Yn(t,e){return t.x*e.x+t.y*e.y}function Xn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},i=Math.cos(e),r=Math.sin(e),a=$n(t,n);return Wn({x:i*a.x-r*a.y,y:r*a.x+i*a.y},n)}function Zn(t,e,n){return Wn(function(t,e){var n=Yn(t,e)/Yn(e,e)||1;return{x:e.x*n,y:e.y*n}}($n(n,t),$n(e,t)),t)}function Gn(t,e,n){return qn(t,n)+qn(e,n)-qn(t,e)<cc}function Jn(t){return t.x1===t.x2&&t.y1===t.y2}function Qn(t){return t.width<=0||t.height<=0}function Kn(t){return t.r<=0}function ti(t){return t.edges.length<=2}function ei(t){throw new Error('Cyclical reference for "'+t+'"')}function ni(t,e,n){if("string"==typeof t){var i=e[t];return-1!==n.indexOf(t)&&ei(t),hc.test(i)?(n.push(t),ni(i,e,n)):i}var r=t,a=ko(!0,{},e,t),o={};if(t[fc]){var s=t[fc];-1!==n.indexOf(s)&&ei(s);var u=n.slice();u.push(s),r=ko(!0,{},ni(a[s],e,u),t)}return Object.keys(r).forEach(function(t){var e=n.slice();if(t!==fc&&!hc.test(t)){o[t]=r[t];var i=o[t];hc.test(i)&&i in a?(-1!==n.indexOf(i)&&ei(i),e.push(i),"object"===(void 0===(i=a[i])?"undefined":So(i))?o[t]=ni(i,a,e):hc.test(i)&&i in a?o[t]=ni(i,a,e):o[t]=i):"object"===(void 0===i?"undefined":So(i))&&(o[t]=ni(i,a,e))}}),o}function ii(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach(function(t){e[t.key]={colors:t.colors,sizes:t.colors.map(function(t){return t.length})}});return{palette:function(t,n){return function(t,n){var i=e[t];if(!i)return[];for(var r=i.sizes,a=0;a<r.length;a++)if(n<=r[a])return i.colors[a];return i.colors[r.length-1]}(t,n)},style:function(e){return function(t,e){return ni(t,e,[])}(e,t)}}}function ri(t,e,n){var i=e.left-n.left,r=e.top-n.top,a=l(t),o=ko(!0,{},t);switch(a){case"circle":o.cx+=i,o.cy+=r;break;case"polygon":for(var s=0,u=o.vertices.length;s<u;s++){var c=o.vertices[s];c.x+=i,c.y+=r}break;case"line":o.x1+=i,o.y1+=r,o.x2+=i,o.y2+=r;break;case"point":case"rect":o.x+=i,o.y+=r}return o}function ai(t,e){function n(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return function(){for(var i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];var o=void 0;if("function"==typeof t[e]){var s;o=(s=t[e]).call.apply(s,[v].concat(r))}else o=n.call.apply(n,[v].concat(r));return g.forEach(function(t){if(t[e]){var n;(n=t[e]).call.apply(n,[v].concat(r))}}),o}}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={},n=t.filter(function(t){return!!t.key}).map(function(t){return t.key});S.forEach(function(t){t.key&&-1!==n.indexOf(t.key)?e[t.key]=t:t.destroy()}),S=t.map(function(t){var n=t.key&&e[t.key]?e[t.key]:h.interaction(t.type)(v,y,r);return n.set(t),n})}var r=t.element,a=t.data,o=void 0===a?[]:a,s=t.settings,u=void 0===s?{}:s,c=t.on,l=void 0===c?{}:c,h=e.registries,f=e.logger,d=ii(e.style,e.palettes),g=Mo,p=[],v=ko({},t,g.filter(function(t){return!dc(t)})),y=function(){var t={};return Ku.mixin(t),t}(),b=[],w=[],k=null,_=null,M=null,S=[],R=function(){},z=function(){},N={},C=!1,O=function(t,e){return{instance:Bn(h.component(t.type),{settings:t,chart:v,mediator:y,registries:h,theme:d,container:e}),settings:ko(!0,{},t),key:t.key,hasKey:void 0!==t.key}},A=function(t){for(var e=0;e<b.length;e++)if(b[e].instance===t)return b[e];return null},T=function(t){for(var e=0;e<b.length;e++){var n=b[e];if(n.hasKey&&n.key===t)return e}return-1},E=function(t){var e=m(u.dockLayout);t.forEach(function(t){e.addComponent(t.instance,t.key)});var n=e.layout(r),i=n.visible,a=n.hidden;return{visible:i.map(function(t){return A(t)}),hidden:a.map(function(t){return A(t)})}},j=n("created"),P=n("beforeMount"),F=n("mounted"),L=n("beforeUpdate"),D=n("updated"),B=n("beforeRender"),W=n("beforeDestroy"),$=n("destroyed"),I=function(t,e){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).partialData,i=e.formatters,r=void 0===i?{}:i,a=e.scales,o=void 0===a?{}:a,s=e.scroll,u=void 0===s?{}:s;R=function(t,e){var n=e.types,i=e.logger,r={},a=[];return Array.isArray(t)?a.push.apply(a,Eo(t)):(i.warn('Deprecated: "data-source" configuration"'),a.push(t)),a.forEach(function(t,e){var i=n(t.type);if(i){var a=i({key:t.key||e,data:t.data,config:t.config});r[t.key||e]=a}}),function(t){return t?r[t]:r[Object.keys(r)[0]]}}(t,{logger:f,types:h.data}),n||Object.keys(N).forEach(function(t){return N[t].clear()}),z=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fe,r={};return(t||[]).forEach(function(t){if(!t.key)throw new Error('Data collection is missing "key" property');if("object"===So(t.data)&&"collection"in t.data)throw new Error("Data config for collections may not reference other collections");r[t.key]=i(t.data,e,n)}),function(t){var e=void 0,n=void 0;if("string"==typeof t?e=t:"object"===(void 0===t?"undefined":So(t))&&(e=t.key,n=t),!(e in r))throw new Error("Unknown data collection: "+e);var i=r[e];if(n&&n.fields&&n.fields.filter){var a=i.fields.filter(n.fields.filter);i.fields.length!==a.length&&(i=ko(i,{fields:a}))}return i}}(e.collections,{dataset:R},{logger:f}),k=function(t,e,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=hn(t[r],e,n));return i}(o,{dataset:R,collection:z},{scale:h.scale,theme:d,logger:f}),_=function(t,e,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=de(t[r],e,n));return i}(r,{dataset:R,collection:z},{formatter:h.formatter,theme:d,logger:f}),M=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=gn(t[i],e?e[i]:null));return n}(u,M)},V=function(t){var e=r.getBoundingClientRect(),n="clientX"in t?t.clientX:t.x,i="clientY"in t?t.clientY:t.y,a={x:n-e.left,y:i-e.top},o=[];return w.forEach(function(t){var e=t.instance.getRect();lc.testRectPoint(e,a)&&o.push(t)}),o};return v.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.partialData;t.data&&(o=t.data),t.settings&&(u=t.settings,i(t.settings.interactions)),L(),I(o,u,{partialData:e});for(var n=u,a=n.formatters,s=n.scales,c=n.components,l=void 0===c?[]:c,h=function(t){var e=b[t];l.some(function(t){return e.hasKey&&e.key===t.key})||(b.splice(t,1),e.instance.destroy())},f=b.length-1;f>=0;f--)h(f);(b=l.map(function(t){var e=T(t.key);return-1===e?O(t,r):(b[e].updateWith={formatters:a,scales:s,data:o,settings:t},b[e])})).forEach(function(t){t.updateWith&&t.instance.set(t.updateWith)}),b.forEach(function(t){t.updateWith&&t.instance.beforeUpdate()});var d=[],g=[];if(e)b.forEach(function(t){t.updateWith&&t.visible&&d.push(t)});else{var p=E(b),v=p.visible,y=p.hidden;w=v,v.forEach(function(t){t.updateWith&&t.visible?d.push(t):g.push(t)}),y.forEach(function(t){t.instance.hide(),t.visible=!1,delete t.updateWith})}g.forEach(function(t){return t.instance.beforeMount()}),g.forEach(function(t){return t.instance.mount()}),g.forEach(function(t){return t.instance.beforeRender()}),d.forEach(function(t){return t.instance.beforeRender()}),g.forEach(function(t){return t.instance.render()}),d.forEach(function(t){return t.instance.update()}),w.forEach(function(t,e){return function(t,e){var n=t.instance.renderer().element();if(!isNaN(e)&&n&&r&&r.childNodes){var i=r.childNodes,a=Math.min(i.length-1,Math.max(e,0)),o=i[a];r.insertBefore&&void 0!==o&&r.insertBefore(n,i[a])}}(t,e)}),g.forEach(function(t){return t.instance.mounted()}),d.forEach(function(t){return t.instance.updated()}),w.forEach(function(t){delete t.updateWith,t.visible=!0}),D()},v.destroy=function(){W(),b.forEach(function(t){return t.instance.destroy()}),b=[],p.forEach(function(t){var e=t.key,n=t.listener;return r.removeEventListener(e,n)}),i(),delete v.update,delete v.destroy,$()},v.getAffectedShapes=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"and",n=arguments[2],i=arguments[3],r=[];return b.filter(function(t){return void 0===i||null===i||t.key===i}).forEach(function(i){r.push.apply(r,Eo(i.instance.getBrushedShapes(t,e,n)))}),r},v.findShapes=function(t){var e=[];return w.forEach(function(n){e.push.apply(e,Eo(n.instance.findShapes(t)))}),e},v.componentsFromPoint=function(t){return V(t).map(function(t){return t.instance.ctx})},v.shapesAt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],i=r.getBoundingClientRect(),a=w;if(Array.isArray(e.components)&&e.components.length>0){var o=e.components.map(function(t){return t.key});a=w.filter(function(t){return-1!==o.indexOf(t.key)}).map(function(t){return{instance:t.instance,opts:e.components[o.indexOf(t.key)]}})}for(var s=a.length-1;s>=0;s--){var u=a[s],c=ri(t,i,u.instance.renderer().element().getBoundingClientRect()),l=u.instance.shapesAt(c,u.opts),h=l.length>0&&"stop"===e.propagation;if(n.push.apply(n,Eo(l)),n.length>0&&h)return n}return n},v.brushFromShapes=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{components:[]},n=e.components.map(function(t){return t.key});w.forEach(function(i){var r=n.indexOf(i.key);if(-1!==r){for(var a=[],o=0,s=t.length;o<s;o++){var u=t[o];u.key===i.key&&a.push(u)}i.instance.brushFromShapes(a,e.components[r])}})},v.scroll=function(){return function(t,e){return e[t]||(e[t]=dn()),e[t]}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",M)},v.dataset=function(t){return R(t)},v.dataCollection=function(t){return z(t)},v.scales=function(){return k},v.formatters=function(){return _},v.brush=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return N[t]||(N[t]=Rn()),N[t]},v.scale=function(t){return function(t,e,n,i){var r=void 0;return"string"==typeof t&&e[t]?r=e[t]:"object"===(void 0===t?"undefined":So(t))&&"scale"in t&&e[t.scale]&&(r=e[t.scale]),r||hn(t,n,i)}(t,k,{dataset:R,collection:z},{scale:h.scale,theme:d,logger:f})},v.formatter=function(t){return function(t,e,n,i){var r=void 0;return"string"==typeof t&&e[t]?r=e[t]:"object"===(void 0===t?"undefined":So(t))&&"formatter"in t&&e[t.formatter]?r=e[t.formatter]:"object"===(void 0===t?"undefined":So(t))&&"type"in t&&e[t.type]&&(r=e[t.type]),r||de(t,n,i)}(t,_,{dataset:R,collection:z},{formatter:h.formatter,theme:d,logger:f})},v.toggleBrushing=function(t){C=void 0!==t?t:!C},v.component=function(t){var e=T(t);if(-1!==e)return b[e].instance.ctx},v.logger=function(){return f},Object.defineProperty(v,"interactions",{get:function(){return{instances:S,on:function(){S.forEach(function(t){return t.on()})},off:function(){S.forEach(function(t){return t.off()})}}}}),j(),r&&(P(),function(){r.innerHTML="",function(){var t=u.components,e=void 0===t?[]:t;B(),I(o,u),b=e.map(function(t){return O(t,r)});var n=E(b),i=n.visible,a=n.hidden;w=i,a.forEach(function(t){t.instance.hide(),t.visible=!1}),i.forEach(function(t){return t.instance.beforeMount()}),i.forEach(function(t){return t.instance.mount()}),i.forEach(function(t){return t.instance.beforeRender()}),i.forEach(function(t){return t.instance.render()}),i.forEach(function(t){return t.instance.mounted()}),i.forEach(function(t){t.visible=!0})}(),Object.keys(l).forEach(function(t){var e=l[t].bind(v);r.addEventListener(t,e),p.push({key:t,listener:e})});var t={},e=function(e){e.touches?(t.x=e.touches[0].clientX,t.y=e.touches[0].clientY,t.multiTouch=e.touches.length>1):(t.x=e.clientX,t.y=e.clientY,t.multiTouch=!1),t.time=Date.now(),t.comps=V(t)},n=function(e){if("touchend"===e.type&&e.preventDefault(),function(t,e){var n=x(t),i=n?t.changedTouches[0]:t,r=Date.now()-e.time,a=isNaN(e.x)?0:Math.abs(i.clientX-e.x),o=isNaN(e.y)?0:Math.abs(i.clientY-e.y);return(0===t.button||n)&&!e.multiTouch&&a<=12&&o<=12&&r<=300}(e,t))for(var n=t.comps||V(e),i=n.length-1;i>=0;i--)if(n[i].instance.onBrushTap(e),C){C=!1;break}},a=[];a.push({key:"mousedown",listener:e}),a.push({key:"mouseup",listener:n}),function(t){return"ontouchstart"in t&&"ontouchend"in t}(r)&&(a.push({key:"touchstart",listener:e}),a.push({key:"touchend",listener:n})),a.push({key:"mousemove",listener:function(t){for(var e=V(t),n=e.length-1;n>=0;n--)if(e[n].instance.onBrushOver(t),C){C=!1;break}}}),a.forEach(function(t){r.addEventListener(t.key,t.listener),p.push(t)}),i(u.interactions)}(),F(r),v.element=r),v}function oi(t,e){"/"===t.charAt(0)&&(t=t.substring(1));for(var n=t.split("/"),i=void 0,r=e,a=0;a<n.length;a++){if("*"===n[a]&&Array.isArray(r)){var o=[];i=n.slice(a+1).join("/");for(var s=0;s<r.length;s++)o.push.apply(o,Eo(oi(i,r[s])));return o}if(!n[a]&&Array.isArray(r)){var u=new Array(r.length);i=n.slice(a+1).join("/");for(var c=0;c<r.length;c++)u[c]=oi(i,r[c]);return u}n[a]in r&&(r=r[n[a]])}return r}function si(t,e,n,i){var r={},a=i.field||(void 0!==t.field?e.field(t.field):null);return Object.keys(n).forEach(function(o){var s=n[o],u=r[o]={};-1!==["number","string","boolean"].indexOf(void 0===s?"undefined":So(s))?(u.type="primitive",u.value=s):"function"==typeof s?(u.type="function",u.value=s,u.label=s,u.field=a):"object"===(void 0===s?"undefined":So(s))&&(s.fields?u.fields=s.fields.map(function(n){return si(t,e,{main:n},i).main}):void 0!==s.field?(u.type="field",u.field=e.field(s.field),u.value=u.field.value,u.label=u.field.label):a&&(u.value=a.value,u.label=a.label,u.field=a),"function"==typeof s.filter&&(u.filter=s.filter),void 0!==s.value&&(u.value=s.value),void 0!==s.label&&(u.label=s.label),"function"==typeof s.reduce?u.reduce=s.reduce:s.reduce?u.reduce=mc[s.reduce]:u.field&&u.field.reduce&&(u.reduce="string"==typeof u.field.reduce?mc[u.field.reduce]:u.field.reduce))}),r}function ui(t,e){var n=si(t,e,{main:{value:t.value,label:t.label,reduce:t.reduce,filter:t.filter}},{}).main;return{props:si(t,e,t.props||{},n),main:n}}function ci(t,e){var n=e.main,i=e.propsArr,r=e.props,a=[],o=n.field.formatter()||function(t){return t},s={};return i.forEach(function(t){s[t]=r[t].field?r[t].field.formatter():function(t){return t}}),a.push.apply(a,Eo(t.map(function(t){var e=t.items.map(function(t){return t.value}),a=n.reduce,u={value:a?a(e):e,source:t.items[0].source};return u.label=o(u.value),i.forEach(function(e){var n=[];n=t.items.map(function(t){return t[e].value});var i=r[e].reduce;u[e]={value:i?i(n):n},u[e].label=String(s[e](u[e].value)),t.items[0][e].source&&(u[e].source=t.items[0][e].source)}),u}))),a}function li(t){var e=t.cfg,n=t.itemData,i=t.obj,r=t.target,a=t.tracker,o="function"===t.trackType?e.trackBy(n):n[e.trackBy],s=a[o];s||(s=a[o]={items:[],id:o},r.push(s)),s.items.push(i)}function hi(t,e,n){var i=n.key,r={value:"function"==typeof t.value?t.value(e):void 0!==t.value?t.value:e};return r.label="function"==typeof t.label?t.label(e):void 0!==t.label?String(t.label):String(r.value),t.field&&(r.source={key:i,field:t.field.key()}),r}function fi(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.key,n=t.data,i={fields:[]},r={key:function(){return e},raw:function(){return n},field:function(t){return function(t,e){var n=e.cache;if("number"==typeof t)return n.fields[t];for(var i=0;i<n.fields.length;i++)if(n.fields[i].title()===t)return n.fields[i];return null}(t,{cache:i,matrix:n})},fields:function(){return i.fields.slice()},extract:function(t){return function(t,e){var n=[];return(Array.isArray(t)?t:[t]).forEach(function(t){void 0!==t.field&&function(){var i=e.field(t.field),r=e.key();if(!i)throw Error("Field '"+t.field+"' not found");for(var a=ui(t,e),o=a.props,s=a.main,u=Object.keys(o),c=!!t.trackBy,l=So(t.trackBy),h={},f=[],d=i.items(),g=[],p=function(e){var n=d[e];if(s.filter&&!s.filter(n))return"continue";var i=hi(s,n,{key:r});u.forEach(function(t){var a=o[t],s=a.field?a.field.items()[e]:n;i[t]=hi(a,s,{key:r})}),c&&li({cfg:t,itemData:n,obj:i,target:f,tracker:h,trackType:l}),g.push(i)},v=0;v<d.length;v++)p(v);c?n.push.apply(n,Eo(ci(f,{main:s,propsArr:u,props:o}))):n.push.apply(n,g)}()}),n}(t,r)},hierarchy:function(){return null}};return function(t,e){var n=e.cache;if(t){var i=t[0],r=t.slice(1);i.forEach(function(t,e){var a=oi("//"+e,r),o=xc.numeric(a),s=o.length>0,u=s?"measure":"dimension",c=s?Math.min.apply(Math,Eo(o)):NaN,l=s?Math.max.apply(Math,Eo(o)):NaN;n.fields.push(he({title:i[e],values:a,min:c,max:l,type:u,value:function(t){return t},label:function(t){return t}}))})}}(n,{cache:i}),r}function di(t){var e=[],n=(""+t).trim();return"M"!==n[0]&&"m"!==n[0]?e:(n.replace(_c,function(t,n,i){var r=n.toLowerCase();if(i=function(t){var e=t.match(Mc);return e?e.map(Number):[]}(i),"m"===r&&i.length>2&&(e.push([n].concat(i.splice(0,2))),r="l",n="m"===n?"l":"L"),i.length<kc[r])return"";for(e.push([n].concat(i.splice(0,kc[r])));i.length>=kc[r]&&i.length&&kc[r];)e.push([n].concat(i.splice(0,kc[r])));return""}),e)}function gi(t,e){var n=t.x*Math.cos(e)-t.y*Math.sin(e),i=t.y*Math.cos(e)+t.x*Math.sin(e);t.x=n,t.y=i}function pi(t,e,n){t.x+=e,t.y+=n}function vi(t,e,n){return Math.max(t,Math.min(e,n))}function yi(t){var e,n=t.item,i=t.boxWidth,r=t.boxPadding,a=t.rendwidth,o=t.rendheight,s="x",u="y",c="width",l="height",h=a,f=o;t.flipXY&&(s="y",u="x",c="height",l="width",h=o,f=a);var d=function(t){var e=t.start,n=t.end,i=t.minPx,r=void 0===i?.1:i,a=t.maxPx,o=void 0===a?1:a,s=Math.max(e,n),u=Math.min(e,n),c=vi(-.1,1.2,s),l=vi(-.1,1.2,u),h=c*o-l*o,f=Math.max(r,h),d=(f-h)/2;return{actualDiff:f,startModifier:d,actualLow:l*o-d}}({start:n.start,end:n.end,minPx:n.box.minHeightPx,maxPx:f}),g=d.actualDiff,p=d.actualLow;return ko({},n.box,(e={type:"rect"},No(e,s,(r+n.major)*h),No(e,u,p),No(e,l,g),No(e,c,i*h),No(e,"data",n.data||{}),No(e,"collider",{type:null}),e))}function mi(t){var e,n=t.item,i=t.from,r=t.to,a=t.boxCenter,o=t.rendwidth,s=t.rendheight,u="x1",c="y1",l="x2",h="y2",f=o,d=s;return t.flipXY&&(u="y1",c="x1",l="y2",h="x2",f=s,d=o),ko({},n.line,(e={type:"line"},No(e,h,Math.floor(i*d)),No(e,u,a*f),No(e,c,Math.floor(r*d)),No(e,l,a*f),No(e,"data",n.data||{}),No(e,"collider",{type:null}),e))}function xi(t){var e,n=t.item,i=t.key,r=t.position,a=t.width,o=t.boxCenter,s=t.rendwidth,u=t.rendheight,c="x1",l="y1",h="x2",f="y2",d=s,g=u;t.flipXY&&(c="y1",l="x1",h="y2",f="x2",d=u,g=s);var p=a/2;return ko({type:"line"},n[i],(e={},No(e,l,Math.floor(r*g)),No(e,c,(o-p)*d),No(e,f,Math.floor(r*g)),No(e,h,(o+p)*d),No(e,"r",p*d),No(e,"cx",o*d),No(e,"cy",r*g),No(e,"width",a*d),No(e,"data",n.data||{}),No(e,"collider",{type:null}),e))}function bi(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="",i=0;i<t.length;i++){var r=t[i];n+=0===i?"M"+r.x+" "+r.y:"L"+r.x+" "+r.y,n+=" "}return e&&(n+="Z"),n}function wi(t,e,n,i){var r=n/2,a=t-i/2,o=e-i/2,s=t-r,u=e-r;return[{x:a,y:o},{x:a,y:u},{x:a+i,y:u},{x:a+i,y:o},{x:s+n,y:o},{x:s+n,y:o+i},{x:a+i,y:o+i},{x:a+i,y:u+n},{x:a,y:u+n},{x:a,y:o+i},{x:s,y:o+i},{x:s,y:o}]}function ki(t){return-t/180*Math.PI}function _i(t){return function(t){var e=(.5*(Math.floor(t/Math.PI*2)+2)+.25)*Math.PI,n=Math.cos(Math.abs(e-t))*Math.sqrt(2),i=n*Math.cos(t),r=n*Math.sin(t);return{x1:i<0?1:0,y1:r<0?1:0,x2:i>=0?i:i+1,y2:r>=0?r:r+1}}(ki(t))}function Mi(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Oc.get(t.type);if(e){var n=e(t);return n.collider||(n.collider=function(t){var e=t.x,n=t.y,i=t.size,r=i/2;return{type:"rect",x:e-r,y:n-r,width:i,height:i}}(t)),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(e).forEach(function(n){void 0!==Nc[n]&&"transform"!==n&&(t[n]=e[n])})}(n,t),void 0!==t.data&&(n.data=t.data),n}return e}function Si(t,e){return t&&"function"==typeof t.bandwidth?{isBandwidth:!0,value:Math.max(1,t.bandwidth()*e)}:{isBandwidth:!1,value:Math.max(1,e)}}function Ri(t,e,n){var i=e.x,r=e.y,a=e.width,o=e.height,s=Zo(),u=i+a/2,c=r+o/2,l=Math.min(a,o)/2,h=Math.min(a,o)/2,f=h/100;return t.map(function(t,e){var i=n[e];i.type="path";var r=h*i.outerRadius,a=l*i.innerRadius;s.innerRadius(a),s.outerRadius(r),s.cornerRadius(f*i.cornerRadius),i.d=s(t);var o=s.centroid(t),d=i.offset?function(t,e,n,i){var r=To(t,2),a=r[0],o=r[1],s=Math.sqrt(a*a+o*o),u=n-i;return{x:(a/=s)*e*u,y:(o/=s)*e*u}}(o,i.offset,r,a):{x:0,y:0};return i.transform="translate("+d.x+", "+d.y+") translate("+u+", "+c+")",i})}function zi(t,e){return t.slice&&"arc"in t.slice?e.arc:e.data.value}function Ni(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(Bc,[null].concat(e)))}function Ci(t,e){return t&&e?t.cachedTicks&&t.cachedTicks()||t.ticks({distance:e}):[]}function Oi(t){if(void 0===t)return 0;if("number"==typeof t&&isFinite(t))return t;if("string"==typeof t)switch(t){case"center":case"middle":return.5;case"bottom":case"right":return 1;case"top":case"left":default:return 0}return 0}function Ai(t){var e={value:t.value};return t.label&&(e.label=t.label.text),e}function Ti(t){return void 0!==t.value}function Ei(t){var e={type:"line",x1:0,x2:0,y1:0,y2:0,collider:{type:null}};return"top"===t.align||"bottom"===t.align?(e.x1=t.innerRect.x-t.outerRect.x,e.x2=t.innerRect.width+t.innerRect.x,e.y1=e.y2="top"===t.align?t.innerRect.height-t.padding:t.padding):(e.x1=e.x2="left"===t.align?t.innerRect.width-t.padding:t.padding,e.y1=t.innerRect.y-t.outerRect.y,e.y2=t.innerRect.height+t.innerRect.y),function(t,e){ko(t,e.style);var n=t.strokeWidth/2;"top"===e.align?(t.y1-=n,t.y2-=n):"bottom"===e.align?(t.y1+=n,t.y2+=n):"left"===e.align?(t.x1-=n,t.x2-=n):"right"===e.align&&(t.x1+=n,t.x2+=n)}(e,t),e}function ji(t,e,n){n.layered||!n.stepSize?function(t,e){e.collider={type:"polygon",vertices:[{x:e.boundingRect.x,y:e.boundingRect.y},{x:e.boundingRect.x+e.boundingRect.width,y:e.boundingRect.y},{x:e.boundingRect.x+e.boundingRect.width,y:e.boundingRect.y+e.boundingRect.height},{x:e.boundingRect.x,y:e.boundingRect.y+e.boundingRect.height}]}}(0,e):n.tilted?function(t,e,n){var i=n.angle*(Math.PI/180),r=Math.max(n.stepSize/2,e.boundingRect.height/2),a="start"===e.anchor,o="end"===e.anchor&&i<0,s="start"===e.anchor&&i>=0,u=e.boundingRect.y+(s||o?e.boundingRect.height:0),c=[{x:e.x-r,y:u},{x:e.x+r,y:u}].map(function(t){return Xn(t,i,{x:e.x,y:e.y})}),l={x:a?e.boundingRect.x+e.boundingRect.width+10:e.boundingRect.x-10,y:e.boundingRect.y+e.boundingRect.height},h={x:a?e.boundingRect.x+e.boundingRect.width+10:e.boundingRect.x-10,y:e.boundingRect.y},f=i>=0?[l,h]:[h,l];c.push.apply(c,f),e.collider={type:"polygon",vertices:c}}(0,e,n):function(t,e,n){if("bottom"===n.align||"top"===n.align){var i=t.position*n.innerRect.width+(n.innerRect.x-n.outerRect.x-n.stepSize/2);e.collider={type:"rect",x:i,y:0,width:i<0?n.stepSize+i:n.stepSize,height:n.innerRect.height}}else{var r=t.position*n.innerRect.height+(n.innerRect.y-n.outerRect.y-n.stepSize/2);e.collider={type:"rect",x:0,y:r,width:n.innerRect.width,height:r<0?n.stepSize+r:n.stepSize}}var a=e.collider;a.x=Math.max(a.x,0),a.y=Math.max(a.y,0);var o=a.x+a.width-(n.outerRect.x+n.outerRect.width);a.width=o>0?a.width-o:a.width;var s=a.y+a.height-(n.outerRect.y+n.outerRect.height);a.height=s>0?a.height-s:a.height}(t,e,n)}function Pi(t,e){var n=isNaN(t.style.align)?.5:Math.min(Math.max(t.style.align,0),1),i=0;if(t.tilted)i=t.stepSize*n;else{var r=e?t.textRect.height:t.textRect.width;i=Math.max(0,t.stepSize-r)*n}return i}function Fi(t,e){var n={type:"text",text:function(t){return"string"==typeof t||"number"==typeof t?t:"-"}(t.label),x:0,y:0,maxWidth:e.maxWidth,maxHeight:e.maxHeight};return"top"===e.align||"bottom"===e.align?(n.x=t.start*e.innerRect.width+(e.innerRect.x-e.outerRect.x)+Pi(e,!1),n.y="top"===e.align?e.innerRect.height:0,n.anchor=e.stepSize?"start":"middle",n.x+=isNaN(e.style.offset)?0:+e.style.offset):(n.y=t.start*e.innerRect.height+(e.innerRect.y-e.outerRect.y)+Pi(e,!0),n.x="left"===e.align?e.innerRect.width:0,n.anchor="left"===e.align?"end":"start",n.baseline=e.stepSize?"text-before-edge":"central",n.y+=isNaN(e.style.offset)?0:+e.style.offset),function(t,e){["fill","fontSize","fontFamily"].forEach(function(n){t[n]=e.style[n]})}(n,e),function(t,e){if(!e.tilted&&!e.stepSize)if("top"===e.align||"bottom"===e.align){var n=e.outerRect.width,i=Math.min(.75*e.maxWidth/2,e.textRect.width/2),r=t.x-i,a=t.x+i;r<0?(t.anchor="start",t.x=e.innerRect.x-e.outerRect.x,t.maxWidth*=.75):a>n&&(t.anchor="end",t.x=e.innerRect.width+e.innerRect.x,t.maxWidth*=.75)}else{var o=e.outerRect.height,s=e.maxHeight/2,u=t.y-s,c=t.y+s;u<0?(t.y=e.innerRect.y-e.outerRect.y,t.baseline="text-before-edge"):c>o&&(t.y=e.innerRect.height+(e.innerRect.y-e.outerRect.y),t.baseline="text-after-edge")}}(n,e),function(t,e){"top"===e.align?t.y-=e.padding:"bottom"===e.align?t.y+=e.padding+e.maxHeight:"left"===e.align?t.x-=e.padding:"right"===e.align&&(t.x+=e.padding)}(n,e),function(t,e){if(e.tilted){var n=-e.angle,i=n*(Math.PI/180);"bottom"===e.align?(t.x-=e.maxHeight*Math.sin(i)/2,t.y-=e.maxHeight,t.y+=e.maxHeight*Math.cos(i)/2):t.x-=e.maxHeight*Math.sin(i)/3,t.transform="rotate("+n+", "+t.x+", "+t.y+")",t.anchor="bottom"===e.align==e.angle<0?"start":"end";var r=Math.cos(i)*e.maxWidth;if("bottom"===e.align==e.angle<0){var a=e.outerRect.width-e.paddingEnd;t.x+r>a&&(t.maxWidth=(a-t.x-10)/Math.cos(i))}else{var o=e.paddingEnd;t.x-r<o&&(t.maxWidth=(t.x-o-10)/Math.cos(i))}}}(n,e),function(t,e){t.boundingRect=e.textBounds(t)}(n,e),ji(t,n,e),n}function Li(t,e){var n={type:"line",x1:0,x2:0,y1:0,y2:0,collider:{type:null}};return"top"===e.align||"bottom"===e.align?(n.x1=n.x2=t.position*e.innerRect.width+(e.innerRect.x-e.outerRect.x),n.y1="top"===e.align?e.innerRect.height:0,n.y2="top"===e.align?n.y1-e.tickSize:n.y1+e.tickSize):(n.y1=n.y2=t.position*e.innerRect.height+(e.innerRect.y-e.outerRect.y),n.x1="left"===e.align?e.innerRect.width:0,n.x2="left"===e.align?n.x1-e.tickSize:n.x1+e.tickSize),function(t,e){ko(t,e.style)}(n,e),function(t,e){"top"===e.align?(t.y1-=e.padding,t.y2-=e.padding):"bottom"===e.align?(t.y1+=e.padding,t.y2+=e.padding):"left"===e.align?(t.x1-=e.padding,t.x2-=e.padding):"right"===e.align&&(t.x1+=e.padding,t.x2+=e.padding)}(n,e),function(t,e){var n=t.strokeWidth/2;t.x1===e.innerRect.width?(t.x1-=n,t.x2-=n):0===t.x1?(t.x1+=n,t.x2+=n):t.y1===e.innerRect.height?(t.y1-=n,t.y2-=n):0===t.y1&&(t.y1+=n,t.y2+=n)}(n,e),n}function Di(t){return!t.isMinor}function Bi(t){var e=t.rect,n=t.state,i=t.majorTicks,r=t.measure;return t.horizontal?function(t){for(var e=t.majorTicks,n=t.measureText,i=t.rect,r="layered"===t.state.labels.activeMode?2:1,a=i.width,o=e.map(function(t){return t.label}).map(function(t){return t.slice(0,1)+(t.length>1?"":"")}).map(n).map(function(t){return t.width}),s=0;s<e.length;++s){var u=e[s];if(r*a*Math.abs(u.start-u.end)<o[s])return!0}return!1}({majorTicks:i,measureText:r,rect:e,state:n}):function(t){var e=t.majorTicks,n=t.measureText,i=t.rect.height,r=n("M").height;return!(e.length<2)&&i*Math.abs(e[0].position-e[1].position)<r}({majorTicks:i,measureText:r,rect:e,state:n})}function Wi(t){var e=t.value,n=t.maxValue,i=t.minValue,r=t.range,a=t.modifier;return isNaN(r)||isNaN(a)||(e=r*a),e>n&&(e=n),e<i&&(e=i),e}function $i(t){var e=t.isDiscrete,n=t.rect,i=t.formatter,r=t.measureText,a=t.scale,o=t.settings,s=t.state,u=0,c={left:0,top:0,right:0,bottom:0},l=o.labels,h=l.maxLengthPx,f=l.minLengthPx;if(o.labels.show){var d=o.align,g="top"===d||"bottom"===d,p=g?n.width:n.height,v=a.ticks({settings:o,distance:p,formatter:i}).filter(Di),y=function(t){var e=r({text:t,fontSize:o.labels.fontSize,fontFamily:o.labels.fontFamily});return e.width=Wi({value:e.width,maxValue:h,minValue:f}),e};if(e&&g&&"auto"===o.labels.mode&&(!function(t){var e=t.majorTicks,n=t.measure,i=t.rect,r=t.state,a=t.settings.labels.maxGlyphCount,o="layered"===r.labels.activeMode?2:1,s=n("").width,u=i.width,c=0;if(isNaN(a))for(var l=0;l<e.length;l++){var h=e[l],f=h.label,d=n(f).width*(f.length>1?.7:1);if(c=o*u*Math.abs(h.start-h.end),d+s>c)return!0}else if(c=o*u*e.reduce(function(t,e){return Math.min(Math.abs(e.start-e.end),t)},1/0),.7*n("M").width*a+s>c)return!0;return!1}({majorTicks:v,measure:y,rect:n,state:s,settings:o})?s.labels.activeMode="horizontal":s.labels.activeMode="tilted"),e&&"tilted"!==s.labels.activeMode&&Bi({rect:n,state:s,majorTicks:v,measure:y,horizontal:g})){return{size:Math.max(n.width,n.height),isToLarge:!0}}var m=void 0;if("tilted"===s.labels.activeMode){var x=Math.abs(o.labels.tiltAngle)*(Math.PI/180);m=function(t){return Wi({value:t.width,maxValue:h,minValue:f})*Math.sin(x)+t.height*Math.cos(x)}}else m=g?function(t){return t.height}:function(t){return Wi({value:t.width,maxValue:h,minValue:f})};var b=void 0;if(g&&"tilted"!==s.labels.activeMode)b=["M"];else if(isNaN(o.labels.maxGlyphCount))b=v.map(function(t){return t.label});else{for(var w="",k=0;k<o.labels.maxGlyphCount;k++)w+="M";b=[w]}var _=b.map(y),M=_.map(m),S=Math.max.apply(Math,Eo(M).concat([0]));if(u+=S,u+=o.labels.margin,"layered"===s.labels.activeMode&&(u*=2),"tilted"===s.labels.activeMode){var R="bottom"===o.align==o.labels.tiltAngle>=0,z=Math.abs(o.labels.tiltAngle)*(Math.PI/180),N=(S-r("M").height*Math.cos(z))/Math.sin(z),C=Math.min(o.labels.maxEdgeBleed,Math.max.apply(Math,Eo(_.map(function(t){return Math.min(N,t.width)*Math.cos(z)+t.height}).map(function(t,e){var i=v[e]?v[e].position:0;return R?t-i*n.width:t-(1-i)*n.width})).concat([0])))+o.paddingEnd;if(c[R?"left":"right"]=C,e&&function(t){var e=t.majorTicks,n=t.measureText,i=t.rect,r=t.bleedSize,a=t.angle;if(e.length<2)return!1;if(0===a)return!0;var o=Math.abs(a),s=1/((i.width-r)*Math.abs(e[0].position-e[1].position));return n("M").height>Math.sin(o*(Math.PI/180))/s}({majorTicks:v,measureText:r,rect:n,bleedSize:C,angle:o.labels.tiltAngle}))return{size:Math.max(n.width,n.height),isToLarge:!0}}}return{size:u,edgeBleed:c}}function Ii(t){var e=0;return e+=t.paddingStart,e+=t.line.show?t.line.strokeWidth:0,e+=t.ticks.show?t.ticks.margin:0}function Vi(t){var e=0;return e+=t.ticks.show?t.ticks.tickSize:0,e+=Ii(t)+t.labels.margin}function Hi(t){return t.filter(function(t){return!t.isMinor})}function Ui(t,e){return t.map(function(t){return Li(t,e)})}function qi(t,e){return e?Math.abs(e.end-e.start):t.bandwidth()}function Yi(t){var e=t.measureText,n=t.settings,i=t.innerRect,r=t.scale,a=t.tilted,o=t.layered,s=t.tick,u=e({text:"M",fontSize:n.labels.fontSize,fontFamily:n.labels.fontFamily}).height,c=qi(r,s),l={width:0,height:u};if("left"===n.align||"right"===n.align)l.width=i.width-Vi(n)-n.paddingEnd;else if(o)l.width=c*i.width*2;else if(a){var h=Math.abs(n.labels.tiltAngle)*(Math.PI/180);l.width=(i.height-Vi(n)-n.paddingEnd-u*Math.cos(h))/Math.sin(h)}else l.width=c*i.width;return l.width=Wi({value:l.width,maxValue:n.labels.maxLengthPx,minValue:n.labels.minLengthPx}),l}function Xi(t){var e=t.measureText,n=t.settings,i=t.innerRect,r=t.ticks,a=t.tilted,o=t.layered,s=e({text:"M",fontSize:n.labels.fontSize,fontFamily:n.labels.fontFamily}).height,u={width:0,height:s};if("left"===n.align||"right"===n.align)u.width=i.width-Vi(n)-n.paddingEnd;else if(o)u.width=i.width/Hi(r).length*.75*2;else if(a){var c=Math.abs(n.labels.tiltAngle)*(Math.PI/180);u.width=(i.height-Vi(n)-n.paddingEnd-s*Math.cos(c))/Math.sin(c)}else u.width=i.width/Hi(r).length*.75;return u.width=Wi({value:u.width,maxValue:n.labels.maxLengthPx,minValue:n.labels.minLengthPx}),u}function Zi(t){function e(){return r=Xi,a=!0,e}function n(){return r=Yi,n}function i(t){var e=t.settings,n=t.scale,i=t.innerRect,o=t.outerRect,s=t.measureText,u=t.ticks,c=t.state,l=t.textBounds,h=[],f=Hi(u),d=function(t){return t.filter(function(t){return t.isMinor})}(u),g={innerRect:i,align:e.align,outerRect:o},p="tilted"===c.labels.activeMode,v="layered"===c.labels.activeMode,y=void 0;if(e.line.show&&(g.style=e.line,g.padding=e.paddingStart,h.push(Ei(g))),e.ticks.show&&(g.style=e.ticks,g.tickSize=e.ticks.tickSize,g.padding=Ii(e),y=Ui(f,g)),e.labels.show){var m=Vi(e);g.style=e.labels,g.padding=m,g.tilted=p,g.layered=v,g.angle=e.labels.tiltAngle,g.paddingEnd=e.paddingEnd,g.textBounds=l;var x=function(t){var a=r({measureText:s,settings:e,innerRect:i,ticks:u,scale:n,tilted:p,layered:v,tick:t});g.maxWidth=a.width,g.maxHeight=a.height,g.textRect=function(t){var e=t.style;return(0,t.measureText)({text:t.tick.label,fontSize:e.fontSize,fontFamily:e.fontFamily})}({tick:t,measureText:s,style:g.style}),g.stepSize=function(t){var e=t.innerRect,n=t.scale,i=t.settings,r=t.tick;return("top"===i.align||"bottom"===i.align?e.width:e.height)*qi(n,r)}({innerRect:i,scale:n,ticks:u,settings:e,tick:t})},b=[];b=!v||"top"!==e.align&&"bottom"!==e.align?function(t,e,n){return t.map(function(t){n(t);var i=Fi(t,e);return i.data=t.data,i})}(f,g,x):function(t,e,n,i){var r=e.padding,a=Vi(n);return t.map(function(t,o){i(t);var s=a+e.maxHeight+n.labels.margin;e.layer=o%2,e.padding=o%2==0?r:s;var u=Fi(t,e);return u.data=t.data,u})}(f,g,e,x),a&&!g.tilted&&function(t,e){for(var n=function(t,e){var n=t.boundingRect,i=e.boundingRect;return lc.testRectRect(n,i)},i=0;i<=t.length-1;i++)for(var r=i+1;r<=Math.min(i+5,i+(t.length-1));r++)t[i]&&t[r]&&n(t[i],t[r])&&(r===t.length-1?(t.splice(i,1),e&&e.splice(i,1)):(t.splice(r,1),e&&e.splice(r,1)),r--,i--)}(b,y),h.push.apply(h,Eo(b))}return e.minorTicks&&e.minorTicks.show&&d.length>0&&(g.style=e.minorTicks,g.tickSize=e.minorTicks.tickSize,g.padding=function(t){return t.line.strokeWidth+t.minorTicks.margin}(e),h.push.apply(h,Eo(Ui(d,g)))),y&&h.push.apply(h,Eo(y)),h}var r=void 0,a=!1;return e.build=i,n.build=i,t?n():e()}function Gi(t,e,n){var i="";if("function"==typeof t)i=t();else if("string"==typeof t)i=t;else if(n){i=(n.data().fields||[]).map(function(t){return t.title()}).join(e)}return i}function Ji(t,e){var n=t.settings.dock,i=t.settings.settings.invert,r="top"===n||"bottom"===n,a=r?"width":"height",o=t.rect[a],s=t.chart.scroll(t.settings.scroll),u=void 0,c=e[r?"x":"y"];i&&(c=o-c);var l=s.getState();u={startOffset:c,startScroll:l.start,swipe:!1};var h=c/o*(l.max-l.min)+l.min;h<l.start?u.startScroll=h:h>l.start+l.viewSize&&(u.startScroll=h-l.viewSize);return{update:function(t){var e=t[r?"x":"y"];if(i&&(e=o-e),!u.swipe){if(Math.abs(u.startOffset-e)<=1)return;u.swipe=!0}var n=s.getState(),a=(e-u.startOffset)/o*(n.max-n.min),c=u.startScroll+a;s.moveTo(c)},end:function(t){var e=t[r?"x":"y"];i&&(e=o-e);var n=s.getState();if(u.swipe){var a=(e-u.startOffset)/o*(n.max-n.min),c=u.startScroll+a;s.moveTo(c)}else{var l=e/o*(n.max-n.min)+n.min-n.viewSize/2;s.moveTo(l)}}}}function Qi(t,e){var n=e.element().getBoundingClientRect();return{x:t.center.x-n.left,y:t.center.y-n.top}}function Ki(t){var e=t.h,n=t.isVertical,i=t.value,r=t.pos,a=t.align,o=t.borderHit,s=t.state,u="end"!==a,c=u?{left:"0",top:"0"}:{right:"0",bottom:"0"},l=0,h="100%",f="100%";return s.targetRect&&"start"===s.settings.bubbles.align?(h=s.targetRect.x+s.targetRect.width+"px",f=s.targetRect.y+s.targetRect.height+"px"):s.targetRect&&"end"===s.settings.bubbles.align&&(l=n?s.targetRect.x:s.targetRect.y,h=s.rect.width-l+"px",f=s.rect.height-l+"px"),u||(r-=o),e("div",{on:{mouseover:function(){this.children[0].elm.style.backgroundColor="#000",this.children[0].elm.style[n?"height":"width"]="2px"},mouseout:function(){this.children[0].elm.style.backgroundColor=s.style.line.stroke,this.children[0].elm.style[n?"height":"width"]="1px"}},attrs:{"data-value":i},style:{cursor:n?"ns-resize":"ew-resize",position:"absolute",left:n?l+"px":r+"px",top:n?r+"px":l+"px",height:n?o+"px":f,width:n?h:o+"px",pointerEvents:"auto"}},[e("div",{style:ko({backgroundColor:s.style.line.stroke,position:"absolute",height:n?"1px":"100%",width:n?"100%":"1px"},c)})])}function tr(t){var e,n=t.h,i=t.isVertical,r=t.label,a=t.otherValue,o=t.idx,s=t.pos,u=t.align,c=t.state,l="end"!==u,h="outside"===c.settings.bubbles.placement,f="none",d=void 0;return i?(d=l?"left":"right",h&&(f=l?"translate(-100%,  0px)":"translate(100%,  0px)")):(d=l?"top":"bottom",h&&(f=l?"translate(0px, -100%)":"translate(0px,  100%)")),n("div",{style:(e={position:"absolute"},No(e,d,"0"),No(e,i?"top":"left",s+"px"),No(e,"transform",f),e)},[n("div",{attrs:{"data-other-value":a,"data-idx":o},style:ko({position:"relative",borderRadius:c.style.bubble.borderRadius+"px",border:c.style.bubble.strokeWidth+"px solid "+c.style.bubble.stroke,backgroundColor:c.style.bubble.fill,color:c.style.bubble.color,fontFamily:c.style.bubble.fontFamily,fontSize:c.style.bubble.fontSize,padding:"4px 8px",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"150px",minWidth:"50px",minHeight:"1em",pointerEvents:"auto",transform:i?"translate(0,-50%)":"translate(-50%,0)"})},[r])])}function er(t){var e=t.borderHit,n=t.els,i=t.isVertical,r=t.state,a=t.vStart,o=t.vEnd,s=t.idx,u=0;r.targetRect&&(u=i?r.targetRect.y:r.targetRect.x);var c=!!r.scale,l=c?r.scale.norm(a)*r.size:a,h=c?r.scale.norm(o)*r.size:o,f=Math.abs(l-h),d=Math.min(l,h)+u,g=d+f;if(r.targetRect){var p=r.targetFillRect||r.targetRect,v=i?p.height:p.width,y=c?r.scale.norm(a)*v:a,m=c?r.scale.norm(o)*v:o,x=Math.abs(y-m),b=Math.min(y,m),w={h:r.h,isVertical:i,top:b,height:x,color:r.style.target.fill,opacity:r.style.target.opacity};r.style.target.opacity<.8&&(w.on={mouseover:function(){this.elm.style.opacity=r.style.target.opacity+.1},mouseout:function(){this.elm.style.opacity=r.style.target.opacity}}),n.push(r.h("div",{style:{position:"absolute",left:p.x+"px",top:p.y+"px",height:p.height+"px",width:p.width+"px"}},[function(t){var e=t.h,n=t.isVertical,i=t.top,r=t.height,a=t.color,o=t.on;return e("div",{style:{backgroundColor:a,opacity:t.opacity,position:"absolute",left:n?0:i+"px",top:n?i+"px":0,height:n?r+"px":"100%",width:n?"100%":r+"px",pointerEvents:"auto"},on:o},[])}(w)]))}n.push(Ki({h:r.h,isVertical:i,borderHit:e,value:l<h?a:o,pos:d,align:"start",state:r})),n.push(Ki({h:r.h,isVertical:i,borderHit:e,value:l<h?o:a,pos:g,align:"end",state:r}));var k=r.settings.bubbles;if(k&&k.show){var _={fontSize:k.fontSize,fontFamily:k.fontFamily,color:k.fill},M=[a,o];n.push(tr({h:r.h,isVertical:i,align:k.align,style:_,idx:s,otherValue:l<h?o:a,label:""+r.format(l<h?a:o,M),pos:d,state:r})),n.push(tr({h:r.h,isVertical:i,align:k.align,style:_,idx:s,otherValue:l<h?a:o,label:""+r.format(l<h?o:a,M),pos:g,state:r}))}}function nr(t){var e=t.active.limitHigh-t.active.end,n=t.active.limitLow-t.active.start,i=t.current-t.start;return i=i<0?Math.max(i,n):Math.min(i,e)}function ir(t){if(!t.active)return[];var e=t.start,n=t.current;if(-1!==t.active.idx)if("foo"===t.active.mode)e=Math.min(t.active.start,t.active.end),n=Math.max(t.active.start,t.active.end);else if("modify"===t.active.mode)e=Math.min(t.start,t.current),n=Math.max(t.start,t.current);else{var i=nr(t);e=t.active.start+i,n=t.active.end+i}var r=[],a=t.direction===Zc;return t.ranges.forEach(function(e,n){n!==t.active.idx&&er({borderHit:Xc,els:r,isVertical:a,state:t,vStart:Math.min(e.min,e.max),vEnd:Math.max(e.min,e.max),idx:n})}),er({borderHit:Xc,els:r,isVertical:a,state:t,vStart:e,vEnd:n,idx:t.active.idx}),r}function rr(t){return{min:t.scale.min(),max:t.scale.max()}}function ar(t){return{min:0,max:t.direction?t.rect.width:t.rect.height}}function or(t,e,n){var i=t.ranges,r=void 0,a=-1;for(r=0;r<i.length;r++){if(i[r].min<=e&&e<=i[r].max){a=r,n.min=r?i[r-1].max:n.min,n.max=r+1<i.length?i[r+1].min:n.max;break}if(e<i[r].min){n.max=i[r].min,n.min=r?i[r-1].max:n.min;break}}-1===a&&i.length&&r>=i.length&&(n.min=i[i.length-1].max);var o=void 0;-1!==a&&(o={idx:a,start:i[a].min,end:i[a].max,limitLow:n.min,limitHigh:n.max,mode:"foo"}),t.active=o}function sr(t){t.renderer.render(ir(t))}function ur(t,e){if(!e||!e.isActive())return[];var n=t.scale.data(),i=(n?n.fields||[]:[]).map(function(t){return t.id()}),r=e.brushes().filter(function(t){return"range"===t.type&&-1!==i.indexOf(t.id)})[0];return r?r.brush.ranges():[]}function cr(t,e){for(var n=void 0,i=1/0,r=e.domain(),a=e.bandwidth()/2,o=0;o<r.length;++o){var s=Math.abs(t-a-e(r[o]));s<i&&(i=s,n=r[o])}return n}function lr(t,e){return Math.min.apply(Math,Eo(t))<=Math.max.apply(Math,Eo(e))&&Math.max.apply(Math,Eo(t))>=Math.min.apply(Math,Eo(e))}function hr(t){return u(t.reduce(function(t,e){return t.push.apply(t,Eo(s(e.bounds))),t},[]))}function fr(t){t.renderer.render(ir(t))}function dr(t){return t.rc.ranges()}function gr(t){var e="vertical"===t.direction,n=t.rect[e?"height":"width"],i=t.rect[e?"width":"height"];return function(t){var e=t.brush;if(!e||!e.isActive())return[];var n=t.scale.data(),i=(n?n.fields||[]:[]).map(function(t){return t.id()}),r=e.brushes().filter(function(t){return"range"===t.type&&-1!==i.indexOf(t.id)})[0];return r?r.brush.ranges():[]}(t).map(function(r){var a=t.scale(r.min)*n,o=t.scale(r.max)*n,s=Math.min(a,o),u=Math.abs(a-o);return{type:"rect",fill:t.fill,opacity:t.opacity,x:e?0:s,width:e?i:u,y:e?s:0,height:e?u:i}})}function pr(t,e,n,i){function r(){!function(t){t.renderer.render(gr(t))}(t)}function a(){!function(t){t.renderer.render(gr(t))}(t)}function o(){!function(t){t.renderer.render(gr(t))}(t)}t.brush=e,e&&(e.on("start",r),e.on("update",a),e.on("end",o),t.start=r,t.update=a,t.end=o,t.brush=e,t.scale=n,t.renderer=i)}function vr(t){t.brush&&(t.brush.removeListener("start",t.start),t.brush.removeListener("update",t.update),t.brush.removeListener("end",t.end)),t.start=void 0,t.update=void 0,t.end=void 0,t.brush=void 0,t.scale=void 0,t.renderer=void 0}function yr(t,e){var n=e.center.x,i=e.center.y;return{x:n-t.left,y:i-t.top}}function mr(t,e,n){return Un(t,e.points[0])<Math.pow(n.settings.snapIndicator.threshold,2)}function xr(t,e){null==t.path.d?t.path.d="M"+e.x+" "+e.y+" ":t.path.d+="L"+e.x+" "+e.y+" ",t.points.push(e)}function br(t){var e=t.state,n=t.start,i=void 0===n?null:n,r=t.end,a=void 0===r?null:r;null!==i&&(e.snapIndicator.x1=i.x,e.snapIndicator.y1=i.y),null!==a&&(e.snapIndicator.x2=a.x,e.snapIndicator.y2=a.y)}function wr(t,e){t.snapIndicator.visible=e}function kr(t,e){return{node:t,data:t.data,scale:e.scale,formatter:e.formatter,dataset:e.dataset}}function _r(t,e,n){var i={type:"text",text:e,maxWidth:n.rotate?t.height:t.width,x:0,y:t.y,dx:0,dy:0,fill:n.fill,anchor:n.rotate?"end":"start",baseline:"alphabetical",fontSize:n.fontSize+"px",fontFamily:n.fontFamily},r=n.textMetrics;if(t.width<n.fontSize||t.height<r.height)return!1;if(n.rotate){var a=Math.max(0,t.width-r.height/(.8*tl)),o=Math.max(0,t.height-r.width);i.x=t.x+r.height/tl+n.align*a,i.y=t.y+n.justify*o,i.transform="rotate(-90, "+(i.x+i.dx)+", "+(i.y+i.dy)+")"}else{var s=Math.max(0,t.width-r.width),u=Math.max(0,t.height-r.height/(.8*tl));i.x=t.x+n.align*s,i.y=t.y+r.height/tl+n.justify*u}return i}function Mr(t){var e=t.bar,n=t.view,i=t.direction,r=t.position,a=t.padding,o=void 0===a?el:a,s={};if(ko(s,e),r&&"inside"!==r)if("up"===i||"down"===i){var u=Math.max(0,Math.min(e.y,n.height)),c=Math.max(0,Math.min(e.y+e.height,n.height));"outside"===r&&"up"===i||"opposite"===r&&"down"===i?(s.y=0,s.height=u):("outside"===r&&"down"===i||"opposite"===r&&"up"===i)&&(s.y=c,s.height=n.height-c)}else{var l=Math.max(0,Math.min(e.x,n.width)),h=Math.max(0,Math.min(e.x+e.width,n.width));"outside"===r&&"left"===i||"opposite"===r&&"right"===i?(s.x=0,s.width=l):("outside"===r&&"right"===i||"opposite"===r&&"left"===i)&&(s.x=h,s.width=n.width-h)}else;return function(t,e){var n=Math.max(0,Math.min(t.y,e.height)),i=Math.max(0,Math.min(t.y+t.height,e.height)),r=Math.max(0,Math.min(t.x,e.width)),a=Math.max(0,Math.min(t.x+t.width,e.width));t.x=r,t.width=a-r,t.y=n,t.height=i-n}(s,n),function(t,e){t.x+=e,t.width-=2*e,t.y+=e,t.height-=2*e}(s,o),s}function Sr(t){var e=t.direction,n=t.fitsHorizontally,i=t.lblStngs,r=t.measured,a=t.node,o=t.orientation,s=t.placementSettings,u=t.rect,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mr,l=void 0,h=void 0,f=void 0,d=void 0,g=void 0,p=[];for(g=0;g<s.length;g++){if(f=s[g],d=c({bar:a.localBounds,view:u,direction:e,position:f.position}),p.push(d),l=!g||d.height>l.height?d:l,"v"===o&&(n&&d.height>r.height*tl||!n&&d.height>r.width)){h=d;break}if("h"===o&&d.height>r.height&&d.width>r.width){h=d;break}}return"v"===o&&!n&&!h&&l.height>2*i.fontSize?(h=l,g=p.indexOf(h)):"h"===o&&!h&&l.height>2*i.fontSize&&(h=l,g=p.indexOf(h)),f=s[g],{bounds:h,placement:f}}function Rr(t){for(var e=t.chart,n=t.nodes,i=t.placementSettings,r=t.labelSettings,a=t.measurements,o=t.texts,s=t.directions,u=t.rect,c=t.fitsHorizontally,l=t.collectiveOrientation,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sr,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_r,d=[],g=void 0,p=void 0,v=void 0,y=void 0,m=void 0,x=void 0,b=void 0,w=void 0,k=void 0,_=void 0,M=void 0,S=void 0,R=void 0,z=0,N=n.length;z<N;z++){m=null,S=kr(p=n[z],e),_=o[z],R="left"===(w=s[z])||"right"===w?"h":"v";for(var C=0;C<_.length;C++)if(v=_[C]){var O=h({direction:w,fitsHorizontally:c,lblStngs:k=r[C],measured:b=a[z][C],node:p,orientation:R,placements:k.placements,placementSettings:i[C],rect:u});m=O.bounds,M=O.placement,m&&M&&(y=M.justify,x="function"==typeof M.fill?M.fill(S,z):M.fill,"up"===w&&(y=1-y),"opposite"===M.position&&(y=1-y),(g=f(m,v,{fill:x,justify:"h"===R?M.align:y,align:"h"===R?y:M.align,fontSize:k.fontSize,fontFamily:k.fontFamily,textMetrics:b,rotate:!("h"===l||c)}))&&d.push(g))}}return d}function zr(t){var e=t.x,n=void 0===e?0:e,i=t.y,r=t.item,a=t.globalMetrics,o=t.symbolFn,s=void 0===o?Mi:o,u=t.direction,c=void 0===u?"ltr":u,l=r.label.displayObject,h=r.label.bounds,f=r.symbol.meta,d="rtl"===c,g={x:d?n+a.maxLabelBounds.width:n+a.maxSymbolSize+a.spacing,y:i,width:a.maxLabelBounds.width,height:Math.max(a.maxSymbolSize,a.maxLabelBounds.height)},p=function(t,e,n){var i=Math.max(0,t.width-e),r=Math.max(0,t.height-e);return{x:t.x+e/2+n.align*i,y:t.y+e/2+n.justify*r}}({x:d?n+a.maxLabelBounds.width+a.spacing:n,y:i,width:a.maxSymbolSize,height:g.height},f.size,{align:void 0===f.align?.5:f.align,justify:void 0===f.justify?.5:f.justify}),v=s(ko({},f,p));delete v.collider,l.anchor=d?"end":"start",function(t,e,n){var i=n.textMetrics;if(t.width<n.fontSize||t.height<i.height)return!1;var r=Math.max(0,t.width-i.width);e.baseline="hanging";var a=Math.max(0,t.height-i.height);e.x=t.x+n.align*r,e.y=t.y+n.justify*a}(g,l,{textMetrics:h,fontSize:parseInt(l.fontSize,10),align:0,justify:.5});return{item:{type:"container",data:r.label.displayObject.data,children:[v,l],collider:{type:"rect",x:n,y:i,width:a.maxItemBounds.width,height:a.maxItemBounds.height}},metrics:g}}function Nr(t,e){var n=t.items.length,i=Math.ceil(n/e),r="horizontal"===t.layout.orientation?"width":"height",a="width"===r?"horizontal":"vertical";return t.globalMetrics.maxItemBounds[r]*i+(i-1)*t.layout.margin[a]}function Cr(t,e){var n=e.size,i=e.isActive,r=e.direction,a=e.nav,o=e.attrs,s={},u="";a&&a.button&&("function"==typeof a.button.class?s=a.button.class({direction:r}):a.button.class&&(s=a.button.class),"function"==typeof a.button.content&&(u=a.button.content(t,{direction:r})));var c={width:n+"px",minWidth:n+"px",height:n+"px"};Object.keys(s).length||(c.border="0",c.background="none");var l=o;return l.disabled=i?void 0:"disabled",t("button",{class:s,style:c,attrs:l},[u||t("span",{style:{pointerEvents:"none"}},[ol[r]])])}function Or(t,e,n,i){var r=i.itemRenderer,a=i.navigationRenderer,o=i.titleRenderer,s=i.isPreliminary,u=void 0!==s&&s,c=void 0,l=void 0,h=void 0,f=0,d={x:e.spacing,y:e.spacing,width:t.width-2*e.spacing,height:t.height-2*e.spacing};if(c={x:d.x,y:d.y,width:d.width,height:o.spread()},"horizontal"===n){c={x:d.x,y:d.y,width:o.extent(),height:o.spread()};var g=d.width-c.width-(c.width?e.spacing:0),p=d.height;r.parallelize(g,u?void 0:p);var v=r.extent()>g?a.extent():0;h={x:(l={x:c.x+c.width+(c.width?e.spacing:0),y:d.y,width:d.width-v-c.width-(v?e.spacing:0)-(c.width?e.spacing:0),height:p}).x+l.width+(v?e.spacing:0),y:d.y,width:v,height:d.height};"rtl"===r.direction()&&(h.x=d.x,l.x=h.x+h.width+(h.width?e.spacing:0),c.x=l.x+l.width+(c.width?e.spacing:0)),f=Math.max(c.height,v?a.spread():0,r.spread())}else{var y=d.height-c.height-(c.height?e.spacing:0),m=d.width;r.parallelize(y,u?void 0:m);var x=r.extent()>y?a.extent():0;h={x:d.x,y:d.y+d.height-x,width:d.width,height:x},l={x:d.x,y:c.y+c.height+(c.height?e.spacing:0),width:d.width,height:d.height-c.height-(c.height?e.spacing:0)-h.height-(h.height?e.spacing:0)},f=Math.max(o.extent(),x?a.spread():0,r.spread())}return l=ko({},t,{x:t.x+l.x,y:t.y+l.y,width:l.width,height:l.height}),h.x+=t.x,h.y+=t.y,c.x+=t.x,c.y+=t.y,{title:ko({},t,c),content:ko({},t,l),navigation:ko({},t,h),orientation:n,preferredSize:f}}function Ar(t){t.state.resolved=function(t){var e=t.scale.domain(),n={items:[]};if("threshold-color"===t.scale.type)for(var i=t.scale.data().fields[0],r=i?i.formatter():function(t){return String(t)},a=0;a<e.length-1;a++){var o={value:e[a],label:r(e[a])+" - < "+r(e[a+1])};i&&(o.source={key:i.key()}),n.items.push(o)}else{var s=t.scale.labels?t.scale.labels():null;n.items=e.map(function(e,n){var i=t.scale.datum?ko({},t.scale.datum(e)):{value:e};return t.scale.datum&&((i=ko({},t.scale.datum(e))).value=e),s&&(i.label=s[n]),i})}var u=t.resolver.resolve({data:{fields:t.scale.data().fields},defaults:ko(!0,{},rl.title,t.style.title),settings:t.settings.settings.title}),c=t.resolver.resolve({data:{fields:t.scale.data().fields},defaults:rl.layout,settings:t.settings.settings.layout}),l=t.resolver.resolve({data:n,defaults:ko(!0,{},rl.item.label,t.style.item.label),settings:(t.settings.settings.item||{}).label}),h=ko(!0,{},(t.settings.settings.item||{}).shape);void 0===h.fill&&t.settings.scale&&(h.fill={scale:t.settings.scale});var f=t.resolver.resolve({data:n,defaults:ko(!0,{},rl.item.shape,t.style.item.shape),settings:h}),d=t.resolver.resolve({data:n,defaults:ko(!0,{},{show:rl.item.show}),settings:{show:(t.settings.settings.item||{}).show}});return"threshold-color"===t.scale.type&&d.items.forEach(function(t,n){var i=t.data.value,r=e[n+1];t.data.value=[i,r]}),{title:u,labels:l,symbols:f,items:d,layout:c}}(t),t.titleRenderer.itemize({resolved:t.state.resolved,dock:t.settings.dock||"center"}),t.itemRenderer.itemize({resolved:t.state.resolved,dock:t.settings.dock||"center"}),t.navigationRenderer.itemize({resolved:t.state.resolved,dock:t.settings.dock||"center",navigation:t.settings.settings.navigation}),t.state.display={spacing:8}}function Tr(t){var e=t.rect,n=t.settings,i=t.state,r=t.itemRenderer,a=t.navigationRenderer,o=t.titleRenderer,s="top"===n.dock||"bottom"===n.dock?"horizontal":"vertical",u=Or(e,i.display,s,{itemRenderer:r,navigationRenderer:a,titleRenderer:o});t.renderer.size(u.content);var c=r.getItemsToRender({viewRect:ko({},u.content,{x:0,y:0})});return a.render({rect:u.navigation,itemRenderer:r}),o.render({rect:u.title}),t.state.views={layout:u},c}function Er(t,e){var n=0,i=t.state.isVertical?"justify":"align",r=t.state.isVertical?"y":"x",a=t.state.isVertical?"height":"width",o=t.state.isVertical?"requiredHeight":"requiredWidth";n=t.state.rect[a]-t.state.legend.length()-t.state.title[o](),n*=Math.min(1,Math.max(t.stgns[i],0)),e[r]+=n}function jr(t,e,n){var i=n[t];return"object"===(void 0===i?"undefined":So(i))?-1!==i.valid.indexOf(e)?e:i.default:n.default}function Pr(t,e){var n={x:0,y:0,width:0,height:0},i=t.stgns.padding;return n.x=i.left,n.y=i.top,n.width=e.width-i.left-i.right,n.height=e.height-i.top-i.bottom,n}function Fr(t){var e="top"!==t.settings.dock&&"bottom"!==t.settings.dock,n=t.stgns.title,i=t.renderer.measureText({text:n.text,fontSize:n.fontSize,fontFamily:n.fontFamily}),r=t.renderer.textBounds({text:n.text,fontSize:n.fontSize,fontFamily:n.fontFamily,maxLines:n.maxLines,maxWidth:n.maxLengthPx,wordBreak:n.wordBreak,hyphens:n.hyphens,lineHeight:n.lineHeight}),a=t.chart.scale(t.stgns.fill),o=t.chart.scale(t.stgns.major),s=function(t,e){var n=e.domain(),i=n,r=t.stgns.tick.label;return!r&&t.formatter?r=t.formatter:!r&&e.data().fields&&(r=e.data().fields[0].formatter()),"function"==typeof r&&(i=n.map(r).map(String)),n.map(function(n,r){var a=i[r];return{value:n,label:a,pos:e.norm(parseFloat(n,10)),textMetrics:t.renderer.measureText({text:a,fontSize:t.stgns.tick.fontSize,fontFamily:t.stgns.tick.fontFamily})}})}(t,o),u=function(t){return jr(t.dock,t.settings.tick.anchor,{left:{valid:["left","right"],default:"left"},right:{valid:["left","right"],default:"right"},top:{valid:["top","bottom"],default:"top"},bottom:{valid:["top","bottom"],default:"bottom"},default:"right"})}(t.settings),c={isVertical:e,nodes:[],title:{anchor:function(t){return jr(t.dock,t.settings.title.anchor,{left:{valid:["top"],default:"top"},right:{valid:["top"],default:"top"},top:{valid:["left","right"],default:"left"},bottom:{valid:["left","right"],default:"left"},default:"top"})}(t.settings),textMetrics:i,textBounds:r,requiredWidth:function(){if(!n.show)return 0;var t=r.width,i=n.maxLengthPx;return e||(t+=n.padding,i+=n.padding),Math.min(t,i,c.rect.width)},requiredHeight:function(){if(!n.show)return 0;var t=r.height;return e&&(t+=n.padding),Math.min(t,c.rect.height)}},ticks:{values:s,anchor:u,length:Math.min(Math.max.apply(Math,Eo(s.map(function(t){return t.textMetrics.width}))),t.stgns.tick.maxLengthPx),requiredHeight:function(){return"top"===u?Math.max.apply(Math,Eo(c.ticks.values.map(function(t){return t.textMetrics.height})))+t.stgns.tick.padding:0},height:Math.max.apply(Math,Eo(s.map(function(t){return t.textMetrics.height})))},legend:{fillScale:a,majorScale:o,length:function(){var n=e?"height":"width",i=e?"requiredHeight":"requiredWidth",r=Math.min(c.rect[n],c.rect[n]*t.stgns.length)-c.title[i]();return Math.max(0,Math.min(r,t.stgns.maxLengthPx))}}};return c}function Lr(t,e){var n=e.generator,i=e.item,r=e.data,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{type:"path",d:n(t),opacity:i.opacity,stroke:i.stroke,strokeWidth:i.strokeWidth,fill:a||i.fill,data:r}}function Dr(t){var e=function(t){for(var e=t.data,n=t.stngs,i=t.rect,r=t.resolver,a=t.style,o=i.width,s=i.height,u=r.resolve({data:e,defaults:dl.coordinates,settings:n.coordinates||{},scaled:{major:"vertical"===n.orientation?s:o,minor:"vertical"===n.orientation?o:s}}),c={},l=0,h=0;h<u.items.length;h++){var f=u.items[h],d=f.layerId;c[d]=c[d]||{order:l++,id:d,items:[],firstPoint:f.data},c[d].items.push(f)}var g=Object.keys(c).map(function(t){return c[t]}),p={items:g.map(function(t){return t.firstPoint})};return{coordinates:u,metaLayers:g,layers:r.resolve({data:p,defaults:{curve:dl.layers.curve,show:dl.layers.show},settings:{curve:n.layers.curve,show:n.layers.show}}),lines:r.resolve({data:p,defaults:ko({},dl.layers.line,a.line),settings:n.layers.line}),areas:r.resolve({data:p,defaults:ko({},dl.layers.area,a.area),settings:n.layers.area})}}(t),n=e.metaLayers,i=e.coordinates,r=e.layers,a=e.lines,o=e.areas,s=[];return n.forEach(function(e,n){var u=r.items[n];if(!1!==u.show){for(var c=[],l=[],h=void 0,f=void 0,d=0;d<e.items.length;d++)f=(h=e.items[d]).data,isNaN(h.major)||(t.missingMinor0&&(h.minor0=i.settings.minor.scale?i.settings.minor.scale(f.minor0?f.minor0.value:0):0),isNaN(h.minor)||c.push(h.minor),l.push(h));var g=c.sort(function(t,e){return t-e})[Math.floor((c.length-1)/2)];s.push({layerObj:u,lineObj:a.items[n],areaObj:o.items[n],median:g,points:l,firstPoint:e.firstPoint})}}),s}function Br(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(wl,[null].concat(e)))}function Wr(t,e){return t.x!==e.x||t.y!==e.y}function $r(t,e){return _l.get(t)(e)}function Ir(t,e){var n=e.args[0]*(Math.PI/180);if(e.args.length>2){var i=e.args[1],r=e.args[2];t.translate(i,r),t.rotate(n),t.translate(-i,-r)}else 1===e.args.length&&t.rotate(n)}function Vr(t,e){var n=e.args[0],i=isNaN(e.args[1])?e.args[0]:e.args[1];t.scale(n,i)}function Hr(t,e){var n=e.args[0],i=isNaN(e.args[1])?0:e.args[1];t.translate(n,i)}function Ur(t,e){e.args.length>=6&&t.transform.apply(t,Eo(e.args))}function qr(t,e){for(var n=function(t){for(var e=void 0,n=[];null!==(e=Rl.exec(t));){var i=e[2].trim(),r=-1===i.indexOf(",")?i.split(" "):i.split(",");n.push({cmd:e[1],args:r.filter(function(t){return t.trim().length>0}).map(function(t){return Number(t)})})}return n}(t),i=void 0,r=0,a=n.length;r<a;r++)"rotate"===(i=n[r]).cmd?Ir(e,i):"scale"===i.cmd?Vr(e,i):"matrix"===i.cmd?Ur(e,i):"translate"===i.cmd&&Hr(e,i)}function Yr(t,e,n){var i=t.type,r=n?n.transformPoints(t.points()):t.points();!function(t,e){for(var n=0,i=t.length;n<i;n++)t[n].x/=e,t[n].y/=e}(r,e);var a=null;if("rect"===i||"bounds"===i)(a=u(r)).type=i;else if("circle"===i)(a=function(t,e){return{cx:t[0].x,cy:t[0].y,r:e}}(r,t.r)).type=i;else if("line"===i)(a=c(r)).type=i;else if("polygon"===i||"polyline"===i){a={type:"path",d:bi(r,"polygon"===i)}}return a}function Xr(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(Ol,[null].concat(e)))}function Zr(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(Al,[null].concat(e)))}function Gr(t,e){var n=t.parent;if(n&&"stage"!==n.type){e.parent=Zr(n);var i=n.parent;i&&"stage"!==i.type&&Gr(i,e.parent)}}function Jr(t,e,n){var i=t._collider;return null===i?null:"frontChild"===i.type?function(t,e,n){for(var i=t.descendants.length-1;i>=0;i--){var r=t.descendants[i],a=r._collider;if(a&&a.fn[e](n)){var o=Zr(r);return Gr(r,o),o}}return null}(t,e,n):"bounds"===i.type?function(t,e,n){var i=t._collider.fn,r=n;if(Array.isArray(n.vertices)&&(r=Br(n)),i[e](r)){var a=Zr(t);return Gr(t,a),a}return null}(t,e,n):function(t,e,n){var i={};if(t.modelViewMatrix)if(Array.isArray(n))i=t.inverseModelViewMatrix.transformPoints(n);else if(isNaN(n.r))Array.isArray(n.vertices)?i.vertices=t.inverseModelViewMatrix.transformPoints(n.vertices):i=t.inverseModelViewMatrix.transformPoint(n);else{var r={x:n.cx,y:n.cy},a=t.inverseModelViewMatrix.transformPoint(r);i.cx=a.x,i.cy=a.y,i.r=n.r}else i=n;if(Array.isArray(i.vertices)&&(i=Br(i)),t._collider.fn[e](i)){var o=Zr(t);return Gr(t,o),o}return null}(t,e,n)}function Qr(t,e,n,i){for(var r=t.length,a=0;a<r;a++){var o=t[a],s=Jr(o,e,i);s&&n.push(s),!o.children||s||o._collider||Qr(o.children,e,n,i)}}function Kr(t,e,n){for(var i=t.length,r=0;r<i;r++){var a=t[r];if(null!==Jr(a,e,n))return!0;if(a.children&&!a._collider)return Kr(a.children,e,n)}return!1}function ta(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n={};switch(l(t)){case"circle":return n.cx=t.cx*e,n.cy=t.cy*e,n.r=t.r,["intersectsCircle",n];case"rect":return n=s(t).map(function(t){return In(t,e)}),["intersectsRect",n];case"line":return n=o(t).map(function(t){return In(t,e)}),["intersectsLine",n];case"point":return n=In(t,e),["containsPoint",n];case"polygon":return n.vertices=t.vertices.map(function(t){return In(t,e)}),["intersectsPolygon",n];default:return[]}}function ea(t,e){var n=ta(e,t.dpi),i=To(n,2);return Kr([t],i[0],i[1])}function na(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==e.bounds){var i=e.bounds(n),r=To(i,3),a=r[0],o=r[2],s=a.x,u=a.y,c=o.x,l=o.y,h=isNaN(t._boundingRect.width)?c:Math.max(c,t._boundingRect.width+t._boundingRect.x),f=isNaN(t._boundingRect.height)?l:Math.max(l,t._boundingRect.height+t._boundingRect.y);t._boundingRect.x=isNaN(t._boundingRect.x)?s:Math.min(s,t._boundingRect.x),t._boundingRect.y=isNaN(t._boundingRect.y)?u:Math.min(u,t._boundingRect.y),t._boundingRect.width=h-t._boundingRect.x,t._boundingRect.height=f-t._boundingRect.y}}function ia(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(Bl,[null].concat(e)))}function ra(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function aa(t,e,n,i,r){var a=1-t;return Math.pow(a,3)*e+3*Math.pow(a,2)*t*n+3*a*Math.pow(t,2)*i+Math.pow(t,3)*r}function oa(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(function(t,e,n,i){return Math.abs(t.x+n.x-(e.x+e.x))+Math.abs(t.y+n.y-(e.y+e.y))+Math.abs(e.x+i.x-(n.x+n.x))+Math.abs(e.y+i.y-(n.y+n.y))}(t,e,n,i)<=10)return-1===r.indexOf(t)&&r.push(t),-1===r.indexOf(i)&&r.push(i),r;var a=ra(t,e),o=ra(e,n),s=ra(n,i),u={x:aa(.5,t.x,e.x,n.x,i.x),y:aa(.5,t.y,e.y,n.y,i.y)},c=ra(a,o),l=ra(o,s);return oa(t,a,c,u,r),oa(u,l,s,i,r),r}function sa(t,e,n){var i=function(t,e,n){return{cp1:{x:t.x+2/3*(e.x-t.x),y:t.y+2/3*(e.y-t.y)},cp2:{x:n.x+2/3*(e.x-n.x),y:n.y+2/3*(e.y-n.y)}}}(t,e,n);return oa(t,i.cp1,i.cp2,n)}function ua(t,e,n){var i=[],r=!!t[4],a=!!t[5],o=t[3],s=t[6],u=t[7],c=t[1],l=t[2],h=void 0,f=void 0,d=void 0,g=void 0;if("a"===t[0]&&(s+=e,u+=n),e===u&&n===u)return i;if(!c||!l)return i.push({x:s,y:u}),i;var p=function(t,e,n,i,r,a,o,s,u){var c=void 0,l=void 0,h=void 0,f=void 0,d=void 0,g=void 0,p=ki(n%360),v=Math.cos(p),y=Math.sin(p),m=(s-a)/2,x=(u-o)/2,b=v*m+y*x,w=v*x-y*m;t=Math.abs(t),e=Math.abs(e),(g=Math.pow(b,2)/Math.pow(t,2)+Math.pow(w,2)/Math.pow(e,2))>1&&(t*=g=Math.sqrt(g),e*=g);var k=t*e,_=t*w,M=e*b,S=Math.pow(_,2)+Math.pow(M,2),R=Math.pow(k,2)-S,z=Math.sqrt(Math.max(R/S,0));i===r&&(z=-z);var N=z*(_/e),C=z*(-M/t);f=v*N-y*C+(s+a)/2,d=y*N+v*C+(u+o)/2;var O=(b-N)/t,A=(w-C)/e,T=(-b-N)/t,E=(-w-C)/e;return c=Math.atan2(A,O),c+=c<0?Vl:0,l=Math.atan2(E,T),l+=l<0?Vl:0,h=l-c,!r&&c<l?h-=Vl:r&&l<c&&(h+=Vl),h%=Vl,{startAngle:c,sweepAngle:h,cx:f,cy:d,rx:t,ry:e}}(c,l,o,r,a,s,u,e,n);h=p.cx,f=p.cy,c=p.rx,l=p.ry,d=p.sweepAngle,g=p.startAngle;for(var v=Math.abs(d*Math.sqrt((Math.pow(c,2)+Math.pow(l,2))/2)),y=Math.ceil(v/10),m=d/y,x=1;x<=y;x++){var b=(g+m*x)%Vl,w=Math.cos(b),k=Math.sin(b);i.push({x:h+w*c+-k*w,y:f+k*l+w*k})}return i}function ca(t){for(var e=di(t),n=[],i=[],r=0,a=0,o=null,s=null,u=null,c=null,l=0;l<e.length;++l){var h=e[l],f=h[0];switch("S"!==f&&"s"!==f&&"C"!==f&&"c"!==f&&(o=null,s=null),"T"!==f&&"t"!==f&&"Q"!==f&&"q"!==f&&(u=null,c=null),f){case"m":i.length&&n.push(i.splice(0));case"l":r+=h[1],a+=h[2],i.push({x:r,y:a});break;case"M":i.length&&n.push(i.splice(0));case"L":r=h[1],a=h[2],i.push({x:r,y:a});break;case"H":r=h[1],i.push({x:r,y:a});break;case"h":r+=h[1],i.push({x:r,y:a});break;case"V":a=h[1],i.push({x:r,y:a});break;case"v":a+=h[1],i.push({x:r,y:a});break;case"a":i.push.apply(i,Eo(ua(h,r,a))),r+=h[6],a+=h[7];break;case"A":i.push.apply(i,Eo(ua(h,r,a))),r=h[6],a=h[7];break;case"c":i.push.apply(i,Eo(oa({x:r,y:a},{x:h[1]+r,y:h[2]+a},{x:h[3]+r,y:h[4]+a},{x:h[5]+r,y:h[6]+a}))),o=h[3]+r,s=h[4]+a,r+=h[5],a+=h[6];break;case"C":i.push.apply(i,Eo(oa({x:r,y:a},{x:h[1],y:h[2]},{x:h[3],y:h[4]},{x:h[5],y:h[6]}))),o=h[3],s=h[4],r=h[5],a=h[6];break;case"s":null!==o&&null!==o||(o=r,s=a),i.push.apply(i,Eo(oa({x:r,y:a},{x:2*r-o,y:2*a-s},{x:h[1]+r,y:h[2]+a},{x:h[3]+r,y:h[4]+a}))),o=h[1]+r,s=h[2]+a,r+=h[3],a+=h[4];break;case"S":null!==o&&null!==o||(o=r,s=a),i.push.apply(i,Eo(oa({x:r,y:a},{x:2*r-o,y:2*a-s},{x:h[1],y:h[2]},{x:h[3],y:h[4]}))),o=h[1],s=h[2],r=h[3],a=h[4];break;case"Q":i.push.apply(i,Eo(sa({x:r,y:a},{x:h[1],y:h[2]},{x:h[3],y:h[4]}))),u=h[1],c=h[2],r=h[3],a=h[4];break;case"q":i.push.apply(i,Eo(sa({x:r,y:a},{x:h[1]+r,y:h[2]+a},{x:h[3]+r,y:h[4]+a}))),u=h[1]+r,c=h[2]+a,r+=h[3],a+=h[4];break;case"T":null!==u&&null!==u||(u=r,c=a),u=2*r-u,c=2*a-c,i.push.apply(i,Eo(sa({x:r,y:a},{x:u,y:c},{x:h[1],y:h[2]}))),r=h[1],a=h[2];break;case"t":null!==u&&null!==u||(u=r,c=a),u=2*r-u,c=2*a-c,i.push.apply(i,Eo(sa({x:r,y:a},{x:u,y:c},{x:h[1]+r,y:h[2]+a}))),r+=h[1],a+=h[2];break;case"z":case"Z":i.push({x:i[0].x,y:i[0].y})}}return n.push(i.splice(0)),n}function la(t,e){return ql.get(t)(e)}function ha(t,e){if(Array.isArray(e))for(var n=0,i=e.length;n<i;n++)e[n](t)}function fa(t,e,n){t.node=n[e],t.index=e}function da(t,e,n,i){for(var r={siblings:t,node:null,index:0},a=0,o=t.length;a<o;a++)if(fa(r,a,t),ha(r,i.create),!("function"==typeof r.node.disabled?r.node.disabled():r.node.disabled)){r.node=Yl.save(r.node);var s=la(r.node.type,r.node);s&&(r.node.transform&&(n.save(),qr(r.node.transform,n)),n.isIdentity()||(s.modelViewMatrix=n.clone()),e.addChild(s),r.node.children&&da(r.node.children,s,n,i),r.node.transform&&n.restore()),Yl.restore()}}function ga(t){var e=t.items,n=t.stage,i=t.dpi,r=t.on,a=void 0===r?{}:r;return n||(n=la("stage",i)),da(e,n,new Sl,a),n}function pa(t){return"string"==typeof t?-1!==t.search(Xl):-1!==String(t).search(Xl)}function va(t){return-1!==t.search(Zl)}function ya(t){return-1!==t.search(Gl)}function ma(t,e,n){return Math.max(e,Math.min(n,t))}function xa(){function t(t){var e=ma(t,0,m-1),n=y[e],i=u(n),r=function(t,e,n,i,r){return i.some(function(i){return i(t,e,n)})?Ql:r.some(function(i){return i(t,e,n)})?Jl:Kl}(n,e,y,l,f);return{index:e,value:n,breakOpportunity:r,suppress:g.some(function(t){return t(n,e,y)}),hyphenation:v.some(function(t){return t(n,e,y)}),width:i.width,height:i.height,done:!1}}var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.string,i=e.separator,r=void 0===i?"":i,a=e.reverse,o=void 0!==a&&a,s=e.measureText,u=void 0===s?function(t){return{width:t.length,height:1}}:s,c=e.mandatoryBreakIdentifiers,l=void 0===c?[pa]:c,h=e.noBreakAllowedIdentifiers,f=void 0===h?[]:h,d=e.suppressIdentifier,g=void 0===d?[va,pa,function(t){return""===t}]:d,p=e.hyphenationIdentifiers,v=void 0===p?[ya]:p,y=String(n).split(r);!function(t){""===t[0]&&t.shift(),""===t[t.length-1]&&t.pop()}(y);var m=y.length,x=o?m:-1;return{next:function(e){return isNaN(e)?o?x--:x++:x=ma(e,0,m-1),function(t,e,n){return t?e>=0:e<n}(o,x,m)?t(x):{done:!0}},peek:t,length:m}}function ba(t,e){return{lines:[],line:"",width:0,maxLines:function(t,e){var n=t.maxHeight,i=Math.max(t.maxLines,1)||1/0;if(isNaN(n))return i;var r=e*(t.lineHeight||th);return Math.max(1,Math.min(Math.floor(n/r),i))}(t,e(t.text).height),maxWidth:t.maxWidth,hyphens:{enabled:"auto"===t.hyphens,char:eh,metrics:e(eh)}}}function wa(t){t.lines.push(t.line),t.line="",t.width=0}function ka(t,e){t.line+=e.value,t.width+=e.width}function _a(t,e,n){if(e.width>t.maxWidth)return e;for(var i=e.index,r=1;r<5;r++){var a=n.peek(e.index-1);if(!e.hyphenation||!a.hyphenation||0===e.index)return e;if(t.width+t.hyphens.metrics.width<=t.maxWidth)return t.line+=t.hyphens.char,e;if(1===t.line.length)return e;e=n.next(i-r),t.line=t.line.slice(0,-1),t.width-=e.width}return e}function Ma(t,e,n){for(var i=xa({string:e.value,measureText:n});t.lines.length<t.maxLines;){var r=i.next();if(r.done)break;t.width+r.width>t.maxWidth&&r.breakOpportunity===Kl&&t.line.length>0?(r=t.hyphens.enabled?_a(t,r,i):r,wa(t),ka(t,r)):ka(t,r)}}function Sa(t,e){for(var n=xa({string:t.text,separator:"",measureText:e,noBreakAllowedIdentifiers:[function(t,e){return 0===e}]}),i=ba(t,e),r=!0;i.lines.length<i.maxLines;){var a=n.next();if(a.done){wa(i),r=!1;break}a.breakOpportunity===Ql?wa(i):i.width+a.width>i.maxWidth&&a.breakOpportunity===Kl?a.suppress?i.width+=a.width:(a=i.hyphens.enabled?_a(i,a,n):a,wa(i),ka(i,a)):ka(i,a)}return{lines:i.lines,reduced:r}}function Ra(t,e){for(var n=xa({string:t.text,separator:/(\s|-|\u2010)/,measureText:e}),i=ba(t,e),r=!0;i.lines.length<i.maxLines;){var a=n.next();if(a.done){wa(i),r=!1;break}a.breakOpportunity===Ql?wa(i):i.width+a.width>i.maxWidth&&a.breakOpportunity===Kl?a.suppress?wa(i):a.width>i.maxWidth?Ma(i,a,e):(wa(i),ka(i,a)):ka(i,a)}return{lines:i.lines,reduced:r}}function za(t){return{"break-all":Sa,"break-word":Ra}[t.wordBreak]}function Na(t){return function(e){var n=e.node;if(function(t){return"text"===t.type&&!t._lineBreak}(n)){var i=za(n);if(!i)return;var r=t(n);if(r.width<=n.maxWidth&&!pa(n.text))return;var a=r.height*(n.lineHeight||th),o=i(n,function(t,e){return function(n){return e({text:n,fontSize:t.fontSize,fontFamily:t.fontFamily})}}(n,t));e.node=function(t,e,n){var i={type:"container",children:[]};void 0!==e.id&&(i.id=e.id);var r=0;return t.lines.forEach(function(a,o){var s=ko({},e);s.text=a,s._lineBreak=!0,t.reduced&&o===t.lines.length-1?s.text+=nh:delete s.maxWidth,s.dy=isNaN(s.dy)?r:s.dy+r,r+=n,i.children.push(s)}),i}(o,n,a)}}}function Ca(t,e){var n=t.text,i=t["font-size"],r=t["font-family"],a=t.maxWidth;if(n="string"==typeof n?n:""+n,void 0===a)return n;var o=e({text:n,fontSize:i,fontFamily:r}).width;if(o<=a)return n;for(var s=0,u=n.length-1;s<=u;){var c=Math.floor((s+u)/2);(o=e({text:n.substr(0,c)+nh,fontSize:i,fontFamily:r}).width)<=a?s=c+1:u=c-1}return n.substr(0,u)+nh}function Oa(t){var e=t.baseline||t["dominant-baseline"],n=0,i=parseInt(t.fontSize||t["font-size"],10)||0;switch(e){case"hanging":n=.75*i;break;case"text-before-edge":n=.85*i;break;case"middle":n=.25*i;break;case"central":n=.35*i;break;case"mathemetical":n=i/2;break;case"text-after-edge":case"ideographic":n=.2*-i;break;default:n=0}return n}function Aa(t){var e=t.text,n=t.fontSize,i=t.fontFamily,r=rh[e+n+i];if(void 0!==r)return r;var a=(ah=ah||document.createElement("canvas")).getContext("2d");a.font=n+" "+i;var o=a.measureText(e).width;return rh[e+n+i]=o,o}function Ta(t){var e=t.text,n=t.fontSize,i=t.fontFamily;return{width:Aa({text:e,fontSize:n,fontFamily:i}),height:function(t){var e=t.fontSize,n=t.fontFamily,i=ih[e+n];if(void 0!==i)return i;var r=1.2*Aa({text:"M",fontSize:e,fontFamily:n});return ih[e+n]=r,r}({fontSize:n,fontFamily:i})}}function Ea(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ta,n=t["font-size"]||t.fontSize,i=t["font-family"]||t.fontFamily,r=e({text:t.text,fontFamily:i,fontSize:n}),a=Math.min(t.maxWidth||r.width,r.width),o=t.x||0,s=t.y||0,u=t.dx||0,c={x:0,y:s+((t.dy||0)+Oa(t))-.75*r.height,width:a,height:r.height},l=t["text-anchor"]||t.anchor;return c.x="middle"===l?o+u-a/2:"end"===l?o+u-a:o+u,c}function ja(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ta,n=za(t);if(n){for(var i=t["font-size"]||t.fontSize,r=t["font-family"]||t.fontFamily,a=n(t,function(t){return e({text:t,fontFamily:r,fontSize:i})}),o=ko({},t),s=0,u="",c=0,l=a.lines.length;c<l;c++){var h=a.lines[c];h+=c===l-1&&a.reduced?nh:"";var f=e({text:h,fontSize:i,fontFamily:r}).width;f>=s&&(s=f,u=h)}o.text=u;var d=Ea(o,e),g=t.lineHeight||th;return d.height=d.height*a.lines.length*g,d}return Ea(t,e)}function Pa(t,e,n){var i=n.orientation,r=n.degree,a=n.stops,o=void 0===a?[]:a,s=null;if("radial"===i){var u=e.width||0,c=e.height||0,l=void 0!==e.x?e.x:e.cx,h=void 0!==e.y?e.y:e.cy;s=t.createRadialGradient(l+u/2,h+c/2,1,l+u/2,h+c/2,e.r||Math.max(e.width,e.height)/2)}else{var f=_i(r),d=e.width||2*e.r,g=e.height||2*e.r,p=void 0!==e.x?e.x:e.cx-e.r,v=void 0!==e.y?e.y:e.cy-e.r;s=t.createLinearGradient(p+f.x1*d,v+f.y1*g,p+f.x2*d,v+f.y2*g)}for(var y=0,m=o.length;y<m;y++){var x=o[y];s.addColorStop(x.offset,x.color)}return s}function Fa(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.x,n=t.y,i=t.width,r=t.height,a=t.scaleRatio,o=t.margin,s={x:0,y:0,width:0,height:0,scaleRatio:{x:1,y:1},margin:{left:0,top:0}};return s.x=isNaN(e)?s.x:e,s.y=isNaN(n)?s.y:n,s.width=isNaN(i)?s.width:i,s.height=isNaN(r)?s.height:r,void 0!==a&&(s.scaleRatio.x=isNaN(a.x)?s.scaleRatio.x:a.x,s.scaleRatio.y=isNaN(a.y)?s.scaleRatio.y:a.y),void 0!==o&&(s.margin.left=isNaN(o.left)?0:o.left,s.margin.top=isNaN(o.top)?0:o.top),s}function La(){return{element:function(){},root:function(){},appendTo:function(){},render:function(){return!1},itemsAt:function(){return[]},findShapes:function(){return[]},clear:function(){},destory:function(){},size:function(){},measureText:Ta,textBounds:ja}}function Da(t){return Array.isArray(t)?t:"string"==typeof t?-1!==t.indexOf(",")?t.split(","):t.split(" "):[]}function Ba(t,e){e.setTransform(t[0][0],t[1][0],t[0][1],t[1][1],t[0][2],t[1][2])}function Wa(t,e,n){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=Object.keys(i),a=0,o=n.length;a<o;a++){var s=n[a],u=s[0],c=s[1],l=s[2];if(u in e.attrs&&!(c in i)&&t[c]!==e.attrs[u]){var h=l?l(e.attrs[u]):e.attrs[u];"function"==typeof t[c]?t[c](h):t[c]=h}}for(var f=0,d=r.length;f<d;f++){var g=r[f];t[g]=i[g]}}function $a(t,e,n){for(var i=0,r=t.length;i<r;i++){var a=t[i],o={};e.save(),a.attrs&&(a.attrs.fill||a.attrs.stroke)&&(a.attrs.fill&&"object"===So(a.attrs.fill)&&"gradient"===a.attrs.fill.type&&(o.fillStyle=Pa(e,a.attrs,a.attrs.fill)),a.attrs.stroke&&"object"===So(a.attrs.stroke)&&"gradient"===a.attrs.stroke.type&&(o.strokeStyle=Pa(e,a.attrs,a.attrs.stroke))),Wa(e,a,n,o),a.modelViewMatrix&&Ba(a.modelViewMatrix.elements,e),oh.has(a.type)&&oh.get(a.type)(a.attrs,{g:e,doFill:"fill"in a.attrs&&"none"!==a.attrs.fill,doStroke:"stroke"in a.attrs&&0!==a.attrs["stroke-width"]}),a.children&&$a(a.children,e,n),e.restore()}}function Ia(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga,e=void 0,n=void 0,i=!1,r=Fa(),a=[["fill","fillStyle"],["stroke","strokeStyle"],["opacity","globalAlpha"],["globalAlpha","globalAlpha"],["stroke-width","lineWidth"],["stroke-dasharray","setLineDash",Da]],o=La();return o.element=function(){return e},o.root=function(){return e},o.appendTo=function(t){return e||((e=t.ownerDocument.createElement("canvas")).style.position="absolute",e.style["-webkit-font-smoothing"]="antialiased",e.style["-moz-osx-font-smoothing"]="antialiased",e.style.pointerEvents="none"),t.appendChild(e),e},o.render=function(s){if(!e)return!1;var u=e.getContext("2d"),c=function(t){return("undefined"==typeof window?1:window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}(u),l=r.scaleRatio.x,h=r.scaleRatio.y;i&&(e.style.left=Math.round(r.margin.left+r.x*l)+"px",e.style.top=Math.round(r.margin.top+r.y*h)+"px",e.style.width=Math.round(r.width*l)+"px",e.style.height=Math.round(r.height*h)+"px",e.width=Math.round(r.width*c*l),e.height=Math.round(r.height*c*h));var f={type:"container",children:s};1===c&&1===l&&1===h||(f.transform="scale("+c*l+", "+c*h+")");var d=t({items:[f],dpi:c,on:{create:[Na(o.measureText)]}}),g=!n||!d.equals(n),p=i||g;return p&&(o.clear(),$a(d.children,u,a)),i=!1,n=d,p},o.itemsAt=function(t){return n?n.getItemsFrom(t):[]},o.findShapes=function(t){return n?n.findShapes(t).map(function(t){return t.element=o.element(),t}):[]},o.clear=function(){return e&&(e.width=e.width),o},o.size=function(t){if(t){var e=Fa(t);JSON.stringify(r)!==JSON.stringify(e)&&(i=!0,r=e)}return r},o.destroy=function(){e&&(e.parentElement&&e.parentElement.removeChild(e),e=null),n=null},o}function Va(t,e){oh.add(t,e)}function Ha(t){return sh.test(t)}function Ua(t){return uh.test(t)||ch.test(t)}function qa(t){var e=t?t.length:0,n=void 0,i=void 0;for(n=0;n<e;n++){if(i=t[n],Ha(i))return"ltr";if(Ua(i))return"rtl"}return"ltr"}function Ya(t,e){return"rtl"===e?lh[t]:t}function Xa(t,e){var n=[],i=void 0,r=[],a=[],o=[],s=void 0,u=void 0,c=function(t){return t.id},l=function(t,e){var n=void 0;return n="object"===(void 0===t?"undefined":So(t))?"id"in t?t.id:e:t,{content:t,id:n+"__"+(t.type||"")}};t.isTree||(t=t.map(l)),e=e.map(l),s=t.map(c),u=e.map(c);for(var h=0,f=e.length;h<f;h++){-1===s.indexOf(e[h].id)?n.push(e[h]):a.push(e[h])}for(var d=0,g=t.length;d<g;d++){-1===u.indexOf(t[d].id)?r.push(t[d]):o.push(t[d])}for(var p=0,v=n.length;p<v;p++)n[p].content.children&&(n[p].diff=Xa([],n[p].content.children),n[p].children=n[p].diff.updatedNew.concat(n[p].diff.added),n[p].children.isTree=!0);for(var y=0,m=a.length;y<m;y++)a[y].diff=Xa(o[y].children||[],a[y].content.children||[]),a[y].object=o[y].object,a[y].children=a[y].diff.items;return i=a.concat(n),n.isTree=!0,r.isTree=!0,a.isTree=!0,o.isTree=!0,i.isTree=!0,{added:n,updatedNew:a,updatedOld:o,removed:r,items:i}}function Za(t,e,n){for(var i=0,r=t.length;i<r;i++)t[i].object=n(t[i].content.type,e)}function Ga(t,e){for(var n=0,i=t.length;n<i;n++)null!==t[n].object&&void 0!==t[n].object&&(e(t[n].object),t[n].object=null)}function Ja(t,e,n,i){for(var r=void 0,a=0,o=t.length;a<o;a++)null!==(r=t[a]).object&&void 0!==r.object&&(n(r.object,r.content),r.diff&&(Za(r.diff.added,r.object,e),Ga(r.diff.removed,i),Ja(r.diff.items,e,n,i)))}function Qa(t,e,n,i,r,a){var o=Xa(t,e);return Za(o.added,n,i),Ga(o.removed,a),Ja(o.items,i,r,a),o.items}function Ka(){return new ph(Qa,fh,gh,dh)}function to(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fill",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=function(t){var e=0,n=void 0,i=void 0;if(0===(t=JSON.stringify(t)).length)return e;for(n=0,i=t.length;n<i;n++)e=(e<<5)-e+t.charCodeAt(n),e&=e;return e}(t[e]),r="";if(void 0!==yh[i])r=yh[i];else{var a=t[e],o=a.orientation,s=a.degree,u=a.stops,c=void 0===u?[]:u,l={};void 0===s&&(s=90),"radial"===o?l.type="radialGradient":(l=_i(s)).type="linearGradient",l.id="picasso-gradient-"+i,l.children=c.map(function(t){return{type:"stop",offset:100*t.offset+"%",style:"stop-color:"+t.color+";stop-opacity:"+(t.opacity||1)}}),vh.push(l),yh[i]=l.id,r=l.id}return"url("+n+"#"+r+")"}function eo(t){var e="";"undefined"!=typeof window&&(e=window.location.href.split("#")[0]);var n=t.node;n.fill&&"object"===So(n.fill)&&"gradient"===n.fill.type&&(n.fill=to(n,"fill",e)),n.stroke&&"object"===So(n.stroke)&&"gradient"===n.stroke.type&&(n.stroke=to(n,"stroke",e))}function no(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hh,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ga,i=t(),r=void 0,a=void 0,o=!1,s=Fa(),u=void 0,c=La();return c.element=function(){return r},c.root=function(){return a},c.appendTo=function(t){return r||((r=t.ownerDocument.createElementNS(e,"svg")).style.position="absolute",r.style["-webkit-font-smoothing"]="antialiased",r.style["-moz-osx-font-smoothing"]="antialiased",r.style.pointerEvents="none",r.setAttribute("xmlns",e),(a=t.ownerDocument.createElementNS(e,"g")).style.pointerEvents="auto",r.appendChild(a)),t.appendChild(r),r},c.render=function(t){if(!r)return!1;var e=s.scaleRatio.x,l=s.scaleRatio.y;o&&(r.style.left=Math.round(s.margin.left+s.x*e)+"px",r.style.top=Math.round(s.margin.top+s.y*l)+"px",r.setAttribute("width",Math.round(s.width*e)),r.setAttribute("height",Math.round(s.height*l))),vh=[],yh={};var h={type:"container",children:Array.isArray(t)?[].concat(Eo(t),[{type:"defs",children:vh,disabled:function(){return 0===vh.length}}]):t};1===e&&1===l||(h.transform="scale("+e+", "+l+")");var f=n({items:[h],on:{create:[eo,Na(c.measureText)]}}),d=!u||!f.equals(u),g=o||d;return g&&(c.clear(),i.render(f.children,a)),o=!1,u=f,g},c.itemsAt=function(t){return u?u.getItemsFrom(t):[]},c.findShapes=function(t){return u?u.findShapes(t).map(function(t){return t.element=c.element(),t}):[]},c.clear=function(){if(!a)return c;var t=a.cloneNode(!1);return r.replaceChild(t,a),a=t,c},c.destroy=function(){r&&r.parentElement&&r.parentElement.removeChild(r),r=null,a=null},c.size=function(t){if(t){var e=Fa(t);JSON.stringify(s)!==JSON.stringify(e)&&(o=!0,s=e)}return s},c}function io(t){return void 0===t}function ro(t){return void 0!==t}function ao(t,e){return t.key===e.key&&t.sel===e.sel}function oo(t,e,n){var i,r,a={};for(i=e;i<=n;++i)ro(r=t[i].key)&&(a[r]=i);return a}function so(t,e){var n,i,r,a=e.elm,o=t.data.attrs,s=e.data.attrs;if(o||s){o=o||{},s=s||{};for(n in s)i=s[n],o[n]!==i&&(!i&&Rh[n]?a.removeAttribute(n):(r=n.split(":")).length>1&&Mh.hasOwnProperty(r[0])?a.setAttributeNS(Mh[r[0]],n,i):a.setAttribute(n,i));for(n in o)n in s||a.removeAttribute(n)}}function uo(t,e){var n,i,r=e.elm,a=t.data.class,o=e.data.class;if(a||o){a=a||{},o=o||{};for(i in a)o[i]||r.classList.remove(i);for(i in o)(n=o[i])!==a[i]&&r.classList[n?"add":"remove"](i)}}function co(t,e,n){Th(function(){t[e]=n})}function lo(t,e){var n,i,r=e.elm,a=t.data.style,o=e.data.style;if(a||o){a=a||{},o=o||{};var s="delayed"in a;for(i in a)o[i]||(r.style[i]="");for(i in o)if(n=o[i],"delayed"===i)for(i in o.delayed)n=o.delayed[i],s&&n===a.delayed[i]||co(r.style,i,n);else"remove"!==i&&n!==a[i]&&(r.style[i]=n)}}function ho(t,e,n){if("function"==typeof t)t.call(e,n,e);else if("object"==typeof t)if("function"==typeof t[0])if(2===t.length)t[0].call(e,t[1],n,e);else{var i=t.slice(1);i.push(n),i.push(e),t[0].apply(e,i)}else for(var r=0;r<t.length;r++)ho(t[r])}function fo(){return function t(e){!function(t,e){var n=t.type,i=e.data.on;i&&i[n]&&ho(i[n],e,t)}(e,t.vnode)}}function go(t,e){var n,i=t.data.on,r=t.listener,a=t.elm,o=e&&e.data.on,s=e&&e.elm;if(i!==o){if(i&&r)if(o)for(n in i)o[n]||a.removeEventListener(n,r,!1);else for(n in i)a.removeEventListener(n,r,!1);if(o){var u=e.listener=t.listener||fo();if(u.vnode=e,i)for(n in o)i[n]||s.addEventListener(n,u,!1);else for(n in o)s.addEventListener(n,u,!1)}}}function po(t,e,n){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==e)for(var i=0;i<e.length;++i)po(e[i].data,e[i].children,e[i].sel)}function vo(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).createElement,e=void 0===t?document.createElement.bind(document):t,n=void 0,i=Fa(),r=void 0,a=La();return a.element=function(){return n},a.root=function(){return n},a.appendTo=function(t){return n||((n=e("div")).style.position="absolute",n.style["-webkit-font-smoothing"]="antialiased",n.style["-moz-osx-font-smoothing"]="antialiased",n.style.pointerEvents="none"),t.appendChild(n),n},a.render=function(t){if(!n)return!1;var e=i.scaleRatio.x,a=i.scaleRatio.y;n.style.left=Math.round(i.margin.left+i.x*e)+"px",n.style.top=Math.round(i.margin.left+i.y*a)+"px",n.style.width=Math.round(i.width*e)+"px",n.style.height=Math.round(i.height*a)+"px";var o=Ph("div",{},Array.isArray(t)?t:[t]);return Fh(r||n,o),r=o,!0},a.renderArgs=[Ph],a.clear=function(){if(n){for(var t=n.firstChild;t;)n.removeChild(t),t=n.firstChild;r=null}return a},a.destroy=function(){n&&n.parentElement&&n.parentElement.removeChild(n),n=null},a.size=function(t){return t&&(i=Fa(t)),i},a}function yo(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return yo({palettes:e.palettes.concat(t.palettes||[]),style:ko({},e.style,t.style),logger:t.logger||e.logger,renderer:t.renderer||e.renderer},r)}var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Bh(e.logger),r={component:Z(n.component),data:Z(n.data),formatter:Z(n.formatter),interaction:Z(n.interaction),renderer:gc(n.renderer),scale:Z(n.scale),symbol:Z(n.symbol),logger:i};return e.renderer&&e.renderer.prio&&r.renderer.default(e.renderer.prio[0]),t.use=function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(arguments[2],e)}(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r)},t.chart=function(t){return ai(t,{registries:r,logger:i,style:e.style,palettes:e.palettes})},t.config=function(){return e},Object.keys(r).forEach(function(e){t[e]=r[e]}),t.version=_o.version,t}var mo=Object.prototype.hasOwnProperty,xo=Object.prototype.toString,bo=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===xo.call(t)},wo=function(t){if(!t||"[object Object]"!==xo.call(t))return!1;var e=mo.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&mo.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!n)return!1;var i;for(i in t);return void 0===i||mo.call(t,i)},ko=function t(){var e,n,i,r,a,o,s=arguments[0],u=1,c=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[1]||{},u=2),(null==s||"object"!=typeof s&&"function"!=typeof s)&&(s={});u<c;++u)if(null!=(e=arguments[u]))for(n in e)i=s[n],s!==(r=e[n])&&(l&&r&&(wo(r)||(a=bo(r)))?(a?(a=!1,o=i&&bo(i)?i:[]):o=i&&wo(i)?i:{},s[n]=t(l,o,r)):void 0!==r&&(s[n]=r));return s},_o={version:"0.41.0"},Mo=[],So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ro=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},zo=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),No=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},Co=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},Oo=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Ao=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},To=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);i=!0);}catch(t){r=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Eo=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},jo=Math.PI,Po=2*jo,Fo=Po-1e-6;b.prototype=w.prototype={constructor:b,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+a)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var a=this._x1,o=this._y1,s=n-t,u=i-e,c=a-t,l=o-e,h=c*c+l*l;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>1e-6)if(Math.abs(l*s-u*c)>1e-6&&r){var f=n-a,d=i-o,g=s*s+u*u,p=f*f+d*d,v=Math.sqrt(g),y=Math.sqrt(h),m=r*Math.tan((jo-Math.acos((g+h-p)/(2*v*y)))/2),x=m/y,b=m/v;Math.abs(x-1)>1e-6&&(this._+="L"+(t+x*c)+","+(e+x*l)),this._+="A"+r+","+r+",0,0,"+ +(l*f>c*d)+","+(this._x1=t+b*s)+","+(this._y1=e+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,i,r,a){t=+t,e=+e;var o=(n=+n)*Math.cos(i),s=n*Math.sin(i),u=t+o,c=e+s,l=1^a,h=a?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+u+","+c),n&&(h<0&&(h=h%Po+Po),h>Fo?this._+="A"+n+","+n+",0,1,"+l+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):h>1e-6&&(this._+="A"+n+","+n+",0,"+ +(h>=jo)+","+l+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};var Lo=function(t){return function(){return t}},Do=Math.abs,Bo=Math.atan2,Wo=Math.cos,$o=Math.max,Io=Math.min,Vo=Math.sin,Ho=Math.sqrt,Uo=1e-12,qo=Math.PI,Yo=qo/2,Xo=2*qo,Zo=function(){function t(){var t,c,l=+e.apply(this,arguments),h=+n.apply(this,arguments),f=a.apply(this,arguments)-Yo,d=o.apply(this,arguments)-Yo,g=Do(d-f),p=d>f;if(u||(u=t=w()),h<l&&(c=h,h=l,l=c),h>Uo)if(g>Xo-Uo)u.moveTo(h*Wo(f),h*Vo(f)),u.arc(0,0,h,f,d,!p),l>Uo&&(u.moveTo(l*Wo(d),l*Vo(d)),u.arc(0,0,l,d,f,p));else{var v,y,m=f,x=d,b=f,_=d,M=g,S=g,R=s.apply(this,arguments)/2,z=R>Uo&&(r?+r.apply(this,arguments):Ho(l*l+h*h)),C=Io(Do(h-l)/2,+i.apply(this,arguments)),O=C,A=C;if(z>Uo){var T=k(z/l*Vo(R)),E=k(z/h*Vo(R));(M-=2*T)>Uo?(T*=p?1:-1,b+=T,_-=T):(M=0,b=_=(f+d)/2),(S-=2*E)>Uo?(E*=p?1:-1,m+=E,x-=E):(S=0,m=x=(f+d)/2)}var j=h*Wo(m),P=h*Vo(m),F=l*Wo(_),L=l*Vo(_);if(C>Uo){var D=h*Wo(x),B=h*Vo(x),W=l*Wo(b),$=l*Vo(b);if(g<qo){var I=M>Uo?function(t,e,n,i,r,a,o,s){var u=n-t,c=i-e,l=o-r,h=s-a,f=(l*(e-a)-h*(t-r))/(h*u-l*c);return[t+f*u,e+f*c]}(j,P,W,$,D,B,F,L):[F,L],V=j-I[0],H=P-I[1],U=D-I[0],q=B-I[1],Y=1/Vo(function(t){return t>1?0:t<-1?qo:Math.acos(t)}((V*U+H*q)/(Ho(V*V+H*H)*Ho(U*U+q*q)))/2),X=Ho(I[0]*I[0]+I[1]*I[1]);O=Io(C,(l-X)/(Y-1)),A=Io(C,(h-X)/(Y+1))}}S>Uo?A>Uo?(v=N(W,$,j,P,h,A,p),y=N(D,B,F,L,h,A,p),u.moveTo(v.cx+v.x01,v.cy+v.y01),A<C?u.arc(v.cx,v.cy,A,Bo(v.y01,v.x01),Bo(y.y01,y.x01),!p):(u.arc(v.cx,v.cy,A,Bo(v.y01,v.x01),Bo(v.y11,v.x11),!p),u.arc(0,0,h,Bo(v.cy+v.y11,v.cx+v.x11),Bo(y.cy+y.y11,y.cx+y.x11),!p),u.arc(y.cx,y.cy,A,Bo(y.y11,y.x11),Bo(y.y01,y.x01),!p))):(u.moveTo(j,P),u.arc(0,0,h,m,x,!p)):u.moveTo(j,P),l>Uo&&M>Uo?O>Uo?(v=N(F,L,D,B,l,-O,p),y=N(j,P,W,$,l,-O,p),u.lineTo(v.cx+v.x01,v.cy+v.y01),O<C?u.arc(v.cx,v.cy,O,Bo(v.y01,v.x01),Bo(y.y01,y.x01),!p):(u.arc(v.cx,v.cy,O,Bo(v.y01,v.x01),Bo(v.y11,v.x11),!p),u.arc(0,0,l,Bo(v.cy+v.y11,v.cx+v.x11),Bo(y.cy+y.y11,y.cx+y.x11),p),u.arc(y.cx,y.cy,O,Bo(y.y11,y.x11),Bo(y.y01,y.x01),!p))):u.arc(0,0,l,_,b,p):u.lineTo(F,L)}else u.moveTo(0,0);if(u.closePath(),t)return u=null,t+""||null}var e=_,n=M,i=Lo(0),r=null,a=S,o=R,s=z,u=null;return t.centroid=function(){var t=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,i=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-qo/2;return[Wo(i)*t,Vo(i)*t]},t.innerRadius=function(n){return arguments.length?(e="function"==typeof n?n:Lo(+n),t):e},t.outerRadius=function(e){return arguments.length?(n="function"==typeof e?e:Lo(+e),t):n},t.cornerRadius=function(e){return arguments.length?(i="function"==typeof e?e:Lo(+e),t):i},t.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Lo(+e),t):r},t.startAngle=function(e){return arguments.length?(a="function"==typeof e?e:Lo(+e),t):a},t.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:Lo(+e),t):o},t.padAngle=function(e){return arguments.length?(s="function"==typeof e?e:Lo(+e),t):s},t.context=function(e){return arguments.length?(u=null==e?null:e,t):u},t};C.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Go=function(t){return new C(t)},Jo=function(){function t(t){var s,u,c,l=t.length,h=!1;for(null==r&&(o=a(c=w())),s=0;s<=l;++s)!(s<l&&i(u=t[s],s,t))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+e(u,s,t),+n(u,s,t));if(c)return o=null,c+""||null}var e=O,n=A,i=Lo(!0),r=null,a=Go,o=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:Lo(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Lo(+e),t):n},t.defined=function(e){return arguments.length?(i="function"==typeof e?e:Lo(!!e),t):i},t.curve=function(e){return arguments.length?(a=e,null!=r&&(o=a(r)),t):a},t.context=function(e){return arguments.length?(null==e?r=o=null:o=a(r=e),t):r},t},Qo=function(){function t(t){var e,l,h,f,d,g=t.length,p=!1,v=new Array(g),y=new Array(g);for(null==s&&(c=u(d=w())),e=0;e<=g;++e){if(!(e<g&&o(f=t[e],e,t))===p)if(p=!p)l=e,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),h=e-1;h>=l;--h)c.point(v[h],y[h]);c.lineEnd(),c.areaEnd()}p&&(v[e]=+n(f,e,t),y[e]=+r(f,e,t),c.point(i?+i(f,e,t):v[e],a?+a(f,e,t):y[e]))}if(d)return c=null,d+""||null}function e(){return Jo().defined(o).curve(u).context(s)}var n=O,i=null,r=Lo(0),a=A,o=Lo(!0),s=null,u=Go,c=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:Lo(+e),i=null,t):n},t.x0=function(e){return arguments.length?(n="function"==typeof e?e:Lo(+e),t):n},t.x1=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:Lo(+e),t):i},t.y=function(e){return arguments.length?(r="function"==typeof e?e:Lo(+e),a=null,t):r},t.y0=function(e){return arguments.length?(r="function"==typeof e?e:Lo(+e),t):r},t.y1=function(e){return arguments.length?(a=null==e?null:"function"==typeof e?e:Lo(+e),t):a},t.lineX0=t.lineY0=function(){return e().x(n).y(r)},t.lineY1=function(){return e().x(n).y(a)},t.lineX1=function(){return e().x(i).y(r)},t.defined=function(e){return arguments.length?(o="function"==typeof e?e:Lo(!!e),t):o},t.curve=function(e){return arguments.length?(u=e,null!=s&&(c=u(s)),t):u},t.context=function(e){return arguments.length?(null==e?s=c=null:c=u(s=e),t):s},t},Ko=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},ts=function(t){return t},es=Array.prototype.slice;E.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:T(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:T(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};P.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:j(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:j(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var ns=function t(e){function n(t){return new P(t,e)}return n.tension=function(e){return t(+e)},n}(0);F.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(t,e,n){var i=t._x1,r=t._y1,a=t._x2,o=t._y2;if(t._l01_a>Uo){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,r=(r*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>Uo){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*c+t._x1*t._l23_2a-e*t._l12_2a)/l,o=(o*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(i,r,a,o,t._x2,t._y2)}(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var is=function t(e){function n(t){return e?new F(t,e):new P(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:W(this,this._t0,B(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,W(this,B(this,n=D(this,t,e)),n);break;default:W(this,this._t0,n=D(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(I.prototype=Object.create($.prototype)).point=function(t,e){$.prototype.point.call(this,e,t)},V.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,a){this._context.bezierCurveTo(e,t,i,n,a,r)}},H.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=U(t),r=U(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};q.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var rs,as=function(t,e){if((r=t.length)>1)for(var n,i,r,a=1,o=t[e[0]],s=o.length;a<r;++a)for(i=o,o=t[e[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]},os=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n},ss=function(){function t(t){var a,o,s=e.apply(this,arguments),u=t.length,c=s.length,l=new Array(c);for(a=0;a<c;++a){for(var h,f=s[a],d=l[a]=new Array(u),g=0;g<u;++g)d[g]=h=[0,+r(t[g],f,g,t)],h.data=t[g];d.key=f}for(a=0,o=n(l);a<c;++a)l[o[a]].index=a;return i(l,o),l}var e=Lo([]),n=os,i=as,r=Y;return t.keys=function(n){return arguments.length?(e="function"==typeof n?n:Lo(es.call(n)),t):e},t.value=function(e){return arguments.length?(r="function"==typeof e?e:Lo(+e),t):r},t.order=function(e){return arguments.length?(n=null==e?os:"function"==typeof e?e:Lo(es.call(e)),t):n},t.offset=function(e){return arguments.length?(i=null==e?as:e,t):i},t},us=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]},cs=function(t){return(t=us(Math.abs(t)))?t[1]:NaN},ls=function(t,e){var n=us(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")},hs={"":function(t,e){t:for(var n,i=(t=t.toPrecision(e)).length,r=1,a=-1;r<i;++r)switch(t[r]){case".":a=n=r;break;case"0":0===a&&(a=r),n=r;break;case"e":break t;default:a>0&&(a=0)}return a>0?t.slice(0,a)+t.slice(n+1):t},"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return ls(100*t,e)},r:ls,s:function(t,e){var n=us(t,e);if(!n)return t+"";var i=n[0],r=n[1],a=r-(rs=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+us(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},fs=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;G.prototype=J.prototype,J.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var ds,gs,ps,vs=function(t){return t},ys=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],ms=function(t){function e(t){function e(t){var e,i,o,l=v,b=y;if("c"===p)b=m(t)+b,t="";else{var w=(t=+t)<0;if(t=m(Math.abs(t),g),w&&0==+t&&(w=!1),l=(w?"("===c?c:"-":"-"===c||"("===c?"":c)+l,b=b+("s"===p?ys[8+rs/3]:"")+(w&&"("===c?")":""),x)for(e=-1,i=t.length;++e<i;)if(48>(o=t.charCodeAt(e))||o>57){b=(46===o?r+t.slice(e+1):t.slice(e))+b,t=t.slice(0,e);break}}d&&!h&&(t=n(t,1/0));var k=l.length+t.length+b.length,_=k<f?new Array(f-k+1).join(s):"";switch(d&&h&&(t=n(_+t,_.length?f-b.length:1/0),_=""),u){case"<":t=l+t+b+_;break;case"=":t=l+_+t+b;break;case"^":t=_.slice(0,k=_.length>>1)+l+t+b+_.slice(k);break;default:t=_+l+t+b}return a(t)}var s=(t=G(t)).fill,u=t.align,c=t.sign,l=t.symbol,h=t.zero,f=t.width,d=t.comma,g=t.precision,p=t.type,v="$"===l?i[0]:"#"===l&&/[boxX]/.test(p)?"0"+p.toLowerCase():"",y="$"===l?i[1]:/[%p]/.test(p)?o:"",m=hs[p],x=!p||/[defgprs%]/.test(p);return g=null==g?p?6:12:/[gprs]/.test(p)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),e.toString=function(){return t+""},e}var n=t.grouping&&t.thousands?function(t,e){return function(n,i){for(var r=n.length,a=[],o=0,s=t[0],u=0;r>0&&s>0&&(u+s+1>i&&(s=Math.max(1,i-u)),a.push(n.substring(r-=s,r+s)),!((u+=s+1)>i));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}(t.grouping,t.thousands):vs,i=t.currency,r=t.decimal,a=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(t.numerals):vs,o=t.percent||"%";return{format:e,formatPrefix:function(t,n){var i=e((t=G(t),t.type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(cs(n)/3))),a=Math.pow(10,-r),o=ys[8+r/3];return function(t){return i(a*t)+o}}}};!function(t){ds=ms(t),gs=ds.format,ps=ds.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var xs=new Date,bs=new Date,ws=Q(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});ws.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Q(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):ws:null};var ks=6e4,_s=6048e5,Ms=(Q(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),Q(function(t){t.setTime(Math.floor(t/ks)*ks)},function(t,e){t.setTime(+t+e*ks)},function(t,e){return(e-t)/ks},function(t){return t.getMinutes()}),Q(function(t){var e=t.getTimezoneOffset()*ks%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),Q(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*ks)/864e5},function(t){return t.getDate()-1})),Ss=K(0),Rs=K(1),zs=(K(2),K(3),K(4)),Ns=(K(5),K(6),Q(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),Q(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));Ns.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Q(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};Q(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*ks)},function(t,e){return(e-t)/ks},function(t){return t.getUTCMinutes()}),Q(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()});var Cs=Q(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),Os=tt(0),As=tt(1),Ts=(tt(2),tt(3),tt(4)),Es=(tt(5),tt(6),Q(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Q(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));Es.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Q(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var js,Ps,Fs,Ls={"-":"",_:" ",0:"0"},Ds=/^\s*\d+/,Bs=/^%/,Ws=/[\\^$*+?|[\]().{}]/g;!function(t){js=rt(t),js.format,js.parse,Ps=js.utcFormat,Fs=js.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var $s="%Y-%m-%dT%H:%M:%S.%LZ",Is=(Date.prototype.toISOString||Ps($s),+new Date("2000-01-01T00:00:00.000Z")||Fs($s),Z());Is("d3-number",function(t,e,n){function i(t){return o(t)}function r(){i.locale({decimal:n||".",thousands:e||",",grouping:[3],currency:["$",""]})}var a=void 0,o=void 0;return i.locale=function(e){return a=ms(e),o=a.format(t),this},r(),i.format=function(t,i,o,s){return(o||s)&&(e=o,n=s,r()),a.format(t)(i)},i.pattern=function(e){return e&&(t=e,o=a.format(e)),t},i}),Is("d3-time",function(t){function e(t){return i(t)}var n=rt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),i=n.format(t);return e.format=function(t,e){return n.format(t)(e)},e.locale=function(){return n=rt.apply(void 0,arguments),i=n.format(t),this},e.parse=function(t,e){return n.parse(t)(e)},e.parsePattern=function(t){return n.parse(t)},e});var Vs={id:function(t){return t.source+"/"+t.title},key:function(t){return t.title},tags:function(t){return t.tags},min:function(t){return t.min},max:function(t){return t.max},type:function(t){return t.type},title:function(t){return t.title},values:function(t){return t.values},value:function(t){return t},label:function(t){return t},formatter:function(t){return t.formatter&&t.formatter()||Is("d3-number")("")}},Hs={diverging:function(t,e){if((s=t.length)>1)for(var n,i,r,a,o,s,u=0,c=t[e[0]].length;u<c;++u)for(a=o=0,n=0;n<s;++n)(r=(i=t[e[n]][u])[1]-i[0])>=0?(i[0]=a,i[1]=a+=r):r<0?(i[1]=o,i[0]=o+=r):i[0]=a},none:as,silhouette:function(t,e){if((n=t.length)>0){for(var n,i=0,r=t[e[0]],a=r.length;i<a;++i){for(var o=0,s=0;o<n;++o)s+=t[o][i][1]||0;r[i][1]+=r[i][0]=-s/2}as(t,e)}},expand:function(t,e){if((i=t.length)>0){for(var n,i,r,a=0,o=t[0].length;a<o;++a){for(r=n=0;n<i;++n)r+=t[n][a][1]||0;if(r)for(n=0;n<i;++n)t[n][a][1]/=r}as(t,e)}},wiggle:function(t,e){if((r=t.length)>0&&(i=(n=t[e[0]]).length)>0){for(var n,i,r,a=0,o=1;o<i;++o){for(var s=0,u=0,c=0;s<r;++s){for(var l=t[e[s]],h=l[o][1]||0,f=(h-(l[o-1][1]||0))/2,d=0;d<s;++d){var g=t[e[d]];f+=(g[o][1]||0)-(g[o-1][1]||0)}u+=h,c+=f*h}n[o-1][1]+=n[o-1][0]=a,u&&(a-=c/u)}n[o-1][1]+=n[o-1][0]=a,as(t,e)}}},Us={ascending:function(t){var e=t.map(X);return os(t).sort(function(t,n){return e[t]-e[n]})},insideout:function(t){var e,n,i=t.length,r=t.map(X),a=os(t).sort(function(t,e){return r[e]-r[t]}),o=0,s=0,u=[],c=[];for(e=0;e<i;++e)n=a[e],o<s?(o+=r[n],u.push(n)):(s+=r[n],c.push(n));return c.reverse().concat(u)},none:os,reverse:function(t){return os(t).reverse()}},qs=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Ys=function(t){return 1===t.length&&(t=function(t){return function(e,n){return qs(t(e),n)}}(t)),{left:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var a=i+r>>>1;t(e[a],n)<0?i=a+1:r=a}return i},right:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var a=i+r>>>1;t(e[a],n)>0?r=a:i=a+1}return i}}}(qs).right,Xs=function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(r);++i<r;)a[i]=t+i*n;return a},Zs=Math.sqrt(50),Gs=Math.sqrt(10),Js=Math.sqrt(2),Qs=function(t,e,n){var i,r,a,o,s=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(o=ge(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(r=Math.ceil(e-t+1));++s<r;)a[s]=(t+s)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(r=Math.ceil(t-e+1));++s<r;)a[s]=(t-s)/o;return i&&a.reverse(),a};pe.prototype=ve.prototype={constructor:pe,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Ks=ve.prototype;ye.prototype=function(t,e){var n=new ye;if(t instanceof ye)t.each(function(t){n.add(t)});else if(t){var i=-1,r=t.length;if(null==e)for(;++i<r;)n.add(t[i]);else for(;++i<r;)n.add(e(t[i],i,t))}return n}.prototype={constructor:ye,has:Ks.has,add:function(t){return t+="",this["$"+t]=t,this},remove:Ks.remove,clear:Ks.clear,values:Ks.keys,size:Ks.size,empty:Ks.empty,each:Ks.each};var tu=Array.prototype,eu=tu.map,nu=tu.slice,iu={name:"implicit"},ru=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t},au="\\s*([+-]?\\d+)\\s*",ou="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",su="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",uu=/^#([0-9a-f]{3})$/,cu=/^#([0-9a-f]{6})$/,lu=new RegExp("^rgb\\("+[au,au,au]+"\\)$"),hu=new RegExp("^rgb\\("+[su,su,su]+"\\)$"),fu=new RegExp("^rgba\\("+[au,au,au,ou]+"\\)$"),du=new RegExp("^rgba\\("+[su,su,su,ou]+"\\)$"),gu=new RegExp("^hsl\\("+[ou,su,su]+"\\)$"),pu=new RegExp("^hsla\\("+[ou,su,su,ou]+"\\)$"),vu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ru(we,ke,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),ru(ze,Re,be(we,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ze(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ze(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),ru(Ce,function(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Ce)return new Ce(t.h,t.s,t.l,t.opacity);if(t instanceof we||(t=ke(t)),!t)return new Ce;if(t instanceof Ce)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),o=NaN,s=a-r,u=(a+r)/2;return s?(o=e===a?(n-i)/s+6*(n<i):n===a?(i-e)/s+2:(e-n)/s+4,s/=u<.5?a+r:2-a-r,o*=60):s=u>0&&u<1?0:o,new Ce(o,s,u,t.opacity)}(t):new Ce(t,e,n,null==i?1:i)},be(we,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ce(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ce(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new ze(Oe(t>=240?t-240:t+120,r,i),Oe(t,r,i),Oe(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var yu=Math.PI/180,mu=180/Math.PI,xu=.95047,bu=1,wu=1.08883,ku=4/29,_u=6/29,Mu=3*_u*_u,Su=_u*_u*_u;ru(Te,function(t,e,n,i){return 1===arguments.length?Ae(t):new Te(t,e,n,null==i?1:i)},be(we,{brighter:function(t){return new Te(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Te(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=bu*je(t),e=xu*je(e),n=wu*je(n),new ze(Pe(3.2404542*e-1.5371385*t-.4985314*n),Pe(-.969266*e+1.8760108*t+.041556*n),Pe(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),ru(Le,function(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof Le)return new Le(t.h,t.c,t.l,t.opacity);t instanceof Te||(t=Ae(t));var e=Math.atan2(t.b,t.a)*mu;return new Le(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Le(t,e,n,null==i?1:i)},be(we,{brighter:function(t){return new Le(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Le(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Ae(this).rgb()}}));var Ru=-.29227,zu=-.90649,Nu=1.97294,Cu=Nu*zu,Ou=1.78277*Nu,Au=1.78277*Ru- -.14861*zu;ru(Be,De,be(we,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Be(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Be(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*yu,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new ze(255*(e+n*(-.14861*i+1.78277*r)),255*(e+n*(Ru*i+zu*r)),255*(e+n*(Nu*i)),this.opacity)}}));var Tu=function(t){return function(){return t}},Eu=function t(e){function n(t,e){var n=i((t=Re(t)).r,(e=Re(e)).r),r=i(t.g,e.g),a=i(t.b,e.b),o=Ie(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=r(e),t.b=a(e),t.opacity=o(e),t+""}}var i=$e(e);return n.gamma=t,n}(1),ju=function(t,e){return t=+t,e-=t,function(n){return t+e*n}},Pu=function(t,e){var n,i={},r={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(n in e)n in t?i[n]=Du(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}},Fu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Lu=new RegExp(Fu.source,"g"),Du=function(t,e){var n,i=typeof e;return null==e||"boolean"===i?Tu(e):("number"===i?ju:"string"===i?(n=ke(e))?(e=n,Eu):function(t,e){var n,i,r,a=Fu.lastIndex=Lu.lastIndex=0,o=-1,s=[],u=[];for(t+="",e+="";(n=Fu.exec(t))&&(i=Lu.exec(e));)(r=i.index)>a&&(r=e.slice(a,r),s[o]?s[o]+=r:s[++o]=r),(n=n[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,u.push({i:o,x:ju(n,i)})),a=Lu.lastIndex;return a<e.length&&(r=e.slice(a),s[o]?s[o]+=r:s[++o]=r),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,i=0;i<e;++i)s[(n=u[i]).i]=n.x(t);return s.join("")})}:e instanceof ke?Eu:e instanceof Date?function(t,e){var n=new Date;return t=+t,e-=t,function(i){return n.setTime(t+e*i),n}}:Array.isArray(e)?function(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,a=new Array(r),o=new Array(i);for(n=0;n<r;++n)a[n]=Du(t[n],e[n]);for(;n<i;++n)o[n]=e[n];return function(t){for(n=0;n<r;++n)o[n]=a[n](t);return o}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Pu:ju)(t,e)},Bu=function(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}};Ve(function(t,e){var n=e-t;return n?We(t,n>180||n<-180?n-360*Math.round(n/360):n):Tu(isNaN(t)?e:t)});var Wu=Ve(Ie),$u=function(t){return function(){return t}},Iu=function(t){return+t},Vu=[0,1],Hu=function(t,e,n){var i,r=t[0],a=t[t.length-1],o=function(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/r;return a>=Zs?r*=10:a>=Gs?r*=5:a>=Js&&(r*=2),e<t?-r:r}(r,a,null==e?10:e);switch((n=G(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(r),Math.abs(a));return null!=n.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(cs(e)/3)))-cs(Math.abs(t)))}(o,s))||(n.precision=i),ps(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,cs(e)-cs(t))+1}(o,Math.max(Math.abs(r),Math.abs(a))))||(n.precision=i-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(i=function(t){return Math.max(0,-cs(Math.abs(t)))}(o))||(n.precision=i-2*("%"===n.type))}return gs(n)},Uu=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})};Uu("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Uu("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Uu("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Uu("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Wu(De(300,.5,0),De(-240,.5,1));Wu(De(-100,.75,.35),De(80,1.5,.8)),Wu(De(260,.75,.35),De(80,1.5,.8)),De();var qu=["min","max","expand","include","invert"],Yu=["padding","paddingOuter","paddingInner","align","invert","maxPxStep"],Xu=function(t){return t.min()},Zu=function(t){return t.max()},Gu=Z();Gu("linear",an),Gu("band",on),Gu("h-band",un),Gu("sequential-color",ln),Gu("threshold-color",function(){function t(t){return r(t)?NaN:a(t)}var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).theme,a=Xe();Object.keys(a).forEach(function(e){return t[e]=a[e]});var o=cn(e,n.fields),s=To(o,2),u=s[0],c=s[1],l=e.domain?e.domain.length:-1,h=i.palette("sequential",l>0?l:2),f=e.range||h,d=e.domain||(e.nice?function(t,e,n){var i=2===t.length?10:Math.max(1,t.length),r=Ye().domain([e,n]).nice([i]).ticks([i]);if(!t||!t.length)return r;for(var a=Math.max(0,t.length-1);r.length>a;)r[0]-e<=n-r[r.length-1]?r.shift():r.pop();return r}(f,u,c):[u+(c-u)/2]);return f.length>d.length+1?d=function(t,e,n){var i=t.length;if(2===i)return[e+(n-e)/2];for(var r=[],a=(n-e)/i,o=1;o<i;o++)r.push(e+a*o);return r}(f,u,c):f.length<d.length+1&&(f=function(t,e,n,i){n=t[0],i=t&&t.length>=2?t[t.length-1]:i;var r=ln().domain([n,i]).range(e);return[n].concat(Eo(function(t){for(var e=[],n=0;n<t.length-1;n++)e.push((t[n]+t[n+1])/2);return e}(t)),[i]).map(function(t){return r(t)})}(d,f,u,c)),t.data=function(){return n},t.range(f),t.range(e.invert?t.range().reverse():t.range()),t.domain(d),t}),Gu("categorical-color",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).theme,i=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=me(),i="function"==typeof t.value?t.value:function(t){return t.value},r="function"==typeof t.label?t.label:function(t){return t.label},a=e.items||[],o={},s=[],u=[],c=0;c<a.length;c++){var l=i(a[c]);-1===s.indexOf(l)&&(s.push(l),u.push(r(a[c])),o[l]=c)}return n.data=function(){return e},n.labels=function(){return u},n.label=function(t){var e=s.indexOf(t);return u[e]},n.datum=function(t){return a[o[t]]},t.range&&n.range(t.range),t.domain?n.domain(t.domain):n.domain(s),n}(t,e),r=void 0;if(r=t.range?t.range.slice():n?n.palette("categorical",i.domain().length).slice():[],t.unknown)i.unknown(t.unknown);else if(n&&n.palette("unknown")){var a=n.palette("unknown");i.unknown(a[0])}if(t.explicit&&t.explicit.domain){var o=i.domain().slice(),s=t.explicit.domain||[];if(s.length){for(var u=Math.floor(o.length/r.length),c=1;c<u+1;c*=2)r=r.concat(r);var l=t.explicit.range||[];s.map(function(t,e){return[o.indexOf(t),t,l[e]]}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){var e=o.indexOf(t[1]);-1!==e&&r.splice(e,0,t[2])}),r.length=o.length}}return i.range(r),i});var Ju={};Ju.isObject=function(t){return"object"==typeof t&&null!==t},Ju.isNumber=function(t){return"number"==typeof t},Ju.isUndefined=function(t){return void 0===t},Ju.isFunction=function(t){return"function"==typeof t};var Qu=fn;fn.EventEmitter=fn,fn.prototype._events=void 0,fn.prototype._maxListeners=void 0,fn.defaultMaxListeners=10,fn.init=function(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0},fn.prototype.setMaxListeners=function(t){if(!Ju.isNumber(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},fn.prototype.emit=function(t){var e,n,i,r,a,o;if(this._events||(this._events={}),"error"===t&&!this._events.error)throw(e=arguments[1])instanceof Error?e:Error('Uncaught, unspecified "error" event.');if(n=this._events[t],Ju.isUndefined(n))return!1;if(Ju.isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,r=new Array(i-1),a=1;a<i;a++)r[a-1]=arguments[a];n.apply(this,r)}else if(Ju.isObject(n)){for(i=arguments.length,r=new Array(i-1),a=1;a<i;a++)r[a-1]=arguments[a];for(i=(o=n.slice()).length,a=0;a<i;a++)o[a].apply(this,r)}return!0},fn.prototype.addListener=function(t,e){if(!Ju.isFunction(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,Ju.isFunction(e.listener)?e.listener:e),this._events[t]?Ju.isObject(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,Ju.isObject(this._events[t])&&!this._events[t].warned){var n;(n=Ju.isUndefined(this._maxListeners)?fn.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,Ju.isFunction(console.error)&&console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),Ju.isFunction(console.trace)&&console.trace())}return this},fn.prototype.on=fn.prototype.addListener,fn.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!Ju.isFunction(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},fn.prototype.removeListener=function(t,e){var n,i,r,a;if(!Ju.isFunction(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],r=n.length,i=-1,n===e||Ju.isFunction(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(Ju.isObject(n)){for(a=r;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){i=a;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},fn.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],Ju.isFunction(n))this.removeListener(t,n);else if(Array.isArray(n))for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},fn.prototype.listeners=function(t){return this._events&&this._events[t]?Ju.isFunction(this._events[t])?[this._events[t]]:this._events[t].slice():[]},fn.listenerCount=function(t,e){return t._events&&t._events[e]?Ju.isFunction(t._events[e])?1:t._events[e].length:0};var Ku={mixin:function(t){return Object.keys(Qu.prototype).forEach(function(e){t[e]=Qu.prototype[e]}),Qu.init(t),t}},tc=(Z(),Z()),ec=[],nc=(function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),2*Math.PI),ic=(function t(e,n){function i(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}var r=Math.asin(1/(e=Math.max(1,e)))*(n/=nc);return i.amplitude=function(e){return t(e,n*nc)},i.period=function(n){return t(e,n)},i}(1,.3),function t(e,n){function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}var r=Math.asin(1/(e=Math.max(1,e)))*(n/=nc);return i.amplitude=function(e){return t(e,n*nc)},i.period=function(n){return t(e,n)},i}(1,.3)),rc=(function t(e,n){function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}var r=Math.asin(1/(e=Math.max(1,e)))*(n/=nc);return i.amplitude=function(e){return t(e,n*nc)},i.period=function(n){return t(e,n)},i}(1,.3),{fontFamily:"Arial",fontSize:"13px",color:"#595959",backgroundColor:"#ffffff",stroke:"#000000",strokeWidth:0,$fill:"#333333"}),ac=/^\$/,oc={normalizeSettings:function(t,e,n){var i=ko({},t),r=ko({},e);return Object.keys(i).forEach(function(t){r[t]={};var a=i[t],o=void 0===a?"undefined":So(a);if("function"==typeof a)r[t].fn=a;else if(Nn(a)){var s=e[t];"string"==typeof s&&ac.test(s)&&(s=rc[s]);var u=void 0===s?"undefined":So(s);r[t]="undefined"===u?a:u===o?a:s}else a&&"object"===(void 0===a?"undefined":So(a))&&("function"==typeof a.fn&&(r[t].fn=a.fn),void 0!==a.scale&&(r[t].scale=n.scale(a.scale)),"string"==typeof a.ref&&(r[t].ref=a.ref))}),Object.keys(e).forEach(function(t){if(!(t in i)){var n=e[t];"string"===(void 0===n?"undefined":So(n))&&ac.test(n)?r[t]=rc[n]:r[t]=n}}),r},resolveForItem:function(t,e,n){for(var i={},r=Object.keys(e),a=r.length,o=t,s=0;s<a;s++){var u=r[s],c=e[u],l=void 0!==c,h=l&&"string"==typeof c.ref,f=l&&u in t,d=h?t[c.ref]:f?t[u]:o;if(Nn(c))i[u]=c;else if(l&&c.fn){var g={data:t};c.scale&&(g.scale=c.scale);var p=n?n.indexOf(t):-1;i[u]=c.fn.call(g,h&&t?t[c.ref]:void 0,p,n)}else l&&c.scale&&d?(i[u]=c.scale(d.value),c.scale.bandwidth&&(i[u]+=c.scale.bandwidth()/2)):i[u]=h?d.value:c}return i},updateScaleSize:Cn},sc=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oc,n={};return{resolve:function(i){var r=i.data,a=i.settings,o=i.defaults,s=void 0===o?{}:o,u=i.scaled,c=n.norm=e.normalizeSettings(a,s,t.chart);u&&Object.keys(u).forEach(function(t){c[t]&&e.updateScaleSize(c,t,u[t])});var l=[];if(!r||!Array.isArray(r.items)){var h=e.resolveForItem(r,n.norm);return{settings:n.norm,item:h}}for(var f=0,d=r.items.length;f<d;f++){var g=e.resolveForItem(r.items[f],n.norm,r.items);g.data=r.items[f],l.push(g)}return{settings:n.norm,items:l}}}},uc=function(t){return["on","preferredSize","created","beforeMount","mounted","resize","beforeUpdate","updated","beforeRender","render","beforeDestroy","destroyed","defaultSettings","data","settings","formatter","scale","chart","dockConfig","mediator","style","resolver","registries"].some(function(e){return e===t})},cc=1e-12,lc=function(){function t(){Ro(this,t)}return zo(t,null,[{key:"testCirclePoint",value:function(t,e){if(Kn(t))return!1;return Un({x:t.cx,y:t.cy},e)<=Math.pow(t.r,2)}},{key:"testCircleRect",value:function(t,e){if(Qn(e)||Kn(t))return!1;var n=e.width/2,i=e.height/2,r=e.x+n,a=e.y+i,o=t.r,s=t.cx,u=t.cy,c=Math.abs(s-r),l=Math.abs(u-a);if(c>n+o||l>i+o)return!1;if(c<=n||l<=i)return!0;return Math.pow(c-n,2)+Math.pow(l-i,2)<=Math.pow(o,2)}},{key:"testCircleLine",value:function(e,n){if(Kn(e)||Jn(n))return!1;var i=o(n),r=To(i,2),a=r[0],s=r[1];if(t.testCirclePoint(e,a)||t.testCirclePoint(e,s))return!0;var u={x:e.cx,y:e.cy},c=Zn(a,s,u);return Un(c,u)<=Math.pow(e.r,2)&&Gn(a,s,c)}},{key:"testCircleCircle",value:function(t,e){if(Kn(t)||Kn(e))return!1;var n=t.cx-e.cx,i=t.cy-e.cy;return Math.pow(n,2)+Math.pow(i,2)<=Math.pow(t.r+e.r,2)}},{key:"testCirclePolygon",value:function(e,n){if(ti(n)||Kn(e))return!1;var i={x:e.cx,y:e.cy};if(t.testPolygonPoint(n,i))return!0;for(var r=n.edges.length,a=0;a<r;a++){var o=c(n.edges[a]);if(t.testCircleLine(e,o))return!0}return!1}},{key:"testPolygonPoint",value:function(e,n){if(ti(e)||!t.testRectPoint(e.boundingRect(),n))return!1;for(var i=!0,r=e.vertices.length,a={x:e.xMin-1,y:n.y},o=0;o<r-1;o++){var s=c(e.edges[o]);s.y1<n.y&&s.y2<n.y||s.y1>n.y&&s.y2>n.y||(i=t.testLineLine(s,c([a,n]))?!i:i)}return!i}},{key:"testPolygonLine",value:function(e,n){if(ti(e))return!1;for(var i=0,r=e.edges.length;i<r;i++){var a=c(e.edges[i]);if(t.testLineLine(n,a))return!0}var s=o(n),u=To(s,2),l=u[0],h=u[1];return t.testPolygonPoint(e,l)||t.testPolygonPoint(e,h)}},{key:"testPolygonRect",value:function(e,n){if(ti(e))return!1;for(var i=0,r=e.edges.length;i<r;i++){var a=c(e.edges[i]);if(t.testRectLine(n,a))return!0}var o=s(n),u=To(o,4),l=u[0],h=u[1],f=u[2],d=u[3];return t.testPolygonPoint(e,l)||t.testPolygonPoint(e,h)||t.testPolygonPoint(e,f)||t.testPolygonPoint(e,d)}},{key:"testRectRect",value:function(t,e){return!Qn(t)&&!Qn(e)&&(t.x<=e.x+e.width&&e.x<=t.x+t.width&&t.y<=e.y+e.height&&e.y<=t.y+t.height)}},{key:"testRectPoint",value:function(t,e){return!Qn(t)&&(e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height)}},{key:"testRectLine",value:function(e,n){if(Jn(n)||Qn(e))return!1;var i=o(n),r=To(i,2),a=r[0],u=r[1];if(t.testRectPoint(e,a)||t.testRectPoint(e,u))return!0;for(var l=s(e),h=l.length,f=0;f<h;f++){var d=c([l[f],l[3!==f?f+1:0]]);if(t.testLineLine(d,n))return!0}return!1}},{key:"testLineLine",value:function(t,e){var n=o(t),i=To(n,2),r=i[0],a=i[1],s=o(e),u=To(s,2),c=u[0],l=u[1],h=Vn(a,r),f=Hn(a,r),d=Vn(l,c),g=Hn(l,c),p=Vn(r,c),v=Hn(r,c),y=g*h-d*f,m=d*v-g*p,x=h*v-f*p,b=void 0,w=void 0;if(0===h&&0===f)return!1;if(0===d&&0===g)return!1;if(0===y){if(0===m&&0===x){if(0===h){if(0===f)return r.x===a.x&&r.y===a.y;b=Hn(c,r)/f,w=Hn(l,r)/f}else b=(c.x-r.x)/h,w=(l.x-r.x)/h;return!(b<0&&w<0||b>1&&w>1)}return!1}var k=m/y;return y=x/y,k>=0&&k<=1&&y>=0&&y<=1}},{key:"testLinePoint",value:function(t,e){if(Jn(t))return!1;var n=o(t),i=To(n,2);return Gn(i[0],i[1],e)}}]),t}(),hc=/^\$/,fc="@extend",dc=function(t){return["on","created","beforeMount","mounted","resize","beforeUpdate","updated","beforeRender","render","beforeDestroy","destroyed","data","settings"].some(function(e){return e===t})};ai.mixin=function(t){Mo.push(t)};var gc=function(t){var e=Z(t);return e.prio=function(t){return t?e.default(t[0]):[e.default()]},e.types=function(){return e.getKeys()},e},pc=Z(),vc=function(t){return t.filter(function(t){return"number"==typeof t&&!isNaN(t)})},yc=function(t){return t.reduce(function(t,e){return t+e},0)},mc={first:function(t){return t[0]},last:function(t){return t[t.length-1]},min:function(t){var e=vc(t);return e.length?Math.min.apply(null,e):NaN},max:function(t){var e=vc(t);return e.length?Math.max.apply(null,e):NaN},sum:function(t){var e=vc(t);return e.length?e.reduce(function(t,e){return t+e},0):NaN},avg:function(t){var e=vc(t),n=e.length;return n?yc(e)/n:NaN}},xc={numeric:function(t){return t.filter(function(t){return"number"==typeof t&&!isNaN(t)})}};fi.util={normalizeConfig:ui,collect:ci,track:li};var bc=Z();bc.default("matrix"),bc("matrix",fi),bc("default",fi);var wc=Z();wc("native",function(t,e,n){function i(){"function"==typeof s.enable&&(s.enable=s.enable.bind(a)()),s.enable&&Object.keys(s.events).forEach(function(t){var e=s.events[t].bind(a);n.addEventListener(t,e),o.push({key:t,listener:e})})}function r(){o.forEach(function(t){var e=t.key,i=t.listener;n.removeEventListener(e,i)}),o=[]}var a={chart:t,mediator:e,element:n},o=[],s=void 0,u=void 0,c=!0;return{get key(){return u},set:function(t){!function(t){u=t.key,(s=t).events=s.events||[],void 0===s.enable&&(s.enable=!0)}(t),r(),c&&i()},off:function(){c=!1,r()},on:function(){c=!0,0===o.length&&i()},destroy:function(){r(),a=null,s=null}}});var kc={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},_c=/([astvzqmhlc])([^astvzqmhlc]*)/gi,Mc=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;"undefined"!=typeof window&&function(t){function e(t){this.segments=[],t&&(this.segments=di(t))}function n(t,e){var n=void 0,i=void 0,r=void 0,a=void 0,o=void 0,s=void 0,u=void 0,c=void 0,l=void 0,h=void 0,f=void 0,d=void 0,g=void 0,p=void 0,v=void 0,y=void 0,m={x:0,y:0};"S"!==f&&"s"!==f&&"C"!==f&&"c"!==f&&(g=null,p=null),"T"!==f&&"t"!==f&&"Q"!==f&&"q"!==f&&(v=null,y=null),t.beginPath();for(var x=0;x<e.length;++x){var b=e[x];switch(f=b[0]){case"m":case"M":"m"===f?(u+=b[1],c+=b[2]):(u=b[1],c=b[2]),t.moveTo(u,c);break;case"l":case"L":"l"===f?(u+=b[1],c+=b[2]):(u=b[1],c=b[2]),t.lineTo(u,c);break;case"H":u=b[1],t.lineTo(u,c);break;case"h":u+=b[1],t.lineTo(u,c);break;case"V":c=b[1],t.lineTo(u,c);break;case"v":c+=b[1],t.lineTo(u,c);break;case"a":case"A":"a"===f?(u+=b[6],c+=b[7]):(u=b[6],c=b[7]),l=b[1],r=b[4],a=b[5],pi(o={x:u,y:c},-m.x,-m.y),gi(o,-(s=Math.atan2(o.y,o.x))),h=o.x/2,(d={x:0,y:0}).x=o.x/2,d.y=a&&!r||!a&&r?Math.sqrt(l*l-h*h):-Math.sqrt(l*l-h*h),i=Math.atan2(-d.y,-d.x),n=Math.atan2(o.y-d.y,o.x-d.x),i+=s,n+=s,gi(o,s),gi(d,s),pi(o,m.x,m.y),pi(d,m.x,m.y),t.arc(d.x,d.y,l,i,n,!a);break;case"C":g=b[3],p=b[4],u=b[5],c=b[6],t.bezierCurveTo(b[1],b[2],g,p,u,c);break;case"c":t.bezierCurveTo(b[1]+u,b[2]+c,b[3]+u,b[4]+c,b[5]+u,b[6]+c),g=b[3]+u,p=b[4]+c,u+=b[5],c+=b[6];break;case"S":null!==g&&null!==g||(g=u,p=c),t.bezierCurveTo(2*u-g,2*c-p,b[1],b[2],b[3],b[4]),g=b[1],p=b[2],u=b[3],c=b[4];break;case"s":null!==g&&null!==g||(g=u,p=c),t.bezierCurveTo(2*u-g,2*c-p,b[1]+u,b[2]+c,b[3]+u,b[4]+c),g=b[1]+u,p=b[2]+c,u+=b[3],c+=b[4];break;case"Q":v=b[1],y=b[2],u=b[3],c=b[4],t.quadraticCurveTo(v,y,u,c);break;case"q":v=b[1]+u,y=b[2]+c,u+=b[3],c+=b[4],t.quadraticCurveTo(v,y,u,c);break;case"T":null!==v&&null!==v||(v=u,y=c),v=2*u-v,y=2*c-y,u=b[1],c=b[2],t.quadraticCurveTo(v,y,u,c);break;case"t":null!==v&&null!==v||(v=u,y=c),v=2*u-v,y=2*c-y,u+=b[1],c+=b[2],t.quadraticCurveTo(v,y,u,c);break;case"z":case"Z":t.closePath()}m.x=u,m.y=c}}if(t&&(!t.Path2D||!function(t){var e=t.document.createElement("canvas").getContext("2d"),n=new t.Path2D("M0 0 L1 1");return e.strokeStyle="red",e.lineWidth=1,e.stroke(n),255===e.getImageData(0,0,1,1).data[0]}(t))){e.prototype.moveTo=function(t,e){this.segments.push(["M",t,e])},e.prototype.lineTo=function(t,e){this.segments.push(["L",t,e])},e.prototype.arc=function(t,e,n,i,r,a){this.segments.push(["AC",t,e,n,i,r,!!a])},e.prototype.closePath=function(){this.segments.push(["Z"])},e.prototype.bezierCurveTo=function(t,e,n,i,r,a){this.segments.push(["C",t,e,n,i,r,a])},e.prototype.quadraticCurveTo=function(t,e,n,i){this.segments.push(["Q",t,e,n,i])};var i=t.CanvasRenderingContext2D.prototype.fill,r=t.CanvasRenderingContext2D.prototype.stroke;t.CanvasRenderingContext2D.prototype.fill=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var a="nonzero";0===e.length||1===e.length&&"string"==typeof e[0]?i.apply(this,e):(2===arguments.length&&(a=e[1]),n(this,e[0].segments),i.call(this,a))},t.CanvasRenderingContext2D.prototype.stroke=function(t){t?(n(this,t.segments),r.call(this)):r.call(this)},t.Path2D=e}}(window);var Sc={line:{show:!0,stroke:"#000",strokeWidth:1},median:{show:!0,stroke:"#000",strokeWidth:1},whisker:{show:!0,stroke:"#000",strokeWidth:1,fill:"",type:"line",width:1},box:{show:!0,fill:"#fff",stroke:"#000",strokeWidth:1,width:1,maxWidthPx:100,minWidthPx:1,minHeightPx:1}},Rc=Object.keys(Sc),zc={require:["chart","resolver"],defaultSettings:{settings:{},data:{},style:{box:"$shape",line:"$shape-guide",whisker:"$shape-guide",median:"$shape-guide--inverted"}},created:function(){this.rect={x:0,y:0,width:0,height:0},this.state={}},beforeRender:function(t){this.rect=t.size},render:function(t){var e=t.data,n=this.rect,r=n.width,a=n.height,o="horizontal"===this.settings.settings.orientation,s=this.style,u=this.resolver,c=function(t){var e=t.keys,n=t.data,i=t.defaultSettings,r=t.style,a=t.settings,o=t.width,s=t.height,u=t.resolver,c=ko(!0,{},i||{},r||{}),l={major:"vertical"===a.orientation?s:o,minor:"vertical"===a.orientation?o:s};if(!Array.isArray(e)||!n||!Array.isArray(n.items))return[];for(var h=void 0,f={},d=u.resolve({data:n,defaults:c,settings:a,scaled:l}),g=0,p=e.length;g<p;g++){f[h=e[g]]=u.resolve({data:n,defaults:c[h],settings:a[h],scaled:l}).items||[];for(var v=0,y=f[h].length;v<y;v++)d.items[v][h]=f[h][v]}return d}({keys:Rc,data:e,defaultSettings:Sc,style:s,settings:this.settings.settings,width:r,height:a,resolver:u}),l=c.settings,h=c.items,f=this.settings.settings.major?this.settings.settings.major.ref||"":"";return function(t){var e=t.items,n=t.settings,r=t.width,a=t.height,o=t.flipXY,s=t.majorStartRef,u=t.majorEndRef;if(!(n&&n.major&&n.major.scale&&n.minor&&n.minor.scale))return[];for(var c=[],l=n.major.scale,h=n.minor.scale,f=0,d=e.length;f<d;f++){var g=e[f].data,p=[],v=e[f].major||e[f].majorStart;s&&(v=l&&g[s]?l(g[s].value):v);var y=l&&g[u]?l(g[u].value):null,m=0;l.bandwidth?v-=(m=l.bandwidth())/2:m=y-v;var x=ko({},e[f],{major:v,majorEnd:y,min:h&&"min"in g?h(g.min.value):null,max:h&&"max"in g?h(g.max.value):null,start:h&&"start"in g?h(g.start.value):null,end:h&&"end"in g?h(g.end.value):null,med:h&&"med"in g?h(g.med.value):null}),b=m*x.box.width,w=(m-b)/2,k=w+x.major+b/2,_=r,M=a;if(x.box.show&&i(x.start)&&i(x.end)&&p.push(yi({item:x,boxWidth:b,boxPadding:w,rendwidth:_,rendheight:M,flipXY:o})),x.line.show&&i(x.min)&&i(x.start)&&p.push(mi({item:x,from:x.min,to:x.start,boxCenter:k,rendwidth:_,rendheight:M,flipXY:o})),x.line.show&&i(x.max)&&i(x.end)&&p.push(mi({item:x,from:x.max,to:x.end,boxCenter:k,rendwidth:_,rendheight:M,flipXY:o})),x.median.show&&i(x.med)&&p.push(xi({item:x,key:"median",position:x.med,width:b,boxCenter:k,rendwidth:_,rendheight:M,flipXY:o})),x.whisker.show){var S=b*x.whisker.width;i(x.min)&&p.push(xi({item:x,key:"whisker",position:x.min,width:S,boxCenter:k,rendwidth:_,rendheight:M,flipXY:o})),i(x.max)&&p.push(xi({item:x,key:"whisker",position:x.max,width:S,boxCenter:k,rendwidth:_,rendheight:M,flipXY:o}))}var R={type:"container",data:g,collider:{type:"bounds"},children:p};c.push(R)}return c}({items:h,settings:l,width:r,height:a,flipXY:o,majorStartRef:"object"===(void 0===f?"undefined":So(f))?this.settings.settings.major.ref.start:null,majorEndRef:"object"===(void 0===f?"undefined":So(f))?this.settings.settings.major.ref.end:null})}},Nc={fill:"fill",stroke:"stroke",opacity:"opacity",strokeWidth:"stroke-width",fontFamily:"font-family",fontSize:"font-size",baseline:"dominant-baseline",dominantBaseline:"dominant-baseline",anchor:"text-anchor",textAnchor:"text-anchor",maxWidth:"maxWidth",transform:"transform",strokeDasharray:"stroke-dasharray",id:"id"},Cc={up:0,down:180,left:90,right:-90},Oc=Z();Oc.add("circle",function(t){return{type:"circle",fill:"black",cx:t.x,cy:t.y,r:t.size/2,collider:{type:"circle"}}}),Oc.add("diamond",function(t){var e=t.size,n=t.x-e/2,i=t.y-e/2;return{type:"path",fill:"black",d:bi([{x:n,y:i+e/2},{x:n+e/2,y:i},{x:n+e,y:i+e/2},{x:n+e/2,y:i+e},{x:n,y:i+e/2}])}}),Oc.add("saltire",function(t){var e=ki(45),n=t.size/2,i=isNaN(t.width)?n/2:t.width,r=Math.min(i,n),a=t.size,o=Math.sin(Math.asin(-e))*(r/2);a+=2*(n/Math.sin(-e)-n),a-=2*o;var s={x:t.x,y:t.y};return{type:"path",fill:"black",d:bi(wi(t.x,t.y,a,r).map(function(t){return Xn(t,e,s)}))}}),Oc.add("square",function(t){var e=t.size;return{type:"rect",fill:"black",x:t.x-e/2,y:t.y-e/2,width:e,height:e}}),Oc.add("triangle",function(t){var e=t.size,n={x:t.x,y:t.y},i=Cc[t.direction]||0,r=e/2,a=t.x-r,o=t.y-r,s=[{x:a,y:o+e},{x:a+r,y:o},{x:a+e,y:o+e},{x:a,y:o+e}],u=ki(i);return s=s.map(function(t){return Xn(t,u,n)}),{type:"path",fill:"black",d:bi(s)}}),Oc.add("line",function(t){var e="vertical"===t.direction,n=t.size/2,i=t.x,r=t.y;return{type:"line",stroke:"black",strokeWidth:1,x1:i-(e?0:n),y1:r-(e?n:0),x2:i+(e?0:n),y2:r+(e?n:0)}}),Oc.add("star",function(t){for(var e=t.size,n=[],i=e/2,r=t.points||5,a=Math.min(t.innerRadius||e/2,e)/2,o=isNaN(t.startAngle)?90:t.startAngle,s=360/r,u=1;u<=r;u++){var c=s*u+o,l=ki(c),h=ki(c+s/2),f=Math.sin(l),d=Math.cos(l),g=Math.sin(h),p=Math.cos(h);n.push({x:t.x+d*i,y:t.y+f*i}),n.push({x:t.x+p*a,y:t.y+g*a})}return{type:"path",fill:"black",d:bi(n)}}),Oc.add("n-polygon",function(t){for(var e=[],n=t.size/2,i=Math.max(isNaN(t.sides)?6:t.sides,3),r=360/i,a=isNaN(t.startAngle)?0:t.startAngle,o=1;o<=i;o++){var s=ki(r*o+a),u=Math.sin(s),c=Math.cos(s);e.push({x:t.x+c*n,y:t.y+u*n})}return{type:"path",fill:"black",d:bi(e)}}),Oc.add("cross",function(t){var e=t.x,n=t.y,i=t.size/2,r=isNaN(t.width)?i/2:t.width,a=Math.min(r,i);return{type:"path",fill:"black",d:bi(wi(e,n,t.size,a))}}),Oc.add("bar",function(t){var e={x:t.x,y:t.y},n="vertical"===t.direction,i=t.size/2,r=i/2/2,a=[{x:e.x-i,y:e.y+r},{x:e.x-i,y:e.y-r},{x:e.x+i,y:e.y-r},{x:e.x+i,y:e.y+r}];if(n){var o=ki(90);a=a.map(function(t){return Xn(t,o,e)})}var s=u(a);return s.type="rect",s.fill="black",s.collider={type:"rect"},s});var Ac={errorShape:{shape:"saltire",width:2,size:.5,fill:"#333",stroke:"#333",strokeWidth:0}},Tc={shape:"circle",label:"",fill:"#333",stroke:"#ccc",strokeWidth:0,opacity:1,x:.5,y:.5,size:1,strokeDasharray:""},Ec={maxPx:1e4,minPx:1,maxRelExtent:.1,minRelExtent:.01,maxRelDiscrete:1,minRelDiscrete:.1},jc={require:["chart","resolver"],defaultSettings:{settings:{},data:{},animations:{enabled:!1,trackBy:function(t){return t.data.value}},style:{item:"$shape"}},created:function(){this.rect={x:0,y:0,width:0,height:0}},beforeRender:function(t){this.rect=t.size},render:function(t){var e=t.data,n=this.resolver.resolve({data:e,defaults:ko({},Tc,this.style.item),settings:this.settings.settings,scaled:{x:this.rect.width,y:this.rect.height}}),i=this.rect,a=i.width,o=i.height,s=ko({},Ec,this.settings.settings.sizeLimits),u=n.items,c=function(t,e,n,i,r){var a=Si(t?t.scale:void 0,n),o=Si(e?e.scale:void 0,i),s=Math.min(a.value*r[a.isBandwidth?"maxRelDiscrete":"maxRelExtent"],o.value*r[o.isBandwidth?"maxRelDiscrete":"maxRelExtent"]),u=Math.min(a.value*r[a.isBandwidth?"minRelDiscrete":"minRelExtent"],o.value*r[o.isBandwidth?"minRelDiscrete":"minRelExtent"]);return{min:Math.max(1,Math.floor(u)),max:Math.max(1,Math.floor(s)),maxGlobal:r.maxPx,minGlobal:r.minPx}}(n.settings.x,n.settings.y,a,o,s);return function(t,e,n,i){e.x,e.y;var a=e.width,o=e.height;return t.filter(function(t){return!isNaN(t.x+t.y)}).map(function(t){var e=r(t.size)?Ac.errorShape:t,s=n.min+e.size*(n.max-n.min),u={type:"rect"===e.shape?"square":e.shape,label:t.label,x:t.x*a,y:t.y*o,fill:e.fill,size:Math.min(n.maxGlobal,Math.max(n.minGlobal,s)),stroke:e.stroke,strokeWidth:e.strokeWidth,strokeDasharray:e.strokeDasharray,opacity:e.opacity};e===t.errorShape&&(u.width=e.width);var c=i(u);return c.data=t.data,c})}(u,this.rect,c,this.settings.shapeFn||Mi)}},Pc="point",Fc=(Math.PI,{label:"",arc:1,show:!0,fill:"#333",stroke:"#ccc",strokeWidth:1,opacity:1,innerRadius:0,outerRadius:.8,cornerRadius:0,offset:0}),Lc={require:["chart","resolver"],defaultSettings:{settings:{startAngle:0,endAngle:2*Math.PI,padAngle:0,slice:{}},style:{slice:"$shape"},data:{}},created:function(){this.rect={x:0,y:0,width:0,height:0}},beforeRender:function(t){this.rect=t.size},render:function(t){for(var e=t.data,n=[],i=this.settings.settings,r=this.resolver.resolve({data:e,defaults:ko({},Fc,this.style.slice),settings:i.slice}).items,a=0,o=r.length;a<o;a++)n.push(zi(i,r[a]));var s=function(){function t(t){var s,u,c,l,h,f=t.length,d=0,g=new Array(f),p=new Array(f),v=+r.apply(this,arguments),y=Math.min(Xo,Math.max(-Xo,a.apply(this,arguments)-v)),m=Math.min(Math.abs(y)/f,o.apply(this,arguments)),x=m*(y<0?-1:1);for(s=0;s<f;++s)(h=p[g[s]=s]=+e(t[s],s,t))>0&&(d+=h);for(null!=n?g.sort(function(t,e){return n(p[t],p[e])}):null!=i&&g.sort(function(e,n){return i(t[e],t[n])}),s=0,c=d?(y-f*x)/d:0;s<f;++s,v=l)u=g[s],l=v+((h=p[u])>0?h*c:0)+x,p[u]={data:t[u],index:s,value:h,startAngle:v,endAngle:l,padAngle:m};return p}var e=ts,n=Ko,i=null,r=Lo(0),a=Lo(Xo),o=Lo(0);return t.value=function(n){return arguments.length?(e="function"==typeof n?n:Lo(+n),t):e},t.sortValues=function(e){return arguments.length?(n=e,i=null,t):n},t.sort=function(e){return arguments.length?(i=e,n=null,t):i},t.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:Lo(+e),t):r},t.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:Lo(+e),t):a},t.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:Lo(+e),t):o},t}().sortValues(null);s.startAngle(i.startAngle),s.endAngle(i.endAngle),s.padAngle(i.padAngle);return Ri(s(n),ko({},this.rect,{x:0,y:0}),r)}},Dc=function(t){function e(e){if(t[e.type]&&t[e.type].condition(e)){var n=t[e.type],i=void 0===n.conditionAppend||n.conditionAppend(e);n.items.forEach(function(t){var n=Math.round(e[t.key]),r=e[t.key]-n;e[t.key]=n,i&&"append"===t.type&&(r>0?e[t.key]+=.5:e[t.key]-=.5)})}}return void 0===t&&((t={}).line={append:["x1","x2","y1","y2"],round:[],condition:function(t){return t.x1===t.x2||t.y1===t.y2},conditionAppend:function(t){return t.strokeWidth%2!=0}},t.rect={append:["x","y"],round:["width","height"],condition:function(){return!0},conditionAppend:function(t){return t.strokeWidth%2!=0}}),Object.keys(t).forEach(function(e){var n=t[e];n.items=[],n.append.forEach(function(t){n.items.push({key:t,type:"append"})}),n.round.forEach(function(t){n.items.push({key:t,type:"round"})})}),e.multiple=function(t){return t.forEach(function(t){return e(t)})},e}(),Bc=function(){function t(){Ro(this,t),this.reset(),this.push.apply(this,arguments)}return zo(t,[{key:"transposeCoordinate",value:function(t,e,n){if("number"==typeof e&&isFinite(e)){var i=t.substring(0,1);if("x"===i||"cx"===t)return e*this.width;if("width"===t)return e*this.width;if("r"===t)return e*(n?this.height:this.width);if("y"===i||"cy"===t)return e*this.height;if("height"===t)return e*this.height}return e}},{key:"push",value:function(){var t;return(t=this.storage).push.apply(t,arguments),this}},{key:"processItem",value:function(e){var n={},i=void 0!==e.flipXY?e.flipXY:this.flipXY,r=void 0!==e.crisp?e.crisp:this.crisp;if(e.fn&&"function"==typeof e.fn){var a=i?this.height:this.width,o=i?this.width:this.height;e=e.fn({width:a,height:o,flipXY:i});for(var s=Object.keys(e),u=0,c=s.length;u<c;u++){var l=s[u];n[t.evaluateKey(l,i)]=e[l]}}else for(var h=Object.keys(e),f=0,d=h.length;f<d;f++){var g=h[f],p=t.evaluateKey(g,i),v=this.transposeCoordinate(p,e[g],i);n[p]=v}return r&&Dc(n),n}},{key:"output",value:function(){for(var t=[],e=0,n=this.storage.length;e<n;e++){var i=this.processItem(this.storage[e]);t.push(i)}return t}},{key:"reset",value:function(){this.storage=[],this.flipXY=!1,this.crisp=!1,this.width=0,this.height=0}}],[{key:"evaluateKey",value:function(t,e){if(e){var n=t.substring(0,1),i=t.substring(1);if("x"===n)return"y"+i;if("y"===n)return"x"+i;if("cx"===t)return"cy";if("cy"===t)return"cx";if("width"===t)return"height";if("height"===t)return"width"}return t}}]),t}(),Wc={created:function(){},require:["chart","renderer"],defaultSettings:{displayOrder:0,style:{ticks:"$guide-line",minorTicks:"$guide-line--minor"}},beforeRender:function(t){this.rect=t.size,this.blueprint=Ni(),this.blueprint.width=this.rect.width,this.blueprint.height=this.rect.height,this.blueprint.x=this.rect.x,this.blueprint.y=this.rect.y,this.blueprint.crisp=!0},render:function(){var t=this;if(this.x=this.settings.x?this.chart.scale(this.settings.x):null,this.y=this.settings.y?this.chart.scale(this.settings.y):null,Cn(this,"x",this.rect.width),Cn(this,"y",this.rect.height),!this.x&&!this.y)return[];this.settings.ticks=ko({show:!0},this.style.ticks,this.settings.ticks||{}),this.settings.minorTicks=ko({show:!1},this.style.minorTicks,this.settings.minorTicks||{}),this.lines={x:[],y:[]},this.lines.x=Ci(this.x,this.rect.width),this.lines.y=Ci(this.y,this.rect.height),this.lines.y=this.lines.y.map(function(t){return ko(t,{flipXY:!0})});var e={};return[].concat(Eo(this.lines.x),Eo(this.lines.y)).forEach(function(n){(e=n.isMinor?t.settings.minorTicks:t.settings.ticks).show&&t.blueprint.push({type:"line",x1:n.position,y1:0,x2:n.position,y2:1,stroke:e.stroke||"black",strokeWidth:void 0!==e.strokeWidth?e.strokeWidth:1,flipXY:n.flipXY||!1})}),this.blueprint.output()}},$c={require:["chart","renderer","dockConfig"],defaultSettings:{displayOrder:0,style:{oob:{show:!0,width:10,fill:"#1A1A1A",stroke:"transparent",strokeWidth:0,opacity:1,text:{fontFamily:"Arial",stroke:"transparent",fill:"#fff",strokeWidth:0,opacity:1},triangle:{fill:"#4D4D4D",stroke:"transparent",strokeWidth:0,opacity:1},padding:{x:28,y:5}},line:{stroke:"#000"},label:{strokeWidth:0}}},preferredSize:function(){return 30},beforeRender:function(t){this.rect=t.size,this.blueprint=Ni(),this.blueprint.width=this.rect.width,this.blueprint.height=this.rect.height,this.blueprint.x=this.rect.x,this.blueprint.y=this.rect.y,this.blueprint.crisp=!0},render:function(){var t=this,e=this.settings;if(this.lines={x:[],y:[]},this.lines.x=e.lines&&e.lines.x||[],this.lines.y=e.lines&&e.lines.y||[],0===this.lines.x.length&&0===this.lines.y.length)return[];var n={x0:[],x1:[],y0:[],y1:[]};this.lines.x=this.lines.x.filter(Ti).map(function(e){if(e.scale){var n=t.chart.scale(e.scale);return ko(e,{scale:n,position:n(e.value)})}return ko(e,{position:e.value})}),this.lines.y=this.lines.y.filter(Ti).map(function(e){if(e.scale){var n=t.chart.scale(e.scale);return ko(e,{scale:n,position:n(e.value),flipXY:!0})}return ko(e,{position:e.value,flipXY:!0})}),this.lines.x=this.lines.x.filter(function(t){return!(t.position<0||t.position>1)||(n["x"+(t.position>1?1:0)].push(Ai(t)),!1)}),this.lines.y=this.lines.y.filter(function(t){return!(t.position<0||t.position>1)||(n["y"+(t.position>1?1:0)].push(Ai(t)),!1)});var i=[];return[].concat(Eo(this.lines.x),Eo(this.lines.y)).forEach(function(n){(!0===n.show||void 0===n.show)&&function(t){var e=t.chart,n=t.blueprint,i=t.renderer,r=t.p,a=t.settings,o=t.items,s=!0,u=!1,c=!1,l=!1,h=!1,f=ko(!0,{},a.style.line,r.line||{});if(u=n.processItem({type:"line",x1:r.position,y1:0,x2:r.position,y2:1,stroke:f.stroke||"black",strokeWidth:f.strokeWidth||1,flipXY:r.flipXY||!1}),r.label){var d=ko(!0,{fill:"#000",fontFamily:"Arial",fontSize:"12px",opacity:1,maxWidth:1,maxWidthPx:9999,padding:5,background:{fill:"#fff",stroke:"transparent",strokeWidth:0,opacity:.5}},a.style.label||{},{fill:f.stroke},r.label),g=void 0,p={width:0,height:0},v="";if("string"==typeof r.formatter)g=e.formatter(r.formatter);else if("object"===So(r.formatter))g=e.formatter(r.formatter);else if(void 0!==r.scale&&r.scale.data){var y=r.scale.data()&&r.scale.data().fields;g=y&&y[0]?y[0].formatter():null}g?v=" ("+g(r.value)+")":r.scale&&(v=" ("+r.value+")"),v&&(p=i.measureText({text:v,fontFamily:d.fontFamily,fontSize:d.fontSize}));var m=i.measureText({text:d.text||"",fontFamily:d.fontFamily,fontSize:d.fontSize}),x=m.width+p.width,b=Math.max(m.height,p.height),w=d.padding,k=Oi(r.flipXY?d.vAlign:d.align),_=Oi(r.flipXY?d.align:d.vAlign),M=Math.min(1+x+2*w,d.maxWidth*n.width,d.maxWidthPx),S=b+2*w,R=r.flipXY?S:M,z=r.flipXY?M:S;if((c=n.processItem({fn:function(t){var e=t.width,i=t.height,a=r.position*e-(r.flipXY?S:M)*(1-k);return{type:"rect",x:a=r.flipXY?a:Math.max(a,0),y:Math.max(Math.abs(_*i-z*_),0),width:r.flipXY?R:Math.min(R,n.width-a),height:z,stroke:d.background.stroke,strokeWidth:d.background.strokeWidth,fill:d.background.fill,opacity:d.background.opacity}},flipXY:r.flipXY||!1})).x<-1||c.x+c.width>n.width+1||c.y<-1||c.y+c.height>n.height+1)c=void 0;else{l={type:"text",text:d.text||"",fill:d.fill,opacity:d.opacity,fontFamily:d.fontFamily,fontSize:d.fontSize,x:c.x+w,y:c.y+c.height/2+b/3,maxWidth:c.width-2*w-p.width,anchor:"start"},v&&(h={type:"text",text:v||"",fill:d.fill,opacity:d.opacity,fontFamily:d.fontFamily,fontSize:d.fontSize,x:l.x+3+(c.width-(p.width+2*w)),y:l.y});for(var N=0,C=o.length;N<C;N++){var O=o[N];"rect"===O.type?lc.testRectRect(c,O)&&(s=!1):"line"===O.type&&r.flipXY===O.flipXY&&lc.testRectLine(c,O)&&(s=!1)}}}o.push(u),s&&c&&l&&(o.push(c,l),h&&o.push(h))}({chart:t.chart,blueprint:t.blueprint,renderer:t.renderer,p:n,settings:e,items:i})}),e.style.oob.show&&function(t){for(var e=t.blueprint,n=t.oob,i=t.settings,r=t.items,a=Object.keys(n),o=i.style.oob||{},s=function(t,i){var s=a[t],u=n[s];if(u.length>0){var c=s.charAt(1),l="y"===s.charAt(0),h=o.padding.x+o.width,f=o.padding.y+o.width,d="bottom";d=l?"1"===c?"bottom":"top":"1"===c?"right":"left";var g=e.processItem({fn:function(t){var e=t.width,n=t.height,i=c*e+("1"===c?-h:h),r=l?f:n-f;return"arc"===o.type?{type:"path",d:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"bottom";if(n*=.8,"left"===i||"right"===i){var r="right"===i;return"\n      M "+t+" "+(e-n)+"\n      A "+1.25*n+" "+1.25*n+", 0, 1, "+(r?0:1)+", "+t+" "+(e+n)+"\n      L "+(r?t+n:t-n)+" "+e+" Z\n    "}var a="bottom"===i;return"\n    M "+(t-n)+" "+e+"\n    A "+1.25*n+" "+1.25*n+", 0, 1, "+(a?1:0)+", "+(t+n)+" "+e+"\n    L "+t+" "+(a?e+n:e-n)+" Z\n  "}(l?r:i,l?i:r,o.width,d),x:i,y:r,stroke:o.stroke,fill:o.fill,strokeWidth:o.strokeWidth||0}:{type:"circle",cx:i,cy:r,r:o.width,stroke:o.stroke,fill:o.fill,strokeWidth:o.strokeWidth||0,opacity:o.opacity,data:u}},flipXY:l}),p=g.cx||g.x,v=g.cy||g.y,y={type:"text",text:u.length||"",x:p-.4*o.width,y:v+.4*o.width,fontFamily:o.text.fontFamily,fontSize:1.3*o.width+"px",stroke:o.text.stroke,fill:o.text.fill,strokeWidth:o.text.strokeWidth||0,opacity:o.text.opacity},m={type:"path",d:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"bottom";if(n*=.75,"left"===i||"right"===i){var r="right"===i;return"\n      M "+(t+=r?1.5*n:-1.5*n)+" "+(e-n)+"\n      L "+t+" "+(e+n)+"\n      L "+(r?t+n:t-n)+" "+e+" Z\n    "}var a="bottom"===i;return e+=a?1.5*n:-1.5*n,"\n    M "+(t-n)+" "+e+"\n    L "+(t+n)+" "+e+"\n    L "+t+" "+(a?e+n:e-n)+" Z\n  "}(p,v,o.width,d),x:p,y:v,stroke:o.triangle.stroke,fill:o.triangle.fill,strokeWidth:o.triangle.strokeWidth||0,opacity:o.triangle.opacity};r.push(g,y,m)}},u=0,c=a.length;u<c;u++)s(u)}({blueprint:this.blueprint,oob:n,settings:e,items:i}),i}},Ic={labels:{show:!0,tiltAngle:40,maxEdgeBleed:1/0,margin:4,maxLengthPx:150,minLengthPx:0,mode:"auto",maxGlyphCount:NaN,align:.5,offset:0},ticks:{show:!1,margin:0,tickSize:4},line:{show:!1},paddingStart:0,paddingEnd:10,align:"auto"},Vc={labels:{show:!0,margin:4,maxLengthPx:150,minLengthPx:0,align:.5,offset:0},ticks:{show:!0,margin:0,tickSize:8},minorTicks:{show:!1,tickSize:3,margin:0},line:{show:!0},paddingStart:0,paddingEnd:10,align:"auto"},Hc={require:["chart","renderer","dockConfig"],defaultSettings:{displayOrder:0,prioOrder:0,settings:{},style:{labels:"$label",ticks:"$guide-line",minorTicks:"$guide-line--minor",line:"$guide-line"}},created:function(){this.state={isDiscrete:!!this.scale.bandwidth,isHorizontal:!1,labels:{activeMode:"horizontal"},ticks:[],innerRect:{width:0,height:0,x:0,y:0},outerRect:{width:0,height:0,x:0,y:0},defaultDock:void 0,concreteNodeBuilder:void 0,settings:void 0},this.state.isDiscrete?this.state.defaultDock="bottom":this.state.defaultDock="left",this.setState(this.settings)},setState:function(){this.state.isDiscrete=!!this.scale.bandwidth,this.state.settings=function(t){var e=t.state,n=t.style,i=t.settings,r=ko(!0,{},e.isDiscrete?Ic:Vc,n),a=ko(!0,{},r,i.settings),o=i.dock||e.defaultDock;return a.dock=o,a.align=function(t,e){var n=["top","bottom"],i=["left","right"];return-1!==n.indexOf(t)&&-1===i.indexOf(e)?t:-1!==i.indexOf(t)&&-1===n.indexOf(e)?t:e}(i.settings.align,o),a.labels.tiltAngle=Math.max(-90,Math.min(a.labels.tiltAngle,90)),a}(this),this.state.concreteNodeBuilder=Zi(this.state.isDiscrete),this.dockConfig.dock=this.state.settings.dock,this.state.isHorizontal="top"===this.state.settings.align||"bottom"===this.state.settings.align,this.state.labels.activeMode=function(t,e,n){var i=e.labels.mode;return n&&t.isHorizontal?"auto"===i?t.labels.activeMode:-1!==["layered","tilted"].indexOf(e.labels.mode)&&-1!==["top","bottom"].indexOf(e.dock)?i:"horizontal":"horizontal"}(this.state,this.state.settings,this.state.isDiscrete)},preferredSize:function(t){var e=this.formatter,n=this.state,i=this.scale,r=this.state.isHorizontal?t.inner.width:t.inner.height;this.state.pxScale=On(i,r);return function(t){var e=t.isDiscrete,n=t.rect,i=t.formatter,r=t.measureText,a=t.scale,o=t.settings,s=0,u=$i({isDiscrete:e,rect:n,formatter:i,measureText:r,scale:a,settings:o,state:t.state}),c=u.size,l=u.edgeBleed;if(s+=c,u.isToLarge)return{size:s};if(o.ticks.show&&(s+=o.ticks.margin,s+=o.ticks.tickSize),o.minorTicks&&o.minorTicks.show){var h=o.minorTicks.margin+o.minorTicks.tickSize;h>s&&(s=h)}return o.line.show&&(s+=o.line.strokeWidth),s+=o.paddingStart,s+=o.paddingEnd,{size:s,edgeBleed:l}}({isDiscrete:this.state.isDiscrete,rect:t.inner,formatter:e,measureText:this.renderer.measureText,scale:this.state.pxScale,settings:this.state.settings,state:n})},beforeUpdate:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).settings;this.setState(t)},resize:function(t){var e=t.inner,n=t.outer,i=ko({},e,function(t){var e=t.align,n=t.inner;return"left"===e?{x:n.width+n.x}:"right"===e||"bottom"===e?n:{y:n.y+n.height}}({align:this.state.settings.align,inner:e})),r=n||i;return ko(this.state.innerRect,i),ko(this.state.outerRect,r),n},beforeRender:function(){var t=this.scale,e=this.formatter,n=this.state.isHorizontal?this.state.innerRect.width:this.state.innerRect.height;this.state.pxScale=On(t,n),this.state.ticks=this.state.pxScale.ticks({distance:n,formatter:e})},render:function(){var t=this.state,e=[];return e.push.apply(e,Eo(this.state.concreteNodeBuilder.build({settings:this.state.settings,scale:this.state.pxScale,innerRect:this.state.innerRect,outerRect:this.state.outerRect,measureText:this.renderer.measureText,textBounds:this.renderer.textBounds,ticks:this.state.ticks,state:t}))),Dc.multiple(e),e}},Uc="axis",qc={require:["renderer","chart"],defaultSettings:{dock:"bottom",displayOrder:0,prioOrder:0,settings:{paddingStart:5,paddingEnd:5,paddingLeft:0,paddingRight:0,anchor:"center",join:", ",maxLengthPx:NaN},style:{text:"$title"}},created:function(){this.rect={x:0,y:0,width:0,height:0},this.definitionSettings=this.settings.settings;var t=this.settings.text,e=this.definitionSettings.join;this.title=Gi(t,e,this.scale)},preferredSize:function(){return this.renderer.measureText({text:this.title,fontSize:this.style.text.fontSize,fontFamily:this.style.text.fontFamily}).height+this.definitionSettings.paddingStart+this.definitionSettings.paddingEnd},beforeRender:function(t){ko(this.rect,t.size)},render:function(){var t=this.title,e=this.definitionSettings,n=this.rect,i=[];return i.push(function(t){var e=t.title,n=t.definitionSettings,i=t.dock,r=t.rect,a=t.measureText,o=t.style,s={type:"text",text:e,x:0,y:0,dx:0,dy:0,anchor:function(t,e){var n="middle";return"left"===t?"top"===e?n="end":"bottom"===e&&(n="start"):"right"===t?"top"===e?n="start":"bottom"===e&&(n="end"):"left"===e?n="start":"right"===e&&(n="end"),n}(i,n.anchor),baseline:"alphabetical"};ko(s,o.text);var u=a(s);if("top"===i||"bottom"===i){var c=r.width/2;"left"===n.anchor?c=n.paddingLeft||0:"right"===n.anchor&&(c=r.width-(n.paddingRight||0)),s.x=c,s.y="top"===i?r.height-n.paddingStart:n.paddingStart+u.height,s.dy="top"===i?-u.height/6:-u.height/3,s.maxWidth=.8*r.width}else{var l=r.height/2;"top"===n.anchor?l=n.paddingStart:"bottom"===n.anchor&&(l=r.height-n.paddingStart),s.y=l,s.x="left"===i?r.width-n.paddingStart:n.paddingStart,s.dx="left"===i?-u.height/3:u.height/3;var h="left"===i?270:90;s.transform="rotate("+h+", "+(s.x+s.dx)+", "+(s.y+s.dy)+")",s.maxWidth=.8*r.height}return isNaN(n.maxLengthPx)||(s.maxWidth=Math.min(s.maxWidth,n.maxLengthPx)),s}({title:t,dock:this.settings.dock,definitionSettings:e,rect:n,measureText:this.renderer.measureText,style:this.style})),i},beforeUpdate:function(t){t.settings&&(ko(this.settings,t.settings),this.definitionSettings=t.settings.settings);var e=this.settings.text,n=this.definitionSettings.join;this.title=Gi(e,n,this.scale)}},Yc={require:["chart","renderer"],on:{panStart:function(t){var e=Qi(t,this.renderer),n={x:e.x-t.deltaX,y:e.y-t.deltaY};this.currentMove=Ji(this,n),this.currentMove.update(e)},panMove:function(t){if(this.currentMove){var e=Qi(t,this.renderer);this.currentMove.update(e)}},panEnd:function(t){if(this.currentMove){var e=Qi(t,this.renderer);this.currentMove.end(e),this.currentMove=null}},panCancel:function(){this.currentMove=null},tap:function(t){var e=Qi(t,this.renderer);Ji(this,e).end(e)}},defaultSettings:{settings:{backgroundColor:"#eee",thumbColor:"#ccc",width:16}},created:function(){this.rect={x:0,y:0,width:0,height:0}},preferredSize:function(t){var e=this.chart.scroll(this.settings.scroll).getState();if(e.viewSize>=e.max-e.min){return Math.max(t.width,t.height)}return this.settings.settings.width},resize:function(t){var e=t.inner;return this.rect=e,e},render:function(t){var e,n=this.settings.dock,i=this.settings.settings.invert,r="top"===n||"bottom"===n,a=r?"width":"height",o=this.rect[a],s=this.chart.scroll(this.settings.scroll).getState(),u=o*(s.start-s.min)/(s.max-s.min),c=o*s.viewSize/(s.max-s.min);return i&&(u=o-u-c),t("div",{style:{position:"relative",width:"100%",height:"100%",background:this.settings.settings.backgroundColor,pointerEvents:"auto"}},[].concat(t("div",{class:{scroller:!0},style:(e={position:"absolute"},No(e,r?"left":"top",u+"px"),No(e,r?"top":"left","25%"),No(e,r?"height":"width","50%"),No(e,a,Math.max(1,c)+"px"),No(e,"background",this.settings.settings.thumbColor),e)})))},renderer:"dom"},Xc=5,Zc=0,Gc={require:["chart","settings","renderer"],defaultSettings:{settings:{bubbles:{show:!0,align:"start"}},style:{bubble:"$label-overlay",line:"$shape-guide--inverted",target:"$selection-area-target"}},renderer:"dom",on:{rangeStart:function(t){this.start(t)},rangeMove:function(t){this.move(t)},rangeEnd:function(t){this.end(t)},rangeClear:function(t){this.clear(t)}},created:function(){this.state={}},beforeRender:function(t){this.state.rect=t.size},render:function(t){var e=this.settings.settings;this.state.direction="vertical"===e.direction?Zc:1;var n=this.renderer.element().getBoundingClientRect(),i=this.state.rect[this.state.direction===Zc?"height":"width"],r=On(this.chart.scale(e.scale),i),a=function(t){var e={targetRect:null,targetFillRect:null,scale:null,size:null},n=t.settings.settings,i=n.target?t.chart.component(n.target.component):null,r=n.target&&n.target.selector?t.chart.findShapes(n.target.selector):[],a=n.target&&n.target.fillSelector?t.chart.findShapes(n.target.fillSelector):[];if(r.length>0){var o=hr(r);if(e.size=o[t.state.direction===Zc?"height":"width"],e.scale=On(t.chart.scale(n.scale),e.size),e.targetRect=o,a.length>0){var s=hr(a);e.targetFillRect=s}}else i&&i.rect&&(e.targetRect={x:i.rect.x-t.state.rect.x,y:i.rect.y-t.state.rect.y,width:i.rect.width,height:i.rect.height});return e}(this);if(r=a.scale?a.scale:r,this.state.targetRect=a.targetRect,this.state.targetFillRect=a.targetFillRect,this.state.size=null===a.size?i:a.size,this.state.settings=e,this.state.style=this.style,this.state.offset=n,this.state.brush=e.brush,this.state.brushInstance=this.chart.brush(this.state.brush),this.state.renderer=this.renderer,this.state.multi=!!e.multiple,this.state.h=t,this.state.cssCoord={offset:this.state.direction===Zc?"top":"left",coord:this.state.direction===Zc?"y":"x",pos:this.state.direction===Zc?"deltaY":"deltaX"},{}.hasOwnProperty.call(r,"norm")){this.state.fauxBrushInstance=null,this.state.findValues=null,this.state.scale=r;var o=this.state.scale.data();o&&o.fields&&o.fields[0]&&(this.state.format=o.fields[0].formatter())}else this.state.scale=an(),this.state.scale.data=r.data,this.state.format=function(t,e){return lr(r.range(),e)?function(t,e){var n=e.ticks(),i=e.domain().indexOf(cr(t,e));return-1!==i?n[i].label:"-"}(t,r):"-"},this.state.fauxBrushInstance=Rn(),this.state.findValues=function(t){return function(t,e){var n=e.domain(),i=e.range(),r=[];return t.forEach(function(t){if(lr(i,[t.min,t.max])){var a=n.indexOf(cr(t.min,e)),o=n.indexOf(cr(t.max,e));r.push.apply(r,n.slice(Math.min(a,o),Math.max(a,o)+1))}}),r}(t,r)};return[]},start:function(t){!function(t){var e=t.state,n=t.e,i=t.renderer,r=t.ranges,a=t.targetSize;if(!e.started){var o=n.center.x-n.deltaX,s=n.center.y-n.deltaY,u=document.elementFromPoint(o,s);i.element().contains(u)||(u=null);var c={started:!0};e.offset=ko({},i.element().getBoundingClientRect());var l=o-e.offset.left,h=s-e.offset.top;e.offset.left+=e.targetRect?e.targetRect.x:0,e.offset.top+=e.targetRect?e.targetRect.y:0,e.ranges=r(e,e.fauxBrushInstance||e.brushInstance);var f=n.center[e.cssCoord.coord]-n[e.cssCoord.pos]-e.offset[e.cssCoord.offset],d=n.center[e.cssCoord.coord]-e.offset[e.cssCoord.offset];c.current=e.scale.normInvert(d/e.size),c.start=e.scale.normInvert(f/e.size);var g=e.ranges,p=rr(e),v=void 0,y=-1;if(u&&u.hasAttribute("data-idx"))y=parseInt(u.getAttribute("data-idx"),10),p.min=y>0?g[y-1].max:p.min,p.max=y+1<g.length?g[y+1].min:p.max;else{for(v=0;v<g.length;v++){if(g[v].min<=c.start&&c.start<=g[v].max){y=v,p.min=v?g[v-1].max:p.min,p.max=v+1<g.length?g[v+1].min:p.max;break}if(c.start<g[v].min){p.max=g[v].min,p.min=v?g[v-1].max:p.min;break}}-1===y&&g.length&&v>=g.length&&(p.min=g[g.length-1].max)}-1!==y||e.multi||(c.ranges=[],p.min=e.scale.min(),p.max=e.scale.max());var m=void 0;if(-1!==y)if(m={idx:y,start:g[y].min,end:g[y].max,limitLow:p.min,limitHigh:p.max,mode:"move"},u&&u.hasAttribute("data-other-value"))c.start=parseFloat(u.getAttribute("data-other-value")),m.mode="modify";else{var x=e.scale.norm(m.start)*e.size,b=e.scale.norm(m.end)*e.size;Math.abs(f-x)<=a?(c.start=m.end,m.mode="modify"):Math.abs(f-b)<=a&&(c.start=m.start,m.mode="modify")}else m={idx:-1,start:c.start,end:c.current,limitLow:p.min,limitHigh:p.max,mode:"current"};c.active=m,"modify"!==m.mode&&e.targetRect&&!lc.testRectPoint(e.targetRect,{x:l,y:h})||Object.keys(c).forEach(function(t){return e[t]=c[t]})}}({e:t,state:this.state,renderer:this.renderer,ranges:ur,targetSize:Xc})},end:function(){this.state.started&&(!function(t,e){t.started=!1,t.ranges=e(t,t.fauxBrushInstance||t.brushInstance);var n=rr(t);or(t,t.current,n)}(this.state,ur),sr(this.state))},move:function(t){this.state.started&&(!function(t,e){var n=(e.center[t.cssCoord.coord]-t.offset[t.cssCoord.offset])/t.size,i=t.scale.normInvert(n);t.current=Math.max(Math.min(i,t.active.limitHigh),t.active.limitLow)}(this.state,t),function(t){var e=t.ranges.map(function(t){return{min:t.min,max:t.max}});if(-1!==t.active.idx)if("modify"===t.active.mode)e[t.active.idx].min=Math.min(t.start,t.current),e[t.active.idx].max=Math.max(t.start,t.current);else{var n=nr(t);e[t.active.idx].min+=n,e[t.active.idx].max+=n}else e.push({min:Math.min(t.start,t.current),max:Math.max(t.start,t.current)});var i=t.scale.data();i&&i.fields&&i.fields.forEach(function(n){if(t.fauxBrushInstance){var i=ur(t,t.fauxBrushInstance),r=t.findValues(i),a=t.findValues(e),o=a.filter(function(t){return-1===r.indexOf(t)}),s=r.filter(function(t){return-1===a.indexOf(t)}),u=o.map(function(t){return{key:n.id(),value:t}}),c=s.map(function(t){return{key:n.id(),value:t}});t.brushInstance.addAndRemoveValues(u,c),t.fauxBrushInstance.setRange(n.id(),e)}else t.brushInstance.setRange(n.id(),e)})}(this.state),sr(this.state))},clear:function(){this.state.fauxBrushInstance&&this.state.fauxBrushInstance.clear(),this.state.renderer.render([])}},Jc={require:["chart","settings","renderer"],defaultSettings:{settings:{bubbles:{show:!0,align:"start"}},style:{bubble:"$label-overlay",line:"$shape-guide--inverted",target:"$selection-area-target"}},renderer:"dom",on:{areaStart:function(t){this.start(t)},areaMove:function(t){this.move(t)},areaEnd:function(t){this.end(t)},areaClear:function(t){this.clear(t)}},created:function(){this.rect={x:0,y:0,width:0,height:0},this.state={}},beforeRender:function(t){this.rect=t.size},render:function(t){this.state.rect=this.rect;var e=this.settings.settings,n="vertical"===e.direction?Zc:1,i=this.state.rect[n===Zc?"height":"width"],r=this.renderer.element().getBoundingClientRect(),a=e.target?this.chart.component(e.target.component):null;return a&&a.rect?this.state.targetRect={x:a.rect.x-this.rect.x,y:a.rect.y-this.rect.y,width:a.rect.width,height:a.rect.height}:this.state.targetRect=null,this.state.style=this.style,this.state.chart=this.chart,this.state.direction=n,this.state.settings=e,this.state.offset=r,this.state.rc=vn(),this.state.renderer=this.renderer,this.state.multi=!!e.multiple,this.state.h=t,this.state.size=i,this.state.cssCoord={offset:this.state.direction===Zc?"top":"left",coord:this.state.direction===Zc?"y":"x",pos:this.state.direction===Zc?"deltaY":"deltaX",area:this.state.direction===Zc?"height":"width"},this.state.format=function(t,e){return function(t,e,n){var i=Math.min.apply(Math,Eo(n)),r=Math.max.apply(Math,Eo(n)),a={x:t.direction?i+t.rect.x:t.rect.x,y:t.direction?t.rect.y:i+t.rect.y,width:t.direction?r-i:t.rect.width+t.rect.x,height:t.direction?t.rect.height+t.rect.y:r-i},o=t.chart.shapesAt(a,t.settings.brush);if(0===o.length)return"-";var s=o.reduce(function(n,r){var a=n.bounds,o=r.bounds;return e===i?a[t.cssCoord.coord]<=o[t.cssCoord.coord]?n:r:a[t.cssCoord.coord]+a[t.cssCoord.area]>=o[t.cssCoord.coord]+o[t.cssCoord.area]?n:r}),u=t.settings.brush.components.reduce(function(t,e){return t.key===s.key?t:e});return"function"==typeof t.settings.bubbles.label?t.settings.bubbles.label(s.data):Array.isArray(u.data)&&u.data.length?s.data[u.data[0]].label:s.data&&s.data.label?s.data.label:"-"}(this,t,e)},[]},start:function(t){!function(t){var e=t.state,n=t.e,i=t.renderer,r=t.ranges,a=t.targetSize;if(!e.started){var o=n.center.x-n.deltaX,s=n.center.y-n.deltaY,u=document.elementFromPoint(o,s);i.element().contains(u)||(u=null);var c={started:!0};e.offset=i.element().getBoundingClientRect(),e.ranges=r(e);var l=o-e.offset.left,h=s-e.offset.top,f=n.center[e.cssCoord.coord]-n[e.cssCoord.pos]-e.offset[e.cssCoord.offset],d=n.center[e.cssCoord.coord]-e.offset[e.cssCoord.offset],g=d,p=f;c.start=f,c.current=d;var v=e.ranges,y=ar(e),m=void 0,x=-1;if(u&&u.hasAttribute("data-idx"))x=parseInt(u.getAttribute("data-idx"),10),y.min=x>0?v[x-1].max:y.min,y.max=x+1<v.length?v[x+1].min:y.max;else{for(m=0;m<v.length;m++){if(v[m].min<=p&&p<=v[m].max){x=m,y.min=m?v[m-1].max:y.min,y.max=m+1<v.length?v[m+1].min:y.max;break}if(p<v[m].min){y.max=v[m].min,y.min=m?v[m-1].max:y.min;break}}-1===x&&v.length&&m>=v.length&&(y.min=v[v.length-1].max)}-1!==x||e.multi||(c.ranges=[],y.min=0,y.max=e.direction?e.rect.width:e.rect.height);var b=void 0;if(-1!==x)if(b={idx:x,start:v[x].min,end:v[x].max,limitLow:y.min,limitHigh:y.max,mode:"move"},u&&u.hasAttribute("data-other-value"))c.start=parseFloat(u.getAttribute("data-other-value")),b.mode="modify";else{var w=b.start,k=b.end;Math.abs(f-w)<=a?(c.start=b.end,b.mode="modify"):Math.abs(f-k)<=a&&(c.start=b.start,b.mode="modify")}else b={idx:-1,start:p,end:g,limitLow:y.min,limitHigh:y.max,mode:"current"};c.active=b,"modify"!==b.mode&&e.targetRect&&!lc.testRectPoint(e.targetRect,{x:l,y:h})||Object.keys(c).forEach(function(t){return e[t]=c[t]})}}({e:t,state:this.state,renderer:this.renderer,ranges:dr,targetSize:Xc})},end:function(){this.state.started&&(!function(t,e){t.started=!1,t.ranges=e(t);var n=ar(t);or(t,t.current,n)}(this.state,dr),fr(this.state))},move:function(t){this.state.started&&(!function(t,e){var n=e.center[t.cssCoord.coord]-t.offset[t.cssCoord.offset];t.current=Math.max(Math.min(n,t.active.limitHigh),t.active.limitLow)}(this.state,t),function(t){var e=t.ranges.map(function(t){return{min:t.min,max:t.max}});if(-1!==t.active.idx)if("modify"===t.active.mode)e[t.active.idx].min=Math.min(t.start,t.current),e[t.active.idx].max=Math.max(t.start,t.current);else{var n=nr(t);e[t.active.idx].min=t.active.start+n,e[t.active.idx].max=t.active.end+n}else e.push({min:Math.min(t.start,t.current),max:Math.max(t.start,t.current)});t.rc.set(e);var i=[];e.forEach(function(e){i.push.apply(i,Eo(function(t,e){var n={x:t.direction?e.min+t.rect.x:t.rect.x,y:t.direction?t.rect.y:e.min+t.rect.y,width:t.direction?e.max-e.min:t.rect.width+t.rect.x,height:t.direction?t.rect.height+t.rect.y:e.max-e.min};return t.chart.shapesAt(n,t.settings.brush)}(t,e)))}),function(t,e){t.chart.brushFromShapes(e,t.settings.brush)}(t,i)}(this.state),fr(this.state))},clear:function(){this.state.rc&&this.state.rc.clear(),this.state.renderer.render([])}},Qc={require:["chart","settings","renderer"],defaultSettings:{settings:{}},preferredSize:function(){return 50},created:function(){this.rect={x:0,y:0,width:0,height:0},this.state={}},beforeRender:function(t){this.rect=t.size},render:function(){var t=this.settings.settings,e=this.chart.brush(t.brush),n=t.direction||"horizontal",i="horizontal"===n?this.rect.width:this.rect.height,r=On(this.chart.scale(t.scale),i);return vr(this.state),pr(this.state,e,r,this.renderer),this.state.rect=this.rect,this.state.fill=t.fill||"#ccc",this.state.opacity=void 0!==t.opacity?t.opacity:1,this.state.direction=n,gr(this.state)},beforeDestroy:function(){vr(this.state)}},Kc={require:["chart","renderer","settings"],defaultSettings:{displayOrder:0,settings:{brush:{components:[]},snapIndicator:{threshold:75,strokeDasharray:"5, 5",stroke:"black",strokeWidth:2,opacity:.5},lasso:{fill:"transparent",stroke:"black",strokeWidth:2,opacity:.7,strokeDasharray:"20, 10"},startPoint:{r:10,fill:"green",stroke:"black",strokeWidth:1,opacity:1}}},on:{lassoStart:function(t){this.start(t)},lassoEnd:function(t){this.end(t)},lassoMove:function(t){this.move(t)},lassoCancel:function(){this.cancel()}},created:function(){this.state={points:[],active:!1,path:null,snapIndicator:null,startPoint:null,rendererBounds:null,componentDelta:null,brushConfig:null,lineBrushShape:{x1:0,y1:0,x2:0,y2:0}}},start:function(t){this.state.active=!0,this.state.path=function(t){return{visible:!0,type:"path",d:null,fill:t.fill,stroke:t.stroke,strokeWidth:t.strokeWidth,opacity:t.opacity,strokeDasharray:t.strokeDasharray,collider:{type:null}}}(this.settings.settings.lasso),this.state.snapIndicator=function(t){return{visible:!1,type:"line",x1:0,y1:0,x2:0,y2:0,strokeDasharray:t.strokeDasharray,stroke:t.stroke,strokeWidth:t.strokeWidth,opacity:t.opacity,collider:{type:null}}}(this.settings.settings.snapIndicator),this.state.startPoint=function(t){return{visible:!0,type:"circle",cx:0,cy:0,r:t.r,fill:t.fill,opacity:t.opacity,stroke:t.stroke,strokeWidth:t.strokeWidth,collider:{type:null}}}(this.settings.settings.startPoint),this.state.rendererBounds=this.renderer.element().getBoundingClientRect(),this.state.componentDelta=function(t,e){var n=t.element.getBoundingClientRect();return{x:e.left-n.left,y:e.top-n.top}}(this.chart,this.state.rendererBounds),this.state.brushConfig=function(t){return t.settings.brush.components.map(function(t){return{key:t.key,contexts:t.contexts||["lassoBrush"],data:t.data||[""],action:t.action||"add"}})}(this.settings);var e=yr(this.state.rendererBounds,t);xr(this.state,e),br({state:this.state,start:e}),function(t,e){t.startPoint.cx=e.x,t.startPoint.cy=e.y}(this.state,e)},move:function(t){if(this.state.active){var e=yr(this.state.rendererBounds,t);mr(e,this.state,this.settings)?wr(this.state,!0):wr(this.state,!1),xr(this.state,e),br({state:this.state,end:e}),function(t,e){var n=[t.startPoint,t.path,t.snapIndicator].filter(function(t){return t.visible});e.render(n)}(this.state,this.renderer),function(t,e){if(t.active){var n=t.points[t.points.length-2],i=t.points[t.points.length-1];t.lineBrushShape.x1=n.x+t.componentDelta.x,t.lineBrushShape.y1=n.y+t.componentDelta.y,t.lineBrushShape.x2=i.x+t.componentDelta.x,t.lineBrushShape.y2=i.y+t.componentDelta.y;var r=e.shapesAt(t.lineBrushShape,{components:t.brushConfig});e.brushFromShapes(r,{components:t.brushConfig})}}(this.state,this.chart)}},end:function(t){if(this.state.active){wr(this.state,!1);mr(yr(this.state.rendererBounds,t),this.state,this.settings)&&function(t,e){if(t.active){var n=t.componentDelta.x,i=t.componentDelta.y,r=t.points.map(function(t){return{x:t.x+n,y:t.y+i}}),a=e.shapesAt({vertices:r},{components:t.brushConfig});e.brushFromShapes(a,{components:t.brushConfig})}}(this.state,this.chart),this.state={points:[],active:!1,path:null,snapIndicator:null,startPoint:null,rendererBounds:null,componentDelta:null,brushConfig:null,lineBrushShape:{x1:0,y1:0,x2:0,y2:0}},this.renderer.render([])}},cancel:function(){this.state.active&&(!function(t,e){t.brushConfig.forEach(function(t){t.contexts.forEach(function(t){e.brush(t).end()})})}(this.state,this.chart),this.state={points:[],active:!1,path:null,snapIndicator:null,startPoint:null,rendererBounds:null,componentDelta:null,brushConfig:null,lineBrushShape:{x1:0,y1:0,x2:0,y2:0}},this.renderer.render([]))},render:function(){}},tl=1.5,el=4,nl={bar:function(t){var e=t.settings,n=t.chart,i=t.nodes,r=t.rect,a=t.renderer,o=t.style,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rr,u=ko({fontSize:12,fontFamily:"Arial",align:.5,justify:0,fill:"#333"},o.label);u.fontSize=parseInt(u.fontSize,10);var c=e.labels.map(function(t){return ko({},u,e,t)}),l=e.labels.map(function(t){return t.placements.map(function(n){return ko({},u,e,t,n)})}),h=function(t){for(var e=t.nodes,n=t.rect,i=t.chart,r=t.labelSettings,a=t.settings,o=t.renderer,s=[],u=[],c={},l=[],h=!0,f=!1,d=void 0,g=void 0,p=void 0,v=void 0,y=void 0,m=void 0,x=0,b=e.length;x<b;x++)if(d=e[x],p=d.localBounds,lc.testRectRect(p,n)){u[x]=[],s[x]=[];for(var w=kr(d,i),k=0;k<r.length;k++)(g="function"==typeof(y=r[k]).label?y.label(w,x):"")&&(m="function"==typeof a.direction?a.direction(w,x):a.direction||"up",f=f||"left"===m||"right"===m,c.fontFamily=y.fontFamily,c.fontSize=y.fontSize+"px",c.text=g,v=o.measureText(c),s[x][k]=v,u[x][k]=g,l[x]=m,h=h&&v.width<=p.width-2*el)}return{measurements:s,texts:u,directions:l,fitsHorizontally:h,hasHorizontalDirection:f}}({nodes:i,chart:n,renderer:a,settings:e,rect:r,labelSettings:c}),f=h.texts,d=h.measurements,g=h.fitsHorizontally,p=h.hasHorizontalDirection;return s({chart:n,nodes:i,texts:f,directions:h.directions,measurements:d,stngs:e,placementSettings:l,labelSettings:c,rect:r,fitsHorizontally:g,collectiveOrientation:p?"h":"v"})}},il={require:["chart","renderer","settings"],defaultSettings:{settings:{},style:{label:"$label"}},created:function(){this.rect={x:0,y:0,width:0,height:0}},beforeRender:function(t){this.rect=t.size},render:function(){var t=this,e=[];return(this.settings.settings.sources||[]).forEach(function(n){n.strategy&&nl[n.strategy.type]&&n.component&&e.push.apply(e,Eo(function(t,e){var n=t.chart,i=t.source,r=t.rect,a=t.renderer,o=t.style;if(!n.component(i.component))return[];var s=n.findShapes(i.selector).filter(function(t){return t.key===i.component});return e({chart:n,settings:i.strategy.settings,nodes:s,rect:{x:0,y:0,width:r.width,height:r.height},renderer:a,style:o})}({chart:t.chart,rect:t.rect,renderer:t.renderer,source:n,style:t.style},nl[n.strategy.type])))}),e}},rl={layout:{size:1,direction:"ltr"},item:{show:!0,justify:.5,align:.5,label:{fontSize:"12px",fontFamily:"Arial",fill:"#595959",wordBreak:"none",maxLines:2,maxWidth:136,lineHeight:1.2},shape:{type:"square",size:12}},title:{show:!0,text:void 0,anchor:"start",fontSize:"16px",fontFamily:"Arial",fill:"#595959",wordBreak:"none",maxLines:2,maxWidth:156,lineHeight:1.25},navigation:{button:{class:void 0,content:void 0}}},al=function(t,e){var n=e.onScroll,i=void 0===n?function(){}:n,r=void 0,a=void 0,o=void 0,s=void 0,u=0,c=0,l={itemize:function(e){r=function(t,e){for(var n=t.resolved,i=t.dock,r=void 0,a=[],o=void 0,s=n.items.items,u=n.symbols.items,c=n.labels.items,l=0,h=0,f=0,d=0;d<s.length;d++)!1!==s[d].show&&(r=ko({},c[d],{type:"text",fontSize:parseInt(c[d].fontSize,10)+"px",text:void 0!==c[d].text?c[d].text:c[d].data.label||""}),o={symbol:{meta:u[d]},label:{displayObject:r,bounds:e.textBounds(r)}},a.push(o),l=Math.max(u[d].size,l),h=Math.max(o.label.bounds.width,h),f=Math.max(o.label.bounds.height,f));return{items:a,globalMetrics:{spacing:8,maxSymbolSize:l,maxItemBounds:{height:Math.max(l,f),width:l+8+h},maxLabelBounds:{width:h,height:f}},layout:{margin:{vertical:void 0!==n.layout.item.vertical?n.layout.item.vertical:8,horizontal:void 0!==n.layout.item.horizontal?n.layout.item.horizontal:8},mode:n.layout.item.mode,size:n.layout.item.size,orientation:"top"===i||"bottom"===i?"horizontal":"vertical",direction:n.layout.item.direction}}}(e,t.renderer)},getItemsToRender:function(t){o=t.viewRect,c=l.getContentOverflow(o);var e=l.extent();u=Math.min(u,c),s=ko({},o);var n="horizontal"===l.orientation()?"x":"y";return s[n]-=u,s["x"===n?"width":"height"]=e,function(t,e,n){for(var i=t.viewRect,r=n.itemized,a=n.create,o=void 0===a?zr:a,s=n.parallels,u=r.layout.direction,c=r.globalMetrics,l=r.items,h="horizontal"===r.layout.orientation,f=0,d=[],g=c.maxItemBounds.height,p=c.maxItemBounds.width,v=r.layout.margin.vertical+g,y=r.layout.margin.horizontal+p,m=e.x,x=e.y,b=i.x-e.x,w=0;w<l.length;w++){var k=o({y:x,x:"rtl"===u?i.x+b+i.width-p-(m-e.x):m,item:l[w],globalMetrics:c,direction:u});if((h&&m>=i.x-p||!h&&x>=i.y-g)&&d.push(k.item),++f>=s?(f=0,h?(m+=y,x=e.y):(x+=v,m=e.x)):h?x+=v:m+=y,!h&&x>i.y+i.height)break;if(h&&m>i.x+i.width)break}return d}(t,s,{itemized:r,parallels:a})},parallelize:function(t,e){return a=function(t,e,n){var i=n.items.length,r="horizontal"===n.layout.orientation?"width":"height",a="width"===r?"horizontal":"vertical",o=n.globalMetrics.maxItemBounds[r]*i+(i-1)*n.layout.margin[a],s=Math.ceil(o/t);if(null!=e){var u="horizontal"===n.layout.orientation?"height":"width",c=Math.floor(e/(4+n.globalMetrics.maxItemBounds[u]));s=Math.min(s,c)}var l=isNaN(n.layout.size)?1:n.layout.size;return Math.max(1,Math.min(s,l))}(t,e,r)},hasContentOverflow:function(){var t="horizontal"===r.layout.orientation?"width":"height";return Nr(r,a)>o[t]},getContentOverflow:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e="horizontal"===r.layout.orientation?"width":"height";return Math.max(0,Nr(r,a)-t[e])},getNextSize:function(){var t="horizontal"===r.layout.orientation?"width":"height",e="width"===t?"horizontal":"vertical";return r.globalMetrics.maxItemBounds[t]+r.layout.margin[e]},getPrevSize:function(){var t="horizontal"===r.layout.orientation?"width":"height",e="width"===t?"horizontal":"vertical";return r.globalMetrics.maxItemBounds[t]+r.layout.margin[e]},hasNext:function(){return"horizontal"===l.orientation()?o.x+o.width<s.x+s.width:o.y+o.height<s.y+s.height},hasPrev:function(){return"horizontal"===l.orientation()?s.x<o.x:s.y<o.y},next:function(){l.scroll(-l.getNextSize())},prev:function(){l.scroll(l.getPrevSize())},scroll:function(t){var e=Math.max(0,Math.min(c,u-t));e!==u&&(u=e,i())},offset:function(){return u},orientation:function(){return r.layout.orientation},direction:function(){return r.layout.direction},extent:function(){return Nr(r,a)},spread:function(){return function(t,e){var n=e,i="horizontal"===t.layout.orientation?"height":"width",r="width"===i?"horizontal":"vertical";return t.globalMetrics.maxItemBounds[i]*n+(n-1)*t.layout.margin[r]}(r,a)}};return l},ol={up:"",right:"",down:"",left:""},sl=function(t){var e=void 0,n={itemize:function(t){e=function(t){var e=t.dock,n=t.navigation;return{layout:{orientation:"top"===e||"bottom"===e?"vertical":"horizontal"},navigation:n}}(t)},render:function(i){return function(t,e,n,i){var r=e.rect,a=e.itemRenderer;if(t&&t.renderArgs){t.size(r);var o=t.renderArgs[0],s="vertical"===n.layout.orientation,u="rtl"===a.direction(),c=a.hasNext(),l=a.hasPrev();if(l||c){var h=[o("div",{style:{position:"relative",display:"flex","flex-direction":s?"column":"row","justify-content":"center",height:"100%",pointerEvents:"auto"}},[Cr(o,{size:32,isActive:c,direction:s?u?"left":"right":"down",attrs:{"data-action":"next","data-component-key":i.settings.key},nav:n.navigation}),Cr(o,{size:32,isActive:l,direction:s?u?"right":"left":"up",attrs:{"data-action":"prev","data-component-key":i.settings.key},nav:n.navigation})])];t.render(h)}else t.render([])}}(n.renderer,i,e,t)},extent:function(){return 32},spread:function(){return 64}};return n},ul=function(t){var e=void 0,n={itemize:function(n){e=function(t,e){var n=t.resolved;if(!1===n.title.item.show)return null;var i=ko({},n.title.item,{type:"text"});if("rtl"===n.layout.item.direction&&(i.anchor&&"start"!==i.anchor?"end"===i.anchor&&(i.anchor="start"):i.anchor="end"),void 0===n.title.settings.text){var r=e.scale.data().fields;i.text=r&&r[0]?r[0].title():""}return{displayObject:i,bounds:e.renderer.textBounds(i)}}(n,t)},render:function(t){!function(t,e,n){var i=t.rect;if(e){var r=[];if(e.size(i),n){var a={start:0,end:i.width,middle:i.width/2};r.push(ko({},n.displayObject,{x:a[n.displayObject.anchor]||0,y:0,baseline:"hanging"}))}e.render(r)}}(t,n.renderer,e)},spread:function(){return e?1.25*e.bounds.height:0},extent:function(){return e?e.bounds.width:0}};return n},cl={require:["chart","settings","renderer","update","resolver","registries"],defaultSettings:{settings:{},style:{item:{label:"$label",shape:"$shape"},title:"$title"}},mounted:function(t){this.navigationRenderer.renderer=this.registries.renderer("dom")(),this.titleRenderer.renderer=this.registries.renderer("svg")(),t&&t.parentElement&&(this.navigationRenderer.renderer.appendTo(t.parentElement),this.titleRenderer.renderer.appendTo(t.parentElement)),this.navigationRenderer.render({rect:this.state.views.layout.navigation,itemRenderer:this.itemRenderer}),this.titleRenderer.render({rect:this.state.views.layout.title})},on:{panstart:function(){if(!this.state.interaction.started){this.itemRenderer.getContentOverflow()&&(this.state.interaction.started=!0,this.state.interaction.delta=0)}},panmove:function(t){if(this.state.interaction.started){var e="horizontal"===this.itemRenderer.orientation()?("rtl"===this.itemRenderer.direction()?-1:1)*t.deltaX:t.deltaY;this.itemRenderer.scroll(e-this.state.interaction.delta),this.state.interaction.delta=e}},panend:function(){this.state.interaction.started=!1},scroll:function(t){this.itemRenderer.scroll(-t)},next:function(){this.itemRenderer.next()},prev:function(){this.itemRenderer.prev()}},created:function(){var t=this;this.rect={x:0,y:0,width:0,height:0},this.state={interaction:{}},this.onScroll=function(){var e=Tr(t);t.update(e)},this.itemRenderer=al(this,{onScroll:this.onScroll}),this.navigationRenderer=sl(this),this.titleRenderer=ul(this),Ar(this)},preferredSize:function(t){return function(t,e){var n=0,i=t.settings.dock||"center",r="top"===i||"bottom"===i?"horizontal":"vertical",a=t.state.display,o=Or(e.inner,a,r,{itemRenderer:t.itemRenderer,navigationRenderer:t.navigationRenderer,titleRenderer:t.titleRenderer,isPreliminary:!0});return n+=a.spacing,n+=o.preferredSize,n+=a.spacing}(this,t)},beforeUpdate:function(){Ar(this)},beforeRender:function(t){this.rect=t.size},render:function(){return Tr(this)}},ll="legend-cat",hl={require:["chart","settings","renderer"],defaultSettings:{displayOrder:0,dock:"right",settings:{size:15,length:.5,maxLengthPx:250,align:.5,justify:0,padding:{left:5,right:5,top:5,bottom:5},tick:{label:null,fill:"#595959",fontSize:"12px",fontFamily:"Arial",maxLengthPx:100,anchor:null,padding:5},title:{show:!0,text:"",fill:"#595959",fontSize:"12px",fontFamily:"Arial",maxLengthPx:100,padding:5,maxLines:2,wordBreak:"none",lineHeight:1.2,hyphens:"auto",anchor:null}}},preferredSize:function(t){var e=this.state;e.rect=Pr(this,t.inner);var n=this.stgns.size,i=e.isVertical?this.stgns.padding.left+this.stgns.padding.right:this.stgns.padding.top+this.stgns.padding.bottom;n+=i;var r=Math.max(t.inner.width,t.inner.height);if("left"===e.ticks.anchor||"right"===e.ticks.anchor){if(e.ticks.values.reduce(function(t,e){return t+e.textMetrics.height},0)>this.state.legend.length())return r;n+=e.ticks.length}else{if(e.ticks.length>this.state.legend.length())return r;n+=Math.max.apply(Math,Eo(e.ticks.values.map(function(t){return t.textMetrics.height})))}return n+=this.stgns.tick.padding,this.stgns.title.show&&(n="left"===e.title.anchor||"right"===e.title.anchor?Math.max(e.title.textBounds.height+i,n):Math.max(n,e.title.requiredWidth()+i)),this.state.preferredSize=n,n},created:function(){this.stgns=this.settings.settings,this.state=Fr(this)},beforeUpdate:function(t){this.stgns=t.settings.settings,this.state=Fr(this)},beforeRender:function(t){if(this.state.nodes=[],this.state.rect=Pr(this,t.size),this.stgns.title.show){var e=function(t){var e=t.state,n=t.stgns,i="left"===e.ticks.anchor,r="top"===e.ticks.anchor,a=e.rect.x,o=e.rect.y,s="start";"left"===e.title.anchor?(a+=e.title.requiredWidth()-n.title.padding,o+=e.title.textMetrics.height,o+=r?e.rect.height-e.title.textBounds.height:0,s="end"):"right"===e.title.anchor?(a+=e.legend.length(),a+=n.title.padding,o+=e.title.textMetrics.height,o+=r?e.rect.height-e.title.textBounds.height:0):"top"===e.title.anchor&&(a+=i?e.rect.width:0,o+=e.title.textMetrics.height,s=i?"end":"start");var u={type:"text",x:a,y:Math.min(o,e.rect.y+e.rect.height),text:n.title.text,fill:n.title.fill,fontSize:n.title.fontSize,fontFamily:n.title.fontFamily,maxWidth:n.title.maxLengthPx,maxLines:n.title.maxLines,wordBreak:n.title.wordBreak,hyphens:n.title.hyphens,lineHeight:n.title.lineHeight,anchor:s};return Er(t,u),u}(this);this.state.nodes.push(e)}var n=function(t,e){var n=t.state,i=t.stgns,r=n.rect,a=r.x,o=r.y,s=n.isVertical?i.size:n.legend.length(),u=n.isVertical?n.legend.length():i.size;"left"===n.ticks.anchor?a+=n.rect.width-i.size:"top"===n.ticks.anchor&&(o+=n.rect.height-i.size),"top"===n.title.anchor?o+=n.title.requiredHeight():"left"===n.title.anchor&&(a+=n.title.requiredWidth());var c={type:"rect",x:a,y:o,width:s,height:u,fill:{type:"gradient",stops:e,degree:n.isVertical?90:180}};return Er(t,c),c}(this,function(t){var e=t.state.legend.fillScale,n=t.state.legend.majorScale;return e.domain().map(function(t){return{type:"stop",color:e(t),offset:Math.min(1,Math.max(0,n.norm(t)))}}).sort(function(t,e){return t.offset-e.offset})}(this)),i={id:"legend-seq-target",type:"container",children:[n,function(t,e){var n=t.state,i=t.stgns,r="start",a={type:"rect",x:e.x,y:e.y,width:n.isVertical?0:e.width,height:n.isVertical?e.height:0,fill:"transparent"},o=n.ticks.values.map(function(o){var s=0,u=0,c=0;return n.isVertical?(u=e.y+e.height*o.pos,c=1===o.pos?-o.textMetrics.height/5:o.textMetrics.height):s=e.x+e.width*o.pos,"right"===n.ticks.anchor?(s=e.x+i.size+i.tick.padding,a.x=e.x+e.width):"left"===n.ticks.anchor?(s=e.x-i.tick.padding,r="end"):"top"===n.ticks.anchor?(u=e.y-i.tick.padding,c-=.25*o.textMetrics.height,r=0===o.pos?"start":"end"):"bottom"===n.ticks.anchor&&(u=e.y+e.height+i.tick.padding,c=.8*o.textMetrics.height,r=0===o.pos?"start":"end",a.y=e.y+e.height),{type:"text",x:s,y:u,dx:0,dy:c,text:o.label,fontSize:i.tick.fontSize,fontFamily:i.tick.fontFamily,fill:i.tick.fill,maxWidth:n.isVertical?i.tick.maxLengthPx:Math.min(i.tick.maxLengthPx,n.legend.length()/2),anchor:r,textBoundsFn:t.renderer.textBounds}});return{type:"container",id:"legend-seq-ticks",children:[].concat(Eo(o),[a])}}(this,n)]};this.state.nodes.push(i)},render:function(){return this.state.nodes}},fl={step:function(t){return new q(t,.5)},stepAfter:function(t){return new q(t,1)},stepBefore:function(t){return new q(t,0)},linear:Go,basis:function(t){return new E(t)},cardinal:ns.tension(0),catmullRom:is,monotonex:function(t){return new $(t)},monotoney:function(t){return new I(t)},natural:function(t){return new H(t)}},dl={coordinates:{minor:.5,major:.5,layerId:0},orientation:"horizontal",layers:{curve:"linear",show:!0,line:{stroke:"#ccc",strokeWidth:1,opacity:1,show:!0},area:{fill:"#ccc",opacity:.8,show:!0}}},gl={require:["chart","resolver"],defaultSettings:{style:{area:"$shape",line:"$shape-outline"}},created:function(){this.stngs=this.settings.settings||{}},beforeRender:function(t){var e=t.size;this.rect=e},render:function(t){var e=t.data,n=this.rect,i=n.width,r=n.height,a=void 0===this.stngs.coordinates.minor0,o=Dr({data:e,stngs:this.stngs,rect:this.rect,resolver:this.resolver,style:this.style,missingMinor0:a});return o.sort(function(t,e){return t.median-e.median}),function(t,e){var n=e.width,i=e.height,r=e.missingMinor0,a=e.stngs,o=[];return t.forEach(function(t){var e=t.lineObj,s=t.layerObj,u=t.areaObj,c=t.points,l=Qo(),h=void 0,f=void 0,d={size:i,p:"y"},g={size:n,p:"x"};if("vertical"===a.orientation){var p=ko(!0,{},g);g=ko(!0,{},d),d=ko(!0,{},p)}l[g.p](function(t){return t.major*g.size})[d.p+"1"](function(t){return t.minor*d.size})[d.p+"0"](function(t){return t.minor0*d.size}).defined(function(t){return"number"==typeof t.minor&&!isNaN(t.minor)}).curve(fl["monotone"===s.curve?"monotone"+g.p:s.curve]),h=l["line"+d.p.toUpperCase()+"1"](),f=l["line"+d.p.toUpperCase()+"0"](),a.layers.area&&!1!==u.show&&o.push(Lr(c,{data:t.firstPoint,item:u,generator:l})),e&&!1!==e.show&&(o.push(Lr(c,{data:t.firstPoint,item:e,generator:h},"none")),!r&&a.layers.area&&!1!==u.show&&o.push(Lr(c,{data:t.firstPoint,item:e,generator:f},"none")))}),o}(o,{width:i,height:r,missingMinor0:a,stngs:this.stngs})}},pl="line",vl=[function(t){t.component("box",zc),t.component("box-marker",zc)},function(t){t.component(Pc,jc),t.component("point-marker",jc)},function(t){t.component("pie",Lc)},function(t){t.component("grid-line",Wc)},function(t){t.component("ref-line",$c)},function(t){t.component(Uc,Hc)},function(t){t.component("text",qc)},function(t){t.component("scrollbar",Yc)},function(t){t.component("brush-range",Gc),t.component("brush-area-dir",Jc)},function(t){t.component("range",Qc)},function(t){t.component("brush-lasso",Kc)},function(t){t.component("labels",il)},function(t){t.component(ll,cl)},function(t){t.component("legend-seq",hl)},function(t){t.component(pl,gl)}],yl=function(){function t(e){Ro(this,t),this._parent=null,this._children=[],this._ancestors=null,this.type=e,this.data=null}return zo(t,[{key:"detach",value:function(){return this._parent&&this._parent.removeChild(this),this}},{key:"equals",value:function(t){var e=this.children,n=t.children;if(e.length!==n.length)return!1;for(var i=0;i<e.length;i++)if(!e[i].equals(n[i]))return!1;return!0}},{key:"toJSON",value:function(){return{type:this.type,children:this.children.map(function(t){return t.toJSON()})}}},{key:"parent",get:function(){return this._parent}},{key:"isBranch",get:function(){return this._children&&this._children.length}},{key:"children",get:function(){return this._children}},{key:"ancestors",get:function(){if(!this._ancestors){var t=this._parent;this._ancestors=t?[t].concat(t.ancestors):[]}return this._ancestors}},{key:"descendants",get:function(){var t=[],e=void 0,n=void 0,i=void 0;for(e=0,n=this._children.length;e<n;e++)i=this._children[e],t.push(i),i._children.length&&(t=t.concat(i.descendants));return t}}]),t}(),ml=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.x,i=void 0===n?0:n,r=e.y,a=void 0===r?0:r,o=e.width,s=void 0===o?0:o,u=e.height,c=void 0===u?0:u,l=e.minWidth,h=void 0===l?0:l,f=e.minHeight,d=void 0===f?0:f;Ro(this,t),this.set({x:i,y:a,width:s,height:c,minWidth:h,minHeight:d})}return zo(t,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.x,n=void 0===e?0:e,i=t.y,r=void 0===i?0:i,a=t.width,o=void 0===a?0:a,s=t.height,u=void 0===s?0:s,c=t.minWidth,l=void 0===c?0:c,h=t.minHeight,f=void 0===h?0:h;this.type="rect",o>=0?(this.x=n,this.width=Math.max(o,l)):(this.x=n+Math.min(o,-l),this.width=-Math.min(o,-l)),u>=0?(this.y=r,this.height=Math.max(u,f)):(this.y=r+Math.min(u,-f),this.height=-Math.min(u,-f))}},{key:"containsPoint",value:function(t){return lc.testRectPoint(this,t)}},{key:"intersectsLine",value:function(t){var e=c(t);return lc.testRectLine(this,e)}},{key:"intersectsRect",value:function(t){var e=u(t);return lc.testRectRect(this,e)}},{key:"intersectsCircle",value:function(t){return lc.testCircleRect(t,this)}},{key:"intersectsPolygon",value:function(t){return lc.testPolygonRect(t,this)}},{key:"points",value:function(){return[{x:this.x,y:this.y},{x:this.x+this.width,y:this.y},{x:this.x+this.width,y:this.y+this.height},{x:this.x,y:this.y+this.height}]}}]),t}(),xl=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.cx,i=void 0===n?0:n,r=e.cy,a=void 0===r?0:r,o=e.r,s=void 0===o?0:o,u=e.minRadius,c=void 0===u?0:u;Ro(this,t),this.set({cx:i,cy:a,r:s,minRadius:c})}return zo(t,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.cx,n=void 0===e?0:e,i=t.cy,r=void 0===i?0:i,a=t.r,o=void 0===a?0:a,s=t.minRadius,u=void 0===s?0:s;this.type="circle",this.cx=n,this.cy=r,this.r=Math.max(o,u),this.vector={x:this.cx,y:this.cy}}},{key:"containsPoint",value:function(t){return lc.testCirclePoint(this,t)}},{key:"intersectsLine",value:function(t){var e=c(t);return lc.testCircleLine(this,e)}},{key:"intersectsRect",value:function(t){var e=u(t);return lc.testCircleRect(this,e)}},{key:"intersectsCircle",value:function(t){return lc.testCircleCircle(this,t)}},{key:"intersectsPolygon",value:function(t){return lc.testCirclePolygon(this,t)}},{key:"points",value:function(){return[{x:this.cx,y:this.cy}]}}]),t}(),bl=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.x1,i=void 0===n?0:n,r=e.y1,a=void 0===r?0:r,o=e.x2,s=void 0===o?0:o,u=e.y2,c=void 0===u?0:u,l=e.tolerance,h=void 0===l?0:l;Ro(this,t),this.set({x1:i,y1:a,x2:s,y2:c,tolerance:h})}return zo(t,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.x1,n=void 0===e?0:e,i=t.y1,r=void 0===i?0:i,a=t.x2,o=void 0===a?0:a,s=t.y2,u=void 0===s?0:s,c=t.tolerance,l=void 0===c?0:c;this.type="line",this.x1=n,this.y1=r,this.x2=o,this.y2=u,this.tolerance=Math.max(0,Math.round(l)),this.vectors=this.points(),this.zeroSize=n===o&&r===u}},{key:"containsPoint",value:function(t){if(this.tolerance>0){var e={cx:t.x,cy:t.y,r:this.tolerance};return lc.testCircleLine(e,this)}return lc.testLinePoint(this,t)}},{key:"intersectsLine",value:function(t){var e=c(t);return lc.testLineLine(this,e)}},{key:"intersectsRect",value:function(t){var e=u(t);return lc.testRectLine(e,this)}},{key:"intersectsCircle",value:function(t){return lc.testCircleLine(t,this)}},{key:"intersectsPolygon",value:function(t){return lc.testPolygonLine(t,this)}},{key:"points",value:function(){return[{x:this.x1,y:this.y1},{x:this.x2,y:this.y2}]}}]),t}(),wl=function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).vertices,n=void 0===e?[]:e;Ro(this,t),this.set({vertices:n})}return zo(t,[{key:"set",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).vertices,e=void 0===t?[]:t;if(this.type="polygon",this.vertices=e.slice(),this.edges=[],function(t){for(var e=0;e<t.length-1;e++){var n=t[e],i=t[e+1];n.x===i.x&&n.y===i.y&&(t.splice(e,1),e--)}}(this.vertices),!(this.vertices.length<=2)){!function(t){var e=t[0],n=t[t.length-1];e.x===n.x&&e.y===n.y||t.push(e)}(this.vertices),this.xMin=NaN,this.yMin=NaN,this.xMax=NaN,this.yMax=NaN;for(var n=0;n<this.vertices.length;n++)n<this.vertices.length-1&&this.edges.push([this.vertices[n],this.vertices[n+1]]),this.xMin=isNaN(this.xMin)?this.vertices[n].x:Math.min(this.xMin,this.vertices[n].x),this.xMax=isNaN(this.xMax)?this.vertices[n].x:Math.max(this.xMax,this.vertices[n].x),this.yMin=isNaN(this.yMin)?this.vertices[n].y:Math.min(this.yMin,this.vertices[n].y),this.yMax=isNaN(this.yMax)?this.vertices[n].y:Math.max(this.yMax,this.vertices[n].y);this._bounds=null,this._boundingRect=null}}},{key:"containsPoint",value:function(t){return lc.testPolygonPoint(this,t)}},{key:"intersectsCircle",value:function(t){return lc.testCirclePolygon(t,this)}},{key:"intersectsLine",value:function(t){return lc.testPolygonLine(this,c(t))}},{key:"intersectsRect",value:function(t){return lc.testPolygonRect(this,u(t))}},{key:"intersectsPolygon",value:function(t){if(!lc.testRectRect(this.boundingRect(),t.boundingRect()))return!1;for(var e=!1,n=0,i=this.edges.length;n<i&&!0!==(e=lc.testPolygonLine(t,c(this.edges[n])));n++);return e}},{key:"points",value:function(){return this.vertices}},{key:"bounds",value:function(){return this._bounds||(this._bounds=[{x:this.xMin,y:this.yMin},{x:this.xMax,y:this.yMin},{x:this.xMax,y:this.yMax},{x:this.xMin,y:this.yMax}]),this._bounds}},{key:"boundingRect",value:function(){return this._boundingRect||(this._boundingRect={x:this.xMin,y:this.yMin,width:this.xMax-this.xMin,height:this.yMax-this.yMin}),this._boundingRect}}]),t}(),kl=function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).points,n=void 0===e?[]:e;Ro(this,t),this.set({points:n})}return zo(t,[{key:"set",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).points,e=void 0===t?[]:t;if(this.type="polyline",this.segments=[],this._points=e.slice(),this._points.length>1)for(var n=0,i=this._points.length-1;n<i;n++)Wr(this._points[n],this._points[n+1])&&this.segments.push({x1:this._points[n].x,y1:this._points[n].y,x2:this._points[n+1].x,y2:this._points[n+1].y})}},{key:"containsPoint",value:function(t){return this.segments.some(function(e){return lc.testLinePoint(e,t)})}},{key:"intersectsCircle",value:function(t){return this.segments.some(function(e){return lc.testCircleLine(t,e)})}},{key:"intersectsLine",value:function(t){var e=c(t);return this.segments.some(function(t){return lc.testLineLine(t,e)})}},{key:"intersectsRect",value:function(t){var e=u(t);return this.segments.some(function(t){return lc.testRectLine(e,t)})}},{key:"intersectsPolygon",value:function(t){return this.segments.some(function(e){return lc.testPolygonLine(t,e)})}},{key:"points",value:function(){return this._points}}]),t}(),_l=Z();_l.add("rect",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(ml,[null].concat(e)))}),_l.add("circle",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(xl,[null].concat(e)))}),_l.add("line",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(bl,[null].concat(e)))}),_l.add("polygon",Br),_l.add("polyline",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(kl,[null].concat(e)))});var Ml=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Ro(this,t),this.set(e)}return zo(t,[{key:"set",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.geometries=[],e.forEach(function(e){var n=$r(e.type,e);n&&t.geometries.push(n)})}},{key:"containsPoint",value:function(t){return this.geometries.some(function(e){return e.containsPoint(t)})}},{key:"intersectsLine",value:function(t){return this.geometries.some(function(e){return e.intersectsLine(t)})}},{key:"intersectsRect",value:function(t){return this.geometries.some(function(e){return e.intersectsRect(t)})}},{key:"intersectsCircle",value:function(t){return this.geometries.some(function(e){return e.intersectsCircle(t)})}},{key:"intersectsPolygon",value:function(t){return this.geometries.some(function(e){return e.intersectsPolygon(t)})}}]),t}(),Sl=function(){function t(){Ro(this,t),this._elements=[[1,0,0],[0,1,0],[0,0,1]],this._stack=[]}return zo(t,[{key:"clone",value:function(){return(new t).multiply(this)}},{key:"set",value:function(t){return this._elements=t,this}},{key:"save",value:function(){return this._stack.push(this.elements),this}},{key:"restore",value:function(){return this._stack.length&&(this._elements=this._stack.pop()),this}},{key:"add",value:function(t){var e=void 0,n=void 0;for(e=0;e<this._elements.length;e++)for(n=0;n<this._elements[e].length;n++)this._elements[e][n]+=t;return this}},{key:"translate",value:function(t,e){return this.multiply([[1,0,t],[0,1,e],[0,0,1]]),this}},{key:"rotate",value:function(t){var e=Math.cos(-t),n=Math.sin(-t);return this.multiply([[e,n,0],[-n,e,0],[0,0,1]]),this}},{key:"multiply",value:function(e){var n=void 0,i=void 0,r=void 0,a=void 0;if(e instanceof t&&(e=e._elements),Array.isArray(e)){for(r=[[0,0,0],[0,0,0],[0,0,0]],n=0;n<this._elements.length;n++)for(i=0;i<this._elements[n].length;i++)for(a=0;a<3;a++)r[n][i]+=this._elements[n][a]*e[a][i];this._elements=r}else for(n=0;n<this._elements.length;n++)for(i=0;i<this._elements[n].length;i++)this._elements[n][i]*=e;return this}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this.multiply([[t,0,0],[0,e,0],[0,0,1]]),this}},{key:"transform",value:function(t,e,n,i,r,a){return this.multiply([[t,n,r],[e,i,a],[0,0,1]]),this}},{key:"determinant",value:function(){var t=this._elements[0][0],e=this._elements[0][1],n=this._elements[0][2],i=this._elements[1][0],r=this._elements[1][1],a=this._elements[1][2],o=this._elements[2][0],s=this._elements[2][1],u=this._elements[2][2];return t*r*u+e*a*o+n*i*s-n*r*o-e*i*u-t*a*s}},{key:"invert",value:function(){var t=this.determinant(),e=this._elements[0][0],n=this._elements[0][1],i=this._elements[0][2],r=this._elements[1][0],a=this._elements[1][1],o=this._elements[1][2],s=this._elements[2][0],u=this._elements[2][1],c=this._elements[2][2];return this._elements=[[a*c-o*u,i*u-n*c,n*o-i*a],[o*s-r*c,e*c-i*s,i*r-e*o],[r*u-a*s,s*n-e*u,e*a-n*r]],this.multiply(1/t),this}},{key:"transpose",value:function(){var t=Object.create(this._elements);return this._elements=[[t[0][0],t[1][0],t[2][0]],[t[0][1],t[1][1],t[2][1]],[t[0][2],t[1][2],t[2][2]]],this}},{key:"identity",value:function(){return this._elements=[[1,0,0],[0,1,0],[0,0,1]],this}},{key:"toString",value:function(){return""+this._elements.map(function(t){return t.join("\t")}).join("\n")}},{key:"isIdentity",value:function(){var t=this._elements;return 1===t[0][0]&&0===t[0][1]&&0===t[0][2]&&0===t[1][0]&&1===t[1][1]&&0===t[1][2]&&0===t[2][0]&&0===t[2][1]&&1===t[2][2]}},{key:"transformPoint",value:function(t){var e=[t.x,t.y,1],n=void 0,i=void 0,r=this._elements,a=[0,0,0];for(n=0;n<this._elements.length;n++)for(i=0;i<this._elements[n].length;i++)a[n]+=e[i]*r[n][i];return{x:a[0],y:a[1]}}},{key:"transformPoints",value:function(t){var e=void 0,n=void 0,i=void 0,r=void 0,a=void 0,o=this._elements,s=[];for(r=0;r<t.length;r++){for(e=[t[r].x,t[r].y,1],a=[0,0,0],n=0;n<this._elements.length;n++)for(i=0;i<this._elements[n].length;i++)a[n]+=e[i]*o[n][i];s.push({x:a[0],y:a[1]})}return s}},{key:"elements",get:function(){var t=this._elements;return[[t[0][0],t[0][1],t[0][2]],[t[1][0],t[1][1],t[1][2]],[t[2][0],t[2][1],t[2][2]]]}}]),t}(),Rl=/(translate|scale|rotate|matrix)\(([0-9,.eE+-\s]+)(?:,|\s?)+\)/g,zl={type:/^\w[\w-]+/,attr:/^\[\w(?:[\w\._-]+)?(?:[!]?=['\"][\w\s*#_-]*['\"])?\]/,universal:/^(\*)/,tag:/^\.(\w+)/},Nl={type:function(t,e){return e.filter(function(e){var n=e.type;return!!n&&n.toLowerCase()===t.toLowerCase()})},attr:function(t,e,n,i){return i.filter(function(i){var r=i.attrs[t];if(!e)return void 0!==r;if(void 0===r)return!1;switch(e){case"=":return n===String(r);case"!=":return n!==String(r);default:return!1}})},universal:function(t){return t},tag:function(t,e){return e.filter(function(e){var n=e.tag;return!!n&&-1!==n.indexOf(t.replace(".",""))})}},Cl={find:function(t,e){var n=[],i=[],r=void 0,a=void 0;if(e.isBranch){r=function(t){var e=[],n=void 0,i=void 0,r=void 0,a=void 0;return t.split(/\s*,\s*/).forEach(function(t){t=t.trim(),n=[];for(var o=function(e){(r=t.match(zl[e]))&&(a=!0,t=t.slice(r[0].length),i={type:e,value:r[0]},"attr"===e&&(r=r[0].match(/\[(\w[\w\._-]+)?(?:([!]?=)['\"]([\w\s#_-]*)['\"])?\]/),i.attribute=r[1],i.operator=r[2],i.attributeValue=r[3]),n.push(i))};t&&(a=!1,(r=t.match(/^\s*([>+~]|\s)\s*/))&&(a=!0,n.push({type:" ",value:r[0]}),t=t.slice(r[0].length)),Object.keys(zl).forEach(o),n&&n.length&&e.indexOf(n)<0&&e.push(n),a););}),e}(t),a=e.descendants;for(var o=void 0,s=function(t,e){o=r[t];var n=[],s=a.slice(),u=!1;o.reverse().forEach(function(t){if(" "===t.type)return n.push(s),s=a.slice(),void(u=!1);s=function(t,e){if(!e||!e.length||!t||"function"!=typeof Nl[t.type])return[];switch(t.type){case"type":return Nl[t.type](t.value,e);case"attr":return Nl[t.type](t.attribute,t.operator,t.attributeValue,e);case"universal":return Nl[t.type](e);case"tag":return Nl[t.type](t.value,e);default:return[]}}(t,s),u=!0}),u&&n.push(s);var c=n[0].filter(function(t){for(var e=t.parent,i=void 0,r=1;r<n.length;r++){for(i=n[r].indexOf(e);e&&i<0;)e=e.parent,i=n[r].indexOf(e);if(i<0)return!1}return!0});i.push(c)},u=0,c=r.length;u<c;u++)s(u);for(var l=0,h=i.length;l<h;l++)for(var f=0,d=i[l].length;f<d;f++)n.indexOf(i[l][f])<0&&n.push(i[l][f])}return n||[]}},Ol=function(){function t(e){var n=this;Ro(this,t),this._bounds=e.boundingRect?function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e.boundingRect(t)}:function(){return{x:0,y:0,width:0,height:0}},this._attrs=e.attrs,this._type=e.type,this._data=e.data,this._dpi=e.stage?e.stage.dpi:1,this._collider=function(){return function(t,e){var n=t.collider();if(n&&n.fn){var i=t.modelViewMatrix;return"collection"===n.type?{type:"container",children:n.fn.geometries.map(function(t){return Yr(t,e,i)})}:Yr(n.fn,e,i)}return null}(e,n._dpi)},this._desc=e.desc,this._tag=e.tag}return zo(t,[{key:"type",get:function(){return this._type}},{key:"data",get:function(){return this._data}},{key:"attrs",get:function(){return this._attrs}},{key:"element",set:function(t){this._element=t},get:function(){return this._element}},{key:"key",set:function(t){this._key=t},get:function(){return this._key}},{key:"bounds",get:function(){var t=this._bounds();return t.x/=this._dpi,t.y/=this._dpi,t.width/=this._dpi,t.height/=this._dpi,t}},{key:"localBounds",get:function(){return this._bounds(!1)}},{key:"collider",get:function(){return this._collider()}},{key:"desc",get:function(){return this._desc}},{key:"tag",get:function(){return this._tag}}]),t}(),Al=function(){function t(e){Ro(this,t),this._node=Xr(e),this._parent=null,this._input=null}return zo(t,[{key:"node",get:function(){return this._node}},{key:"parent",set:function(t){this._parent=t},get:function(){return this._parent}},{key:"input",set:function(t){this._input=t},get:function(){return this._input}}]),t}(),Tl=function(t){function e(t){Ro(this,e);var n=Ao(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._stage=null,n._collider=null,n._attrs={},n._node=null,n}return Oo(e,yl),zo(e,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.node=t;var e=t.data,n=t.desc,i=t.tag;!function(t,e){Object.keys(Nc).forEach(function(n){var i=e[n];if(void 0!==i){var r=Nc[n];t[r]=i}})}(this.attrs,t),void 0!==e&&(this.data=e),"object"===(void 0===n?"undefined":So(n))&&(this.desc=ko(!0,{},n)),"string"==typeof i&&(this.tag=i)}},{key:"collider",value:function(t){if(void 0===t)return this._collider;if(Array.isArray(t))return this._collider={fn:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(Ml,[null].concat(e)))}(t),type:"collection"},this._collider;var e=t.type,n=void 0===e?null:e,i={type:n};return n?this._collider&&this._collider.type===n?this._collider.fn.set(t):"frontChild"===n?this._collider=i:"bounds"===n?(i.fn=$r("rect",t),this._collider=i):-1!==["line","rect","circle","polygon","polyline"].indexOf(n)&&(i.fn=$r(n,t),this._collider=i):this._collider=null,this._collider}},{key:"findShapes",value:function(t){return Cl.find(t,this).map(function(t){return Xr(t)})}},{key:"getItemsFrom",value:function(t){return function(t,e){var n=ta(e,t.dpi),i=To(n,2),r=i[0],a=i[1],o=[];return r&&(Qr([t],r,o,a),function(t,e){for(var n=0,i=e.length;n<i;n++)e[n].input=t}(e,o)),o}(this,t)}},{key:"containsPoint",value:function(t){return ea(this,t)}},{key:"intersectsLine",value:function(t){return ea(this,t)}},{key:"intersectsRect",value:function(t){return ea(this,t)}},{key:"intersectsCircle",value:function(t){return ea(this,t)}},{key:"intersectsPolygon",value:function(t){return ea(this,t)}},{key:"resolveLocalTransform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Sl;void 0!==this.attrs.transform&&qr(this.attrs.transform,t),this.modelViewMatrix=t.clone()}},{key:"resolveGlobalTransform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Sl,e=this.ancestors;if(e.length>0)for(var n=e.length-1;n>=0;n--)e[n].resolveLocalTransform(t),t=e[n].modelViewMatrix;this.resolveLocalTransform(t)}},{key:"attr",value:function(t){return this.attrs[t]}},{key:"equals",value:function(t){var n=this.attrs,i=Object.keys(n),r=t.attrs,a=Object.keys(r);if(i.length!==a.length)return!1;for(var o=0;o<i.length;o++){var s=i[o];if(!Object.hasOwnProperty.call(r,s))return!1;if(n[s]!==r[s])return!1}return Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"equals",this).call(this,t)}},{key:"toJSON",value:function(){var t=Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"toJSON",this).call(this);return t.attrs=this.attrs,t}},{key:"attrs",get:function(){return this._attrs}},{key:"stage",get:function(){return this._parent&&!this._stage?this._stage=this._parent.stage:this._parent||this._stage===this||(this._stage=null),this._stage}},{key:"modelViewMatrix",set:function(t){this._mvm=t,this._imvm=null},get:function(){return this._mvm}},{key:"inverseModelViewMatrix",get:function(){return this._imvm=this._imvm?this._imvm:this._mvm.clone().invert(),this._imvm}},{key:"node",set:function(t){this._node=t},get:function(){return this._node}}]),e}(),El=function(t){function e(){return Ro(this,e),Ao(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return Oo(e,yl),zo(e,[{key:"addChild",value:function(t){if(!(t&&t instanceof yl))throw new TypeError("Expecting a Node as argument, but got "+t);if(t===this)throw new Error("Can not add itself as child!");if(t._children&&t._children.length&&this.ancestors.indexOf(t)>=0)throw new Error("Can not add an ancestor as child!");t._parent&&t._parent!==this&&t._parent.removeChild(t);var e=this._children.indexOf(t);return e>=0&&this._children.splice(e,1),this._children.push(t),t._parent=this,t._ancestors=null,this}},{key:"addChildren",value:function(t){var e=void 0,n=t?t.length:0;for(e=0;e<n;e++)this.addChild(t[e]);return this}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);return e>=0&&(this._children.splice(e,1),t._parent=null,t._ancestors=null),this}},{key:"removeChildren",value:function(t){var e=void 0,n=void 0;if(!this._children)return this;if(t)for(n=t.length,e=0;e<n;e++)this.removeChild(t[e]);else for(;this._children.length;)this.removeChild(this._children[0]);return this}}]),e}(),jl=El.prototype,Pl=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ro(this,e);var n=t.type,i=void 0===n?"container":n,r=Ao(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return r.set(t),r._boundingRect={},r}return Oo(e,Tl),zo(e,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"set",this).call(this,t);var n=t.collider,i=ko({type:null},n);Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"collider",this).call(this,i)}},{key:"boundingRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.children.length;this._boundingRect={};for(var n=0;n<e;n++)na(this,this.children[n],t);return ko({x:0,y:0,width:0,height:0},this._boundingRect)}},{key:"bounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.boundingRect(t);return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}]}},{key:"addChild",value:function(t){var n=jl.addChild.call(this,t);if(this._collider&&"bounds"===this._collider.type){na(this,t,!0);var i=ko({type:"bounds",x:0,y:0,width:0,height:0},this._boundingRect);Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"collider",this).call(this,i)}return n}},{key:"addChildren",value:function(t){var n=jl.addChildren.call(this,t),i=t.length;if(this._collider&&"bounds"===this._collider.type&&i>0){for(var r=0;r<i;r++)na(this,t[r],!0);var a=ko({type:"bounds",x:0,y:0,width:0,height:0},this._boundingRect);Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"collider",this).call(this,a)}return n}},{key:"removeChild",value:function(t){t._stage=null;var n=t.descendants,i=n?n.length:0,r=void 0;for(r=0;r<i;r++)n[r]._stage=null;if(jl.removeChild.call(this,t),this._collider&&"bounds"===this._collider.type){var a=ko(this.boundingRect(!0),{type:"bounds"});Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"collider",this).call(this,a)}return this}},{key:"removeChildren",value:function(t){if(jl.removeChildren.call(this,t),this._collider&&"bounds"===this._collider.type){var n=ko(this.boundingRect(!0),{type:"bounds"});Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"collider",this).call(this,n)}return this}}]),e}(),Fl=function(t){function e(t){Ro(this,e);var n=Ao(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"stage"));return n._stage=n,n._dpiRatio=t||1,n}return Oo(e,Pl),zo(e,[{key:"dpi",get:function(){return this._dpiRatio}}]),e}(),Ll=El.prototype,Dl=["x1","x2","y1","y2","id","offset","style"],Bl=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ro(this,e);var n=t.type,i=void 0===n?"container":n,r=Ao(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return r.set(t),r._boundingRect={},r}return Oo(e,Tl),zo(e,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"set",this).call(this,t);for(var n=this.attrs,i="",r=0,a=Dl.length;r!==a;r++)t[i=Dl[r]]&&(n[i]=t[i])}},{key:"addChild",value:function(t){return Ll.addChild.call(this,t)}},{key:"addChildren",value:function(t){return Ll.addChildren.call(this,t)}},{key:"removeChild",value:function(t){t._stage=null;var e=t.descendants,n=e?e.length:0,i=void 0;for(i=0;i<n;i++)e[i]._stage=null;return Ll.removeChild.call(this,t),this}},{key:"removeChildren",value:function(t){return Ll.removeChildren.call(this,t),this}}]),e}(),Wl=function(t){function e(){Ro(this,e);var t=Ao(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"rect"));return t.set.apply(t,arguments),t}return Oo(e,Tl),zo(e,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.x,i=void 0===n?0:n,r=t.y,a=void 0===r?0:r,o=t.width,s=void 0===o?0:o,u=t.height,c=void 0===u?0:u,l=t.collider,h=ko({type:"rect",x:i,y:a,width:s,height:c},l);Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"set",this).call(this,t),Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"collider",this).call(this,h),s>=0?(this.attrs.x=i,this.attrs.width=s):(this.attrs.x=i+s,this.attrs.width=-s),c>=0?(this.attrs.y=a,this.attrs.height=c):(this.attrs.y=a+c,this.attrs.height=-c)}},{key:"boundingRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=s(this.attrs),n=a(t&&this.modelViewMatrix?this.modelViewMatrix.transformPoints(e):e),i=To(n,4),r=i[0],o=i[1];return{x:r,y:o,width:i[2]-r,height:i[3]-o}}},{key:"bounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.boundingRect(t);return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}]}}]),e}(),$l=function(t){function e(){Ro(this,e);var t=Ao(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"circle"));return t.set.apply(t,arguments),t}return Oo(e,Tl),zo(e,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.cx,i=void 0===n?0:n,r=t.cy,a=void 0===r?0:r,o=t.r,s=void 0===o?0:o,u=t.collider,c=ko({type:"circle",cx:i,cy:a,r:s},u);Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"set",this).call(this,t),Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"collider",this).call(this,c),this.attrs.cx=i,this.attrs.cy=a,this.attrs.r=s}},{key:"boundingRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.bounds(t);return{x:e[0].x,y:e[0].y,width:e[2].x-e[0].x,height:e[2].y-e[0].y}}},{key:"bounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.attrs,n=e.cx,i=e.cy,r=e.r,o=e.r,s=n-r,u=i-o,c=2*r,l=2*o,h=[{x:s,y:u},{x:s+c,y:u},{x:s+c,y:u+l},{x:s,y:u+l}];if(t&&this.modelViewMatrix){var f=a(h=this.modelViewMatrix.transformPoints(h)),d=To(f,4),g=d[0],p=d[1];return c=d[2]-g,l=d[3]-p,[{x:g,y:p},{x:g+c,y:p},{x:g+c,y:p+l},{x:g,y:p+l}]}return h}}]),e}(),Il=function(t){function e(){Ro(this,e);var t=Ao(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"line"));return t.set.apply(t,arguments),t}return Oo(e,Tl),zo(e,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.x1,i=void 0===n?0:n,r=t.y1,a=void 0===r?0:r,o=t.x2,s=void 0===o?0:o,u=t.y2,c=void 0===u?0:u,l=t.collider;Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"set",this).call(this,t),this.attrs.x1=i,this.attrs.y1=a,this.attrs.x2=s,this.attrs.y2=c;var h={type:"line",x1:i,y1:a,x2:s,y2:c};Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"collider",this).call(this,ko(h,l))}},{key:"boundingRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=o(this.attrs);t&&this.modelViewMatrix&&(e=this.modelViewMatrix.transformPoints(e));var n=a(e),i=To(n,4),r=i[0],s=i[1],u=i[2],c=i[3],l=r!==u||s!==c;return{x:r,y:s,width:l?Math.max(1,u-r):0,height:l?Math.max(1,c-s):0}}},{key:"bounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.boundingRect(t);return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}]}}]),e}(),Vl=2*Math.PI,Hl=function(t){function e(){Ro(this,e);var t=Ao(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"path"));return t.set.apply(t,arguments),t}return Oo(e,Tl),zo(e,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"set",this).call(this,t),this.segments=[],this.points=[],this.attrs.d=t.d,t.collider)Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"collider",this).call(this,t.collider);else if(t.d){var n=[];this.segments=ca(t.d),this.segments.forEach(function(t){t.length<=1||(!function(t){if(t.length<2)return!1;var e=t[0],n=t[t.length-1];return e.x===n.x&&e.y===n.y}(t)?n.push({type:"polyline",points:t}):n.push({type:"polygon",vertices:t}))}),Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"collider",this).call(this,n)}}},{key:"boundingRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.points.length||(this.segments=this.segments.length?this.segments:ca(this.attrs.d),this.points=function(t){for(var e=[],n=void 0,i=t.length,r=0;r<i;r++){n=t[r];for(var a=0;a<n.length;a++)e.push(n[a])}return e}(this.segments));var e=a(t&&this.modelViewMatrix?this.modelViewMatrix.transformPoints(this.points):this.points),n=To(e,4),i=n[0],r=n[1],o=n[2],s=n[3];return{x:i||0,y:r||0,width:o-i||0,height:s-r||0}}},{key:"bounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.boundingRect(t);return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}]}}]),e}(),Ul=function(t){function e(){Ro(this,e);var t=Ao(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"text"));return t.set.apply(t,arguments),t}return Oo(e,Tl),zo(e,[{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.x,i=void 0===n?0:n,r=t.y,a=void 0===r?0:r,o=t.dx,s=void 0===o?0:o,u=t.dy,c=void 0===u?0:u,l=t.textBoundsFn,h=t.text,f=t.collider,d=t.boundingRect;Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"set",this).call(this,t),Co(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"collider",this).call(this,f),this.attrs.x=i,this.attrs.y=a,this.attrs.dx=s,this.attrs.dy=c,this.attrs.text=h,d?this._boundingRect=d:"function"==typeof l&&(this._boundingRect=l(this.attrs))}},{key:"boundingRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._boundingRect)return{x:0,y:0,width:0,height:0};var e=s(this._boundingRect),n=a(t&&this.modelViewMatrix?this.modelViewMatrix.transformPoints(e):e),i=To(n,4),r=i[0],o=i[1];return{x:r,y:o,width:i[2]-r,height:i[3]-o}}},{key:"bounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.boundingRect(t);return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}]}}]),e}(),ql=Z();ql.add("rect",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(Wl,[null].concat(e)))}),ql.add("circle",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply($l,[null].concat(e)))}),ql.add("text",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(Ul,[null].concat(e)))}),ql.add("line",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(Il,[null].concat(e)))}),ql.add("path",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(Hl,[null].concat(e)))}),ql.add("stage",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(Fl,[null].concat(e)))}),ql.add("container",function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(Function.prototype.bind.apply(Pl,[null].concat(e)))}),ql.add("defs",ia),ql.add("linearGradient",ia),ql.add("radialGradient",ia),ql.add("stop",ia);var Yl=function(){function t(){return n[n.length-1]}var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[{}];return t.save=function(){for(var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t(),a={},o="",s=0;s<e.length;s++)void 0!==r[o=e[s]]&&(a[o]=r[o]);return ko(a,i),n.push(a),t()},t.restore=function(){n.splice(n.length-1,1)},t}(["stroke","fill","strokeWidth","opacity","fontFamily","fontSize","baseline"]),Xl=/\n+|\r+|\r\n/,Zl=/\s/,Gl=/[a-zA-Z\u00C0-\u00F6\u00F8-\u00FF\u00AD]/,Jl=0,Ql=1,Kl=2,th=1.2,eh="",nh="",ih={},rh={},ah=void 0,oh=Z(),sh=new RegExp("[A-Za-z---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),uh=new RegExp("[-------]"),ch=new RegExp("[-----------]"),lh={start:"end",end:"start",center:"center",middle:"middle"};Va("rect",function(t,e){var n=e.g,i=e.doFill,r=e.doStroke;n.beginPath(),n.rect(t.x,t.y,t.width,t.height),i&&n.fill(),r&&n.stroke()}),Va("circle",function(t,e){var n=e.g,i=e.doFill,r=e.doStroke;n.beginPath(),n.moveTo(t.cx+t.r,t.cy),n.arc(t.cx,t.cy,t.r,0,2*Math.PI,!1),i&&n.fill(),r&&n.stroke()}),Va("line",function(t,e){var n=e.g,i=e.doStroke;n.beginPath(),n.moveTo(t.x1,t.y1),n.lineTo(t.x2,t.y2),i&&n.stroke()}),Va("path",function(t,e){var n=e.g,i=e.doStroke,r=e.doFill,a=new Path2D(t.d);r&&n.fill(a),i&&n.stroke(a)}),Va("text",function(t,e){var n=e.g,i=Ca(t,Ta);n.font=t["font-size"]+" "+t["font-family"],n.canvas.dir=qa(t.text);var r="middle"===t["text-anchor"]?"center":t["text-anchor"];n.textAlign=Ya(r,n.canvas.dir);var a=Oa(t);n.fillText(i,t.x+t.dx,t.y+t.dy+a)});for(var hh="http://www.w3.org/2000/svg",fh=function(t,e){if(!t||"string"!=typeof t)throw new Error("Invalid type: "+t);var n=e.ownerDocument.createElementNS(hh,"container"===t?"g":t);return e.appendChild(n),n},dh=function(t){t.parentNode&&t.parentNode.removeChild(t)},gh=function(t,e){for(var n in e.attrs)if("text"===n){t.setAttribute("style","white-space: pre"),t.textContent=Ca(e.attrs,Ta);var i=qa(e.attrs.text);"rtl"===i&&(t.setAttribute("direction","rtl"),t.setAttribute("dir","rtl"),t.setAttribute("text-anchor",Ya(t.getAttribute("text-anchor"),i)))}else if("text"!==e.type||"dy"!==n&&"dominant-baseline"!==n)t.setAttribute(n,e.attrs[n]);else{var r=+t.getAttribute(n)||0,a=0;a="dominant-baseline"===n?Oa(e.attrs):e.attrs[n],t.setAttribute("dy",a+r)}if("string"==typeof e.data||"number"==typeof e.data||"boolean"==typeof e.data)t.setAttribute("data",e.data);else if("object"===So(e.data)&&null!==e.data)for(var o in e.data)"string"!=typeof e.data[o]&&"number"!=typeof e.data[o]&&"boolean"!=typeof e.data[o]||t.setAttribute("data-"+o,e.data[o])},ph=function(){function t(e,n,i,r){Ro(this,t),this.create=e,this.nodeCreator=n,this.nodeMaintainer=i,this.nodeDestroyer=r}return zo(t,[{key:"render",value:function(t,e){return this.create([],t,e,this.nodeCreator,this.nodeMaintainer,this.nodeDestroyer)}}]),t}(),vh=[],yh={},mh=function(t,e,n,i,r){return{sel:t,data:e,children:n,text:i,elm:r,key:void 0===e?void 0:e.key}},xh={array:Array.isArray,primitive:function(t){return"string"==typeof t||"number"==typeof t}},bh={createElement:function(t){return document.createElement(t)},createElementNS:function(t,e){return document.createElementNS(t,e)},createTextNode:function(t){return document.createTextNode(t)},appendChild:function(t,e){t.appendChild(e)},removeChild:function(t,e){t.removeChild(e)},insertBefore:function(t,e,n){t.insertBefore(e,n)},parentNode:function(t){return t.parentElement},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e}},wh=mh("",{},[],void 0,void 0),kh=["create","update","remove","destroy","pre","post"],_h={init:function(t,e){function n(t,n){return function(){if(0==--n){var i=e.parentNode(t);e.removeChild(i,t)}}}function i(t,n){var r,a=t.data;ro(a)&&ro(r=a.hook)&&ro(r=r.init)&&(r(t),a=t.data);var o,s=t.children,u=t.sel;if(ro(u)){var c=u.indexOf("#"),h=u.indexOf(".",c),f=c>0?c:u.length,d=h>0?h:u.length,g=-1!==c||-1!==h?u.slice(0,Math.min(f,d)):u;if(o=t.elm=ro(a)&&ro(r=a.ns)?e.createElementNS(r,g):e.createElement(g),f<d&&(o.id=u.slice(f+1,d)),h>0&&(o.className=u.slice(d+1).replace(/\./g," ")),xh.array(s))for(r=0;r<s.length;++r)e.appendChild(o,i(s[r],n));else xh.primitive(t.text)&&e.appendChild(o,e.createTextNode(t.text));for(r=0;r<l.create.length;++r)l.create[r](wh,t);ro(r=t.data.hook)&&(r.create&&r.create(wh,t),r.insert&&n.push(t))}else o=t.elm=e.createTextNode(t.text);return t.elm}function r(t,n,r,a,o,s){for(;a<=o;++a)e.insertBefore(t,i(r[a],s),n)}function a(t){var e,n,i=t.data;if(ro(i)){for(ro(e=i.hook)&&ro(e=e.destroy)&&e(t),e=0;e<l.destroy.length;++e)l.destroy[e](t);if(ro(e=t.children))for(n=0;n<t.children.length;++n)a(t.children[n])}}function o(t,i,r,o){for(;r<=o;++r){var s,u,c,h=i[r];if(ro(h))if(ro(h.sel)){for(a(h),u=l.remove.length+1,c=n(h.elm,u),s=0;s<l.remove.length;++s)l.remove[s](h,c);ro(s=h.data)&&ro(s=s.hook)&&ro(s=s.remove)?s(h,c):c()}else e.removeChild(t,h.elm)}}function s(t,n,a){var u,c;ro(u=n.data)&&ro(c=u.hook)&&ro(u=c.prepatch)&&u(t,n);var h=n.elm=t.elm,f=t.children,d=n.children;if(t!==n){if(!ao(t,n)){var g=e.parentNode(t.elm);return h=i(n,a),e.insertBefore(g,h,t.elm),void o(g,[t],0,0)}if(ro(n.data)){for(u=0;u<l.update.length;++u)l.update[u](t,n);ro(u=n.data.hook)&&ro(u=u.update)&&u(t,n)}io(n.text)?ro(f)&&ro(d)?f!==d&&function(t,n,a,u){for(var c,l,h,f=0,d=0,g=n.length-1,p=n[0],v=n[g],y=a.length-1,m=a[0],x=a[y];f<=g&&d<=y;)io(p)?p=n[++f]:io(v)?v=n[--g]:ao(p,m)?(s(p,m,u),p=n[++f],m=a[++d]):ao(v,x)?(s(v,x,u),v=n[--g],x=a[--y]):ao(p,x)?(s(p,x,u),e.insertBefore(t,p.elm,e.nextSibling(v.elm)),p=n[++f],x=a[--y]):ao(v,m)?(s(v,m,u),e.insertBefore(t,v.elm,p.elm),v=n[--g],m=a[++d]):(io(c)&&(c=oo(n,f,g)),io(l=c[m.key])?(e.insertBefore(t,i(m,u),p.elm),m=a[++d]):(s(h=n[l],m,u),n[l]=void 0,e.insertBefore(t,h.elm,p.elm),m=a[++d]));f>g?r(t,io(a[y+1])?null:a[y+1].elm,a,d,y,u):d>y&&o(t,n,f,g)}(h,f,d,a):ro(d)?(ro(t.text)&&e.setTextContent(h,""),r(h,null,d,0,d.length-1,a)):ro(f)?o(h,f,0,f.length-1):ro(t.text)&&e.setTextContent(h,""):t.text!==n.text&&e.setTextContent(h,n.text),ro(c)&&ro(u=c.postpatch)&&u(t,n)}}var u,c,l={};for(io(e)&&(e=bh),u=0;u<kh.length;++u)for(l[kh[u]]=[],c=0;c<t.length;++c)void 0!==t[c][kh[u]]&&l[kh[u]].push(t[c][kh[u]]);return function(t,n){var r,a,u,c=[];for(r=0;r<l.pre.length;++r)l.pre[r]();for(io(t.sel)&&(t=function(t){var n=t.id?"#"+t.id:"",i=t.className?"."+t.className.split(" ").join("."):"";return mh(e.tagName(t).toLowerCase()+n+i,{},[],void 0,t)}(t)),ao(t,n)?s(t,n,c):(a=t.elm,u=e.parentNode(a),i(n,c),null!==u&&(e.insertBefore(u,n.elm,e.nextSibling(a)),o(u,[t],0,0))),r=0;r<c.length;++r)c[r].data.hook.insert(c[r]);for(r=0;r<l.post.length;++r)l.post[r]();return n}}},Mh={xlink:"http://www.w3.org/1999/xlink"},Sh=["allowfullscreen","async","autofocus","autoplay","checked","compact","controls","declare","default","defaultchecked","defaultmuted","defaultselected","defer","disabled","draggable","enabled","formnovalidate","hidden","indeterminate","inert","ismap","itemscope","loop","multiple","muted","nohref","noresize","noshade","novalidate","nowrap","open","pauseonexit","readonly","required","reversed","scoped","seamless","selected","sortable","spellcheck","translate","truespeed","typemustmatch","visible"],Rh=Object.create(null),zh=0,Nh=Sh.length;zh<Nh;zh++)Rh[Sh[zh]]=!0;var Ch={create:so,update:so},Oh={create:uo,update:uo},Ah="undefined"!=typeof window&&window.requestAnimationFrame||setTimeout,Th=function(t){Ah(function(){Ah(t)})},Eh={create:lo,update:lo,destroy:function(t){var e,n,i=t.elm,r=t.data.style;if(r&&(e=r.destroy))for(n in e)i.style[n]=e[n]},remove:function(t,e){var n=t.data.style;if(n&&n.remove){var i,r=t.elm,a=0,o=n.remove,s=0,u=[];for(i in o)u.push(i),r.style[i]=o[i];for(var c=getComputedStyle(r)["transition-property"].split(", ");a<c.length;++a)-1!==u.indexOf(c[a])&&s++;r.addEventListener("transitionend",function(t){t.target===r&&--s,0===s&&e()})}else e()}},jh={create:go,update:go,destroy:go},Ph=function(t,e,n){var i,r,a,o={};if(void 0!==n?(o=e,xh.array(n)?i=n:xh.primitive(n)&&(r=n)):void 0!==e&&(xh.array(e)?i=e:xh.primitive(e)?r=e:o=e),xh.array(i))for(a=0;a<i.length;++a)xh.primitive(i[a])&&(i[a]=mh(void 0,void 0,void 0,i[a]));return"s"===t[0]&&"v"===t[1]&&"g"===t[2]&&po(o,i,t),mh(t,o,i,r,void 0)},Fh=_h.init([Ch,Oh,Eh,jh]),Lh=[function(t){t.renderer("svg",no)},function(t){t.renderer("canvas",Ia)},function(t){t.renderer("dom",vo)}],Dh={OFF:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},Bh=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.level,i=void 0===n?Dh.OFF:n,r=e.pipe,a=void 0===r?console:r,o=i,s=(t={},No(t,Dh.OFF,function(){}),No(t,Dh.ERROR,function(){return a.error.apply(a,arguments)}),No(t,Dh.WARN,function(){return a.warn.apply(a,arguments)}),No(t,Dh.INFO,function(){return a.info.apply(a,arguments)}),No(t,Dh.DEBUG,function(){return a.log.apply(a,arguments)}),t),u=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];!t||o<t||(s[t]||s[Dh.DEBUG]).apply(void 0,n)};return{log:u,error:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return u.apply(void 0,[Dh.ERROR].concat(e))},warn:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return u.apply(void 0,[Dh.WARN].concat(e))},info:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return u.apply(void 0,[Dh.INFO].concat(e))},debug:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return u.apply(void 0,[Dh.DEBUG].concat(e))},level:function(t){return"number"==typeof t&&(o=t),o},LOG_LEVEL:Dh}},Wh=yo({renderer:{prio:["svg","canvas"]},logger:{level:0},style:{"$font-family":"'Source Sans Pro', Arial, sans-serif","$font-size":"12px","$line-height":"16px","$font-size--l":"16px","$gray-100":"#ffffff","$gray-98":"#f9f9f9","$gray-95":"#f2f2f2","$gray-90":"#e6e6e6","$gray-35":"#595959","$gray-30":"#4d4d4d","$gray-25":"#404040","$gray-20":"#333333","$border-95":"rgba(255, 255, 255, 0.05)","$border-90":"rgba(255, 255, 255, 0.1)","$border-80":"rgba(255, 255, 255, 0.2)","$border-20":"rgba(0, 0, 0, 0.2)","$border-10":"rgba(0, 0, 0, 0.1)","$border-5":"rgba(0, 0, 0, 0.05)","$primary-blue":"#3F8AB3","$primary-green":"#6CB33F","$primary-red":"#DC423F","$primary-orange":"#EF960F","$spacing--s":4,$spacing:8,"$spacing--l":12,"$font-color":"$gray-35","$font-color--inverted":"$gray-90","$guide-color":"$gray-90","$guide-color--inverted":"$gray-35",$border:"$border-80","$border--inverted":"$border-10",$shape:{fill:"$primary-blue",strokeWidth:1,stroke:"$border"},"$shape-outline":{stroke:"$primary-blue",strokeWidth:2},"$shape-guide":{stroke:"$guide-color",strokeWidth:1},"$shape-guide--inverted":{"@extend":"$shape-guide",stroke:"$guide-color--inverted"},$label:{fontSize:"$font-size",fontFamily:"$font-family",fill:"$font-color"},"$label--inverted":{$extend:"$label",fill:"$font-color--inverted"},"$label-overlay":{fontSize:"$font-size--l",fontFamily:"$font-family",fill:"$gray-100",color:"$font-color",stroke:"$guide-color--inverted",strokeWidth:1,borderRadius:4},$title:{"@extend":"$label",fontSize:"$font-size--l"},"$guide-line":{strokeWidth:1,stroke:"$guide-color"},"$guide-line--minor":{strokeWidth:1,stroke:"$gray-95"},"$padding--s":{left:"$spacing--s",right:"$spacing--s",top:"$spacing--s",bottom:"$spacing--s"},$padding:{left:"$spacing",right:"$spacing",top:"$spacing",bottom:"$spacing"},"$selection-area-target":{fill:"$primary-green",strokeWidth:0,opacity:.2}},palettes:[{key:"categorical",colors:[["#a54343","#d76c6c","#ec983d","#ecc43d","#f9ec86","#cbe989","#70ba6e","#578b60","#79d69f","#26a0a7","#138185","#65d3da"]]},{key:"diverging",colors:[["#3d52a1","#3a89c9","#77b7e5","#b4ddf7","#e6f5fe","#ffe3aa","#f9bd7e","#ed875e","#d24d3e","#ae1c3e"]]},{key:"sequential",colors:[["rgb(180,221,212)","rgb(34, 83, 90)"]]}]},{component:pc,data:bc,formatter:Is,interaction:wc,renderer:gc(),scale:Gu});return vl.forEach(Wh.use),Lh.forEach(Wh.use),[].forEach(Wh.use),Wh});
